<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Leecode Record, JackHCC">
    <meta name="description" content="Leecode刷题本【更新:每天一道】">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Leecode Record | JackHCC</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my.css">
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="JackHCC" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-hopscotch.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">JackHCC</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">JackHCC</div>
        <div class="logo-desc">
            
            Make the world betterrrr!!!
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/JackHCC/JackHCC.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/JackHCC/JackHCC.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/0.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Leecode Record</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 30px;
        bottom: 146px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Algorithm/">
                                <span class="chip bg-color">Algorithm</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Algorithm/" class="post-category">
                                Algorithm
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-10-24
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-11-20
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    17.5k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    95 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="Easy"><a href="#Easy" class="headerlink" title="Easy"></a>Easy</h2><ul>
<li><a href="https://www.jianshu.com/p/3c7fe92a607d" target="_blank" rel="noopener">2021-10-25 1.两数之和</a></li>
<li><a href="https://www.jianshu.com/p/89e92b68ec48" target="_blank" rel="noopener">2021-10-26 13. 罗马数字转整数</a></li>
<li><a href="https://www.jianshu.com/p/34a43e66f6cf" target="_blank" rel="noopener">2021-10-27 21. 合并两个有序链表</a></li>
<li><a href="https://www.jianshu.com/p/b67b922aaacc" target="_blank" rel="noopener">2021-10-28 53. 最大子序和</a></li>
<li><a href="https://www.jianshu.com/p/c8317e26855f" target="_blank" rel="noopener">2021-10-29 70. 爬楼梯</a></li>
<li><a href="https://www.jianshu.com/p/73ce5310ffbd" target="_blank" rel="noopener">2021-10-30 69. Sqrt(x)</a></li>
<li><a href="https://www.jianshu.com/p/f46b35875518" target="_blank" rel="noopener">2021-10-31 108. 将有序数组转换为二叉搜索树</a></li>
<li><a href="https://www.jianshu.com/p/f699df55a5ed" target="_blank" rel="noopener">2021-10-31 190. 颠倒二进制位</a></li>
<li><a href="https://www.jianshu.com/p/db580a832999" target="_blank" rel="noopener">2021-11-01 121. 买卖股票的最佳时机</a></li>
<li><a href="https://www.jianshu.com/p/ba94877bf3ce" target="_blank" rel="noopener">2021-11-03 169. 多数元素</a></li>
<li><a href="https://www.jianshu.com/p/8fce2fcea3b2" target="_blank" rel="noopener">2021-11-04 141. 环形链表</a></li>
<li><a href="https://www.jianshu.com/p/51e39c7915c9" target="_blank" rel="noopener">2021-11-05 100. 相同的树</a></li>
<li><a href="https://www.jianshu.com/p/f61ebcca048c" target="_blank" rel="noopener">2021-11-06 110. 平衡二叉树</a></li>
<li><a href="https://www.jianshu.com/p/f5d181769251" target="_blank" rel="noopener">2021-11-08 268. 丢失的数字</a></li>
<li><a href="https://www.jianshu.com/p/b5c5c3c3dcc1" target="_blank" rel="noopener">2021-11-09 1475. 商品折扣后的最终价格</a></li>
<li><a href="https://www.jianshu.com/p/e9cc9d2b873c" target="_blank" rel="noopener">2021-11-13 784. 字母大小写全排列</a></li>
<li><a href="https://www.jianshu.com/p/77ef627c43d2" target="_blank" rel="noopener">2021-11-14 762. 二进制表示中质数个计算置位</a></li>
</ul>
<h2 id="Medium"><a href="#Medium" class="headerlink" title="Medium"></a>Medium</h2><ul>
<li><a href="https://www.jianshu.com/p/a26c2af6fbac" target="_blank" rel="noopener">2021-10-26 2.两数相加</a></li>
<li><a href="https://www.jianshu.com/p/6d971e13012c" target="_blank" rel="noopener">2021-11-02 198. 打家劫舍</a></li>
<li><a href="https://www.jianshu.com/p/fd4a0404e5fd" target="_blank" rel="noopener">2021-11-07 204. 计数质数</a></li>
<li><a href="https://www.jianshu.com/p/08579112e501" target="_blank" rel="noopener">2021-11-10 973. 最接近原点的 K 个点</a></li>
<li><a href="https://www.jianshu.com/p/c2bc604cca9c" target="_blank" rel="noopener">2021-11-11 707. 设计链表</a></li>
<li><a href="https://www.jianshu.com/p/5f3228ac1dff" target="_blank" rel="noopener">2021-11-12 438. 找到字符串中所有字母异位词</a></li>
</ul>
<h2 id="Hard"><a href="#Hard" class="headerlink" title="Hard"></a>Hard</h2><h2 id="ast-—-抽象语法树"><a href="#ast-—-抽象语法树" class="headerlink" title="ast —- 抽象语法树"></a><code>ast</code> —- 抽象语法树</h2><p><strong>源代码：</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/ast.py" target="_blank" rel="noopener">Lib/ast.py</a></p>
<hr>
<p><code>ast</code> 模块帮助 Python 程序处理 Python 语法的抽象语法树。抽象语法或许会随着 Python 的更新发布而改变；该模块能够帮助理解当前语法在编程层面的样貌。</p>
<p>抽象语法树可通过将 <code>ast.PyCF_ONLY_AST</code> 作为旗标传递给 <code>compile()</code> 内置函数来生成，或是使用此模块中提供的 <code>parse()</code> 辅助函数。返回结果将是一个对象树，，其中的类都继承自 <code>ast.AST</code>。抽象语法树可被内置的 <code>compile()</code> 函数编译为一个 Python 代码对象。</p>
<h3 id="抽象文法"><a href="#抽象文法" class="headerlink" title="抽象文法"></a>抽象文法</h3><p>抽象文法目前定义如下</p>
<pre><code>-- ASDL's 4 builtin types are:
-- identifier, int, string, constant
module Python
{
    mod = Module(stmt* body, type_ignore* type_ignores)
        | Interactive(stmt* body)
        | Expression(expr body)
        | FunctionType(expr* argtypes, expr returns)
    stmt = FunctionDef(identifier name, arguments args,
                       stmt* body, expr* decorator_list, expr? returns,
                       string? type_comment)
          | AsyncFunctionDef(identifier name, arguments args,
                             stmt* body, expr* decorator_list, expr? returns,
                             string? type_comment)
          | ClassDef(identifier name,
             expr* bases,
             keyword* keywords,
             stmt* body,
             expr* decorator_list)
          | Return(expr? value)
          | Delete(expr* targets)
          | Assign(expr* targets, expr value, string? type_comment)
          | AugAssign(expr target, operator op, expr value)
          -- 'simple' indicates that we annotate simple name without parens
          | AnnAssign(expr target, expr annotation, expr? value, int simple)
          -- use 'orelse' because else is a keyword in target languages
          | For(expr target, expr iter, stmt* body, stmt* orelse, string? type_comment)
          | AsyncFor(expr target, expr iter, stmt* body, stmt* orelse, string? type_comment)
          | While(expr test, stmt* body, stmt* orelse)
          | If(expr test, stmt* body, stmt* orelse)
          | With(withitem* items, stmt* body, string? type_comment)
          | AsyncWith(withitem* items, stmt* body, string? type_comment)
          | Match(expr subject, match_case* cases)
          | Raise(expr? exc, expr? cause)
          | Try(stmt* body, excepthandler* handlers, stmt* orelse, stmt* finalbody)
          | Assert(expr test, expr? msg)
          | Import(alias* names)
          | ImportFrom(identifier? module, alias* names, int? level)
          | Global(identifier* names)
          | Nonlocal(identifier* names)
          | Expr(expr value)
          | Pass | Break | Continue
          -- col_offset is the byte offset in the utf8 string the parser uses
          attributes (int lineno, int col_offset, int? end_lineno, int? end_col_offset)
          -- BoolOp() can use left &amp; right?
    expr = BoolOp(boolop op, expr* values)
         | NamedExpr(expr target, expr value)
         | BinOp(expr left, operator op, expr right)
         | UnaryOp(unaryop op, expr operand)
         | Lambda(arguments args, expr body)
         | IfExp(expr test, expr body, expr orelse)
         | Dict(expr* keys, expr* values)
         | Set(expr* elts)
         | ListComp(expr elt, comprehension* generators)
         | SetComp(expr elt, comprehension* generators)
         | DictComp(expr key, expr value, comprehension* generators)
         | GeneratorExp(expr elt, comprehension* generators)
         -- the grammar constrains where yield expressions can occur
         | Await(expr value)
         | Yield(expr? value)
         | YieldFrom(expr value)
         -- need sequences for compare to distinguish between
         -- x &lt; 4 &lt; 3 and (x &lt; 4) &lt; 3
         | Compare(expr left, cmpop* ops, expr* comparators)
         | Call(expr func, expr* args, keyword* keywords)
         | FormattedValue(expr value, int? conversion, expr? format_spec)
         | JoinedStr(expr* values)
         | Constant(constant value, string? kind)
         -- the following expression can appear in assignment context
         | Attribute(expr value, identifier attr, expr_context ctx)
         | Subscript(expr value, expr slice, expr_context ctx)
         | Starred(expr value, expr_context ctx)
         | Name(identifier id, expr_context ctx)
         | List(expr* elts, expr_context ctx)
         | Tuple(expr* elts, expr_context ctx)
         -- can appear only in Subscript
         | Slice(expr? lower, expr? upper, expr? step)
          -- col_offset is the byte offset in the utf8 string the parser uses
          attributes (int lineno, int col_offset, int? end_lineno, int? end_col_offset)
    expr_context = Load | Store | Del
    boolop = And | Or
    operator = Add | Sub | Mult | MatMult | Div | Mod | Pow | LShift
                 | RShift | BitOr | BitXor | BitAnd | FloorDiv
    unaryop = Invert | Not | UAdd | USub
    cmpop = Eq | NotEq | Lt | LtE | Gt | GtE | Is | IsNot | In | NotIn
    comprehension = (expr target, expr iter, expr* ifs, int is_async)
    excepthandler = ExceptHandler(expr? type, identifier? name, stmt* body)
                    attributes (int lineno, int col_offset, int? end_lineno, int? end_col_offset)
    arguments = (arg* posonlyargs, arg* args, arg? vararg, arg* kwonlyargs,
                 expr* kw_defaults, arg? kwarg, expr* defaults)
    arg = (identifier arg, expr? annotation, string? type_comment)
           attributes (int lineno, int col_offset, int? end_lineno, int? end_col_offset)
    -- keyword arguments supplied to call (NULL identifier for **kwargs)
    keyword = (identifier? arg, expr value)
               attributes (int lineno, int col_offset, int? end_lineno, int? end_col_offset)
    -- import name with optional 'as' alias.
    alias = (identifier name, identifier? asname)
             attributes (int lineno, int col_offset, int? end_lineno, int? end_col_offset)
    withitem = (expr context_expr, expr? optional_vars)
    match_case = (pattern pattern, expr? guard, stmt* body)
    pattern = MatchValue(expr value)
            | MatchSingleton(constant value)
            | MatchSequence(pattern* patterns)
            | MatchMapping(expr* keys, pattern* patterns, identifier? rest)
            | MatchClass(expr cls, pattern* patterns, identifier* kwd_attrs, pattern* kwd_patterns)
            | MatchStar(identifier? name)
            -- The optional "rest" MatchMapping parameter handles capturing extra mapping keys
            | MatchAs(pattern? pattern, identifier? name)
            | MatchOr(pattern* patterns)
             attributes (int lineno, int col_offset, int end_lineno, int end_col_offset)
    type_ignore = TypeIgnore(int lineno, string tag)
}</code></pre><h3 id="节点类"><a href="#节点类" class="headerlink" title="节点类"></a>节点类</h3><p><em>class</em> <code>ast.AST</code></p>
<p>这是所有 AST 节点类的基类。实际上，这些节点类派生自 <code>Parser/Python.asdl</code> 文件，其中定义的语法树示例 如下。它们在 C 语言模块 <code>_ast</code> 中定义，并被导出至 <code>ast</code> 模块。</p>
<p>抽象语法定义的每个左侧符号(比方说， <code>ast.stmt</code> 或者 <code>ast.expr</code>)定义了一个类。另外，在抽象语法定义的右侧，对每一个构造器也定义了一个类；这些类继承自树左侧的类。比如，<code>ast.BinOp</code> 继承自 <code>ast.expr</code>。对于多分支产生式(也就是”和规则”)，树右侧的类是抽象的；只有特定构造器结点的实例能被构造。</p>
<ul>
<li><p><code>_fields</code></p>
<p>每个具体类都有个属性 <code>_fields</code>, 用来给出所有子节点的名字。</p>
<p>每个具体类的实例对它每个子节点都有一个属性，对应类型如文法中所定义。比如，<code>ast.BinOp</code> 的实例有个属性 <code>left</code>，类型是 <code>ast.expr</code>.</p>
<p>如果这些属性在文法中标记为可选（使用问号），对应值可能会是 <code>None</code>。如果这些属性有零或多个（用星号标记），对应值会用Python的列表来表示。所有可能的属性必须在用 <code>compile()</code> 编译得到AST时给出，且是有效的值。</p>
</li>
<li><p><code>lineno</code></p>
<p><code>col_offset</code></p>
<p><code>end_lineno</code></p>
<p><code>end_col_offset</code></p>
<p>Instances of <code>ast.expr</code> and <code>ast.stmt</code> subclasses have <code>lineno</code>, <code>col_offset</code>, <code>end_lineno</code>, and <code>end_col_offset</code> attributes. The <code>lineno</code> and <code>end_lineno</code> are the first and last line numbers of source text span (1-indexed so the first line is line 1) and the <code>col_offset</code> and <code>end_col_offset</code> are the corresponding UTF-8 byte offsets of the first and last tokens that generated the node. The UTF-8 offset is recorded because the parser uses UTF-8 internally.</p>
<p>Note that the end positions are not required by the compiler and are therefore optional. The end offset is <em>after</em> the last symbol, for example one can get the source segment of a one-line expression node using <code>source_line[node.col_offset : node.end_col_offset]</code>.</p>
</li>
</ul>
<p>一个类的构造器 <code>ast.T</code> 像下面这样parse它的参数。</p>
<ul>
<li>如果有位置参数，它们必须和 <code>T._fields</code> 中的元素一样多；他们会像这些名字的属性一样被赋值。</li>
<li>如果有关键字参数，它们必须被设为和给定值同名的属性。</li>
</ul>
<p>比方说，要创建和填充节点 <code>ast.UnaryOp</code>，你得用</p>
<pre class="line-numbers language-python"><code class="language-python">node <span class="token operator">=</span> ast<span class="token punctuation">.</span>UnaryOp<span class="token punctuation">(</span><span class="token punctuation">)</span>
node<span class="token punctuation">.</span>op <span class="token operator">=</span> ast<span class="token punctuation">.</span>USub<span class="token punctuation">(</span><span class="token punctuation">)</span>
node<span class="token punctuation">.</span>operand <span class="token operator">=</span> ast<span class="token punctuation">.</span>Constant<span class="token punctuation">(</span><span class="token punctuation">)</span>
node<span class="token punctuation">.</span>operand<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">5</span>
node<span class="token punctuation">.</span>operand<span class="token punctuation">.</span>lineno <span class="token operator">=</span> <span class="token number">0</span>
node<span class="token punctuation">.</span>operand<span class="token punctuation">.</span>col_offset <span class="token operator">=</span> <span class="token number">0</span>
node<span class="token punctuation">.</span>lineno <span class="token operator">=</span> <span class="token number">0</span>
node<span class="token punctuation">.</span>col_offset <span class="token operator">=</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>或者更紧凑点</p>
<pre class="line-numbers language-python"><code class="language-python">node <span class="token operator">=</span> ast<span class="token punctuation">.</span>UnaryOp<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>USub<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ast<span class="token punctuation">.</span>Constant<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> lineno<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> col_offset<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   lineno<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> col_offset<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>在 3.8 版更改: Class <code>ast.Constant</code> is now used for all constants.</p>
<p>在 3.9 版更改: Simple indices are represented by their value, extended slices are represented as tuples.</p>
<p>3.8 版后已移除: Old classes <code>ast.Num</code>, <code>ast.Str</code>, <code>ast.Bytes</code>, <code>ast.NameConstant</code> and <code>ast.Ellipsis</code> are still available, but they will be removed in future Python releases. In the meantime, instantiating them will return an instance of a different class.</p>
<p>3.9 版后已移除: Old classes <code>ast.Index</code> and <code>ast.ExtSlice</code> are still available, but they will be removed in future Python releases. In the meantime, instantiating them will return an instance of a different class.</p>
<p>注解</p>
<p>The descriptions of the specific node classes displayed here were initially adapted from the fantastic Green Tree Snakes project and all its contributors.</p>
<h4 id="字面值"><a href="#字面值" class="headerlink" title="字面值"></a>字面值</h4><p><em>class</em> <code>ast.Constant</code>(<em>value</em>)</p>
<p>A constant value. The <code>value</code> attribute of the <code>Constant</code> literal contains the Python object it represents. The values represented can be simple types such as a number, string or <code>None</code>, but also immutable container types (tuples and frozensets) if all of their elements are constant.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.FormattedValue</code>(<em>value</em>, <em>conversion</em>, <em>format_spec</em>)</p>
<p>Node representing a single formatting field in an f-string. If the string contains a single formatting field and nothing else the node can be isolated otherwise it appears in <code>JoinedStr</code>.</p>
<ul>
<li><code>value</code> is any expression node (such as a literal, a variable, or a function call).</li>
<li><code>conversion</code> is an integer:<ul>
<li>-1: no formatting</li>
<li>115: <code>!s</code> string formatting</li>
<li>114: <code>!r</code> repr formatting</li>
<li>97: <code>!a</code> ascii formatting</li>
</ul>
</li>
<li><code>format_spec</code> is a <code>JoinedStr</code> node representing the formatting of the value, or <code>None</code> if no format was specified. Both <code>conversion</code> and <code>format_spec</code> can be set at the same time.</li>
</ul>
<p><em>class</em> <code>ast.JoinedStr</code>(<em>values</em>)</p>
<p>An f-string, comprising a series of <code>FormattedValue</code> and <code>Constant</code> nodes.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'f"sin({a}) is {sin(a):.3}"'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>JoinedStr<span class="token punctuation">(</span>
        values<span class="token operator">=</span><span class="token punctuation">[</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">'sin('</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            FormattedValue<span class="token punctuation">(</span>
                value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                conversion<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">') is '</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            FormattedValue<span class="token punctuation">(</span>
                value<span class="token operator">=</span>Call<span class="token punctuation">(</span>
                    func<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'sin'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    args<span class="token operator">=</span><span class="token punctuation">[</span>
                        Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    keywords<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                conversion<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
                format_spec<span class="token operator">=</span>JoinedStr<span class="token punctuation">(</span>
                    values<span class="token operator">=</span><span class="token punctuation">[</span>
                        Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">'.3'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.List</code>(<em>elts</em>, <em>ctx</em>)</p>
<p><em>class</em> <code>ast.Tuple</code>(<em>elts</em>, <em>ctx</em>)</p>
<p>A list or tuple. <code>elts</code> holds a list of nodes representing the elements. <code>ctx</code> is <code>Store</code> if the container is an assignment target (i.e. <code>(x,y)=something</code>), and <code>Load</code> otherwise.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'[1, 2, 3]'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>List<span class="token punctuation">(</span>
        elts<span class="token operator">=</span><span class="token punctuation">[</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'(1, 2, 3)'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>Tuple<span class="token punctuation">(</span>
        elts<span class="token operator">=</span><span class="token punctuation">[</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Set</code>(<em>elts</em>)</p>
<p>A set. <code>elts</code> holds a list of nodes representing the set’s elements.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'{1, 2, 3}'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>Set<span class="token punctuation">(</span>
        elts<span class="token operator">=</span><span class="token punctuation">[</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Dict</code>(<em>keys</em>, <em>values</em>)</p>
<p>A dictionary. <code>keys</code> and <code>values</code> hold lists of nodes representing the keys and the values respectively, in matching order (what would be returned when calling <code>dictionary.keys()</code> and <code>dictionary.values()</code>).</p>
<p>When doing dictionary unpacking using dictionary literals the expression to be expanded goes in the <code>values</code> list, with a <code>None</code> at the corresponding position in <code>keys</code>.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'{"a":1, **d}'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>Dict<span class="token punctuation">(</span>
        keys<span class="token operator">=</span><span class="token punctuation">[</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            None<span class="token punctuation">]</span><span class="token punctuation">,</span>
        values<span class="token operator">=</span><span class="token punctuation">[</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'d'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h4><p><em>class</em> <code>ast.Name</code>(<em>id</em>, <em>ctx</em>)</p>
<p>A variable name. <code>id</code> holds the name as a string, and <code>ctx</code> is one of the following types.</p>
<p><em>class</em> <code>ast.Load</code></p>
<p><em>class</em> <code>ast.Store</code></p>
<p><em>class</em> <code>ast.Del</code></p>
<p>Variable references can be used to load the value of a variable, to assign a new value to it, or to delete it. Variable references are given a context to distinguish these cases.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Expr<span class="token punctuation">(</span>
            value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'a = 1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Assign<span class="token punctuation">(</span>
            targets<span class="token operator">=</span><span class="token punctuation">[</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'del a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Delete<span class="token punctuation">(</span>
            targets<span class="token operator">=</span><span class="token punctuation">[</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Del<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Starred</code>(<em>value</em>, <em>ctx</em>)</p>
<p>A <code>*var</code> variable reference. <code>value</code> holds the variable, typically a <code>Name</code> node. This type must be used when building a <code>Call</code> node with <code>*args</code>.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'a, *b = it'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Assign<span class="token punctuation">(</span>
            targets<span class="token operator">=</span><span class="token punctuation">[</span>
                Tuple<span class="token punctuation">(</span>
                    elts<span class="token operator">=</span><span class="token punctuation">[</span>
                        Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        Starred<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'it'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h4><p><em>class</em> <code>ast.Expr</code>(<em>value</em>)</p>
<p>When an expression, such as a function call, appears as a statement by itself with its return value not used or stored, it is wrapped in this container. <code>value</code> holds one of the other nodes in this section, a <code>Constant</code>, a <code>Name</code>, a <code>Lambda</code>, a <code>Yield</code> or <code>YieldFrom</code> node.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'-a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Expr<span class="token punctuation">(</span>
            value<span class="token operator">=</span>UnaryOp<span class="token punctuation">(</span>
                op<span class="token operator">=</span>USub<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                operand<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.UnaryOp</code>(<em>op</em>, <em>operand</em>)</p>
<p>A unary operation. <code>op</code> is the operator, and <code>operand</code> any expression node.</p>
<p><em>class</em> <code>ast.UAdd</code></p>
<p><em>class</em> <code>ast.USub</code></p>
<p><em>class</em> <code>ast.Not</code></p>
<p><em>class</em> <code>ast.Invert</code></p>
<p>Unary operator tokens. <code>Not</code> is the <code>not</code> keyword, <code>Invert</code> is the <code>~</code> operator.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'not x'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>UnaryOp<span class="token punctuation">(</span>
        op<span class="token operator">=</span>Not<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        operand<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.BinOp</code>(<em>left</em>, <em>op</em>, <em>right</em>)</p>
<p>A binary operation (like addition or division). <code>op</code> is the operator, and <code>left</code> and <code>right</code> are any expression nodes.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'x + y'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>BinOp<span class="token punctuation">(</span>
        left<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        op<span class="token operator">=</span>Add<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        right<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Add</code></p>
<p><em>class</em> <code>ast.Sub</code></p>
<p><em>class</em> <code>ast.Mult</code></p>
<p><em>class</em> <code>ast.Div</code></p>
<p><em>class</em> <code>ast.FloorDiv</code></p>
<p><em>class</em> <code>ast.Mod</code></p>
<p><em>class</em> <code>ast.Pow</code></p>
<p><em>class</em> <code>ast.LShift</code></p>
<p><em>class</em> <code>ast.RShift</code></p>
<p><em>class</em> <code>ast.BitOr</code></p>
<p><em>class</em> <code>ast.BitXor</code></p>
<p><em>class</em> <code>ast.BitAnd</code></p>
<p><em>class</em> <code>ast.MatMult</code></p>
<p>Binary operator tokens.</p>
<p><em>class</em> <code>ast.BoolOp</code>(<em>op</em>, <em>values</em>)</p>
<p>A boolean operation, ‘or’ or ‘and’. <code>op</code> is <code>Or</code> or <code>And</code>. <code>values</code> are the values involved. Consecutive operations with the same operator, such as <code>a or b or c</code>, are collapsed into one node with several values.</p>
<p>This doesn’t include <code>not</code>, which is a <code>UnaryOp</code>.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'x or y'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>BoolOp<span class="token punctuation">(</span>
        op<span class="token operator">=</span>Or<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        values<span class="token operator">=</span><span class="token punctuation">[</span>
            Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.And</code></p>
<p><em>class</em> <code>ast.Or</code></p>
<p>Boolean operator tokens.</p>
<p><em>class</em> <code>ast.Compare</code>(<em>left</em>, <em>ops</em>, <em>comparators</em>)</p>
<p>A comparison of two or more values. <code>left</code> is the first value in the comparison, <code>ops</code> the list of operators, and <code>comparators</code> the list of values after the first element in the comparison.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'1 &lt;= a &lt; 10'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>Compare<span class="token punctuation">(</span>
        left<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        ops<span class="token operator">=</span><span class="token punctuation">[</span>
            LtE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Lt<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        comparators<span class="token operator">=</span><span class="token punctuation">[</span>
            Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Eq</code></p>
<p><em>class</em> <code>ast.NotEq</code></p>
<p><em>class</em> <code>ast.Lt</code></p>
<p><em>class</em> <code>ast.LtE</code></p>
<p><em>class</em> <code>ast.Gt</code></p>
<p><em>class</em> <code>ast.GtE</code></p>
<p><em>class</em> <code>ast.Is</code></p>
<p><em>class</em> <code>ast.IsNot</code></p>
<p><em>class</em> <code>ast.In</code></p>
<p><em>class</em> <code>ast.NotIn</code></p>
<p>Comparison operator tokens.</p>
<p><em>class</em> <code>ast.Call</code>(<em>func</em>, <em>args</em>, <em>keywords</em>, <em>starargs</em>, <em>kwargs</em>)</p>
<p>A function call. <code>func</code> is the function, which will often be a <code>Name</code> or <code>Attribute</code> object. Of the arguments:</p>
<ul>
<li><code>args</code> holds a list of the arguments passed by position.</li>
<li><code>keywords</code> holds a list of <code>keyword</code> objects representing arguments passed by keyword.</li>
</ul>
<p>When creating a <code>Call</code> node, <code>args</code> and <code>keywords</code> are required, but they can be empty lists. <code>starargs</code> and <code>kwargs</code> are optional.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'func(a, b=c, *d, **e)'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>Call<span class="token punctuation">(</span>
        func<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'func'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        args<span class="token operator">=</span><span class="token punctuation">[</span>
            Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Starred<span class="token punctuation">(</span>
                value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'d'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        keywords<span class="token operator">=</span><span class="token punctuation">[</span>
            keyword<span class="token punctuation">(</span>
                arg<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span>
                value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'c'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            keyword<span class="token punctuation">(</span>
                value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'e'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.keyword</code>(<em>arg</em>, <em>value</em>)</p>
<p>A keyword argument to a function call or class definition. <code>arg</code> is a raw string of the parameter name, <code>value</code> is a node to pass in.</p>
<p><em>class</em> <code>ast.IfExp</code>(<em>test</em>, <em>body</em>, <em>orelse</em>)</p>
<p>An expression such as <code>a if b else c</code>. Each field holds a single node, so in the following example, all three are <code>Name</code> nodes.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'a if b else c'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>IfExp<span class="token punctuation">(</span>
        test<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        body<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        orelse<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'c'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Attribute</code>(<em>value</em>, <em>attr</em>, <em>ctx</em>)</p>
<p>Attribute access, e.g. <code>d.keys</code>. <code>value</code> is a node, typically a <code>Name</code>. <code>attr</code> is a bare string giving the name of the attribute, and <code>ctx</code> is <code>Load</code>, <code>Store</code> or <code>Del</code> according to how the attribute is acted on.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'snake.colour'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>Attribute<span class="token punctuation">(</span>
        value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'snake'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        attr<span class="token operator">=</span><span class="token string">'colour'</span><span class="token punctuation">,</span>
        ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.NamedExpr</code>(<em>target</em>, <em>value</em>)</p>
<blockquote>
<p>A named expression. This AST node is produced by the assignment expressions operator (also known as the walrus operator). As opposed to the <code>Assign</code> node in which the first argument can be multiple nodes, in this case both <code>target</code> and <code>value</code> must be single nodes.</p>
</blockquote>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'(x := 4)'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>NamedExpr<span class="token punctuation">(</span>
        target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="Subscripting"><a href="#Subscripting" class="headerlink" title="Subscripting"></a>Subscripting</h5><p><em>class</em> <code>ast.Subscript</code>(<em>value</em>, <em>slice</em>, <em>ctx</em>)</p>
<p>A subscript, such as <code>l[1]</code>. <code>value</code> is the subscripted object (usually sequence or mapping). <code>slice</code> is an index, slice or key. It can be a <code>Tuple</code> and contain a <code>Slice</code>. <code>ctx</code> is <code>Load</code>, <code>Store</code> or <code>Del</code> according to the action performed with the subscript.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'l[1:2, 3]'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>Subscript<span class="token punctuation">(</span>
        value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'l'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        slice<span class="token operator">=</span>Tuple<span class="token punctuation">(</span>
            elts<span class="token operator">=</span><span class="token punctuation">[</span>
                Slice<span class="token punctuation">(</span>
                    lower<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    upper<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Slice</code>(<em>lower</em>, <em>upper</em>, <em>step</em>)</p>
<p>Regular slicing (on the form <code>lower:upper</code> or <code>lower:upper:step</code>). Can occur only inside the <em>slice</em> field of <code>Subscript</code>, either directly or as an element of <code>Tuple</code>.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'l[1:2]'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>Subscript<span class="token punctuation">(</span>
        value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'l'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        slice<span class="token operator">=</span>Slice<span class="token punctuation">(</span>
            lower<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            upper<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="Comprehensions"><a href="#Comprehensions" class="headerlink" title="Comprehensions"></a>Comprehensions</h5><p><em>class</em> <code>ast.ListComp</code>(<em>elt</em>, <em>generators</em>)</p>
<p><em>class</em> <code>ast.SetComp</code>(<em>elt</em>, <em>generators</em>)</p>
<p><em>class</em> <code>ast.GeneratorExp</code>(<em>elt</em>, <em>generators</em>)</p>
<p><em>class</em> <code>ast.DictComp</code>(<em>key</em>, <em>value</em>, <em>generators</em>)</p>
<p>List and set comprehensions, generator expressions, and dictionary comprehensions. <code>elt</code> (or <code>key</code> and <code>value</code>) is a single node representing the part that will be evaluated for each item.</p>
<p><code>generators</code> is a list of <code>comprehension</code> nodes.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'[x for x in numbers]'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>ListComp<span class="token punctuation">(</span>
        elt<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        generators<span class="token operator">=</span><span class="token punctuation">[</span>
            comprehension<span class="token punctuation">(</span>
                target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                iter<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'numbers'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ifs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                is_async<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'{x: x**2 for x in numbers}'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>DictComp<span class="token punctuation">(</span>
        key<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        value<span class="token operator">=</span>BinOp<span class="token punctuation">(</span>
            left<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            op<span class="token operator">=</span>Pow<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            right<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        generators<span class="token operator">=</span><span class="token punctuation">[</span>
            comprehension<span class="token punctuation">(</span>
                target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                iter<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'numbers'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ifs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                is_async<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'{x for x in numbers}'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>SetComp<span class="token punctuation">(</span>
        elt<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        generators<span class="token operator">=</span><span class="token punctuation">[</span>
            comprehension<span class="token punctuation">(</span>
                target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                iter<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'numbers'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ifs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                is_async<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.comprehension</code>(<em>target</em>, <em>iter</em>, <em>ifs</em>, <em>is_async</em>)</p>
<p>One <code>for</code> clause in a comprehension. <code>target</code> is the reference to use for each element - typically a <code>Name</code> or <code>Tuple</code> node. <code>iter</code> is the object to iterate over. <code>ifs</code> is a list of test expressions: each <code>for</code> clause can have multiple <code>ifs</code>.</p>
<p><code>is_async</code> indicates a comprehension is asynchronous (using an <code>async for</code> instead of <code>for</code>). The value is an integer (0 or 1).</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'[ord(c) for line in file for c in line]'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># Multiple comprehensions in one.</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>ListComp<span class="token punctuation">(</span>
        elt<span class="token operator">=</span>Call<span class="token punctuation">(</span>
            func<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'ord'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            args<span class="token operator">=</span><span class="token punctuation">[</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'c'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            keywords<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        generators<span class="token operator">=</span><span class="token punctuation">[</span>
            comprehension<span class="token punctuation">(</span>
                target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'line'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                iter<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'file'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ifs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                is_async<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            comprehension<span class="token punctuation">(</span>
                target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'c'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                iter<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'line'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ifs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                is_async<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'(n**2 for n in it if n>5 if n&lt;10)'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># generator comprehension</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>GeneratorExp<span class="token punctuation">(</span>
        elt<span class="token operator">=</span>BinOp<span class="token punctuation">(</span>
            left<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'n'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            op<span class="token operator">=</span>Pow<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            right<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        generators<span class="token operator">=</span><span class="token punctuation">[</span>
            comprehension<span class="token punctuation">(</span>
                target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'n'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                iter<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'it'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ifs<span class="token operator">=</span><span class="token punctuation">[</span>
                    Compare<span class="token punctuation">(</span>
                        left<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'n'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        ops<span class="token operator">=</span><span class="token punctuation">[</span>
                            Gt<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        comparators<span class="token operator">=</span><span class="token punctuation">[</span>
                            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    Compare<span class="token punctuation">(</span>
                        left<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'n'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        ops<span class="token operator">=</span><span class="token punctuation">[</span>
                            Lt<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        comparators<span class="token operator">=</span><span class="token punctuation">[</span>
                            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                is_async<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'[i async for i in soc]'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># Async comprehension</span>
Expression<span class="token punctuation">(</span>
    body<span class="token operator">=</span>ListComp<span class="token punctuation">(</span>
        elt<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'i'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        generators<span class="token operator">=</span><span class="token punctuation">[</span>
            comprehension<span class="token punctuation">(</span>
                target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'i'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                iter<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'soc'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ifs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                is_async<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Statements"><a href="#Statements" class="headerlink" title="Statements"></a>Statements</h4><p><em>class</em> <code>ast.Assign</code>(<em>targets</em>, <em>value</em>, <em>type_comment</em>)</p>
<p>An assignment. <code>targets</code> is a list of nodes, and <code>value</code> is a single node.</p>
<p>Multiple nodes in <code>targets</code> represents assigning the same value to each. Unpacking is represented by putting a <code>Tuple</code> or <code>List</code> within <code>targets</code>.</p>
<ul>
<li><p><code>type_comment</code></p>
<p><code>type_comment</code> is an optional string with the type annotation as a comment.</p>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'a = b = 1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># Multiple assignment</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Assign<span class="token punctuation">(</span>
            targets<span class="token operator">=</span><span class="token punctuation">[</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'a,b = c'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># Unpacking</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Assign<span class="token punctuation">(</span>
            targets<span class="token operator">=</span><span class="token punctuation">[</span>
                Tuple<span class="token punctuation">(</span>
                    elts<span class="token operator">=</span><span class="token punctuation">[</span>
                        Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'c'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.AnnAssign</code>(<em>target</em>, <em>annotation</em>, <em>value</em>, <em>simple</em>)</p>
<p>An assignment with a type annotation. <code>target</code> is a single node and can be a <code>Name</code>, a <code>Attribute</code> or a <code>Subscript</code>. <code>annotation</code> is the annotation, such as a <code>Constant</code> or <code>Name</code> node. <code>value</code> is a single optional node. <code>simple</code> is a boolean integer set to True for a <code>Name</code> node in <code>target</code> that do not appear in between parenthesis and are hence pure names and not expressions.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'c: int'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        AnnAssign<span class="token punctuation">(</span>
            target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'c'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            annotation<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'int'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            simple<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'(a): int = 1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># Annotation with parenthesis</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        AnnAssign<span class="token punctuation">(</span>
            target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            annotation<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'int'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            simple<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'a.b: int'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># Attribute annotation</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        AnnAssign<span class="token punctuation">(</span>
            target<span class="token operator">=</span>Attribute<span class="token punctuation">(</span>
                value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                attr<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span>
                ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            annotation<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'int'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            simple<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'a[1]: int'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># Subscript annotation</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        AnnAssign<span class="token punctuation">(</span>
            target<span class="token operator">=</span>Subscript<span class="token punctuation">(</span>
                value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                slice<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            annotation<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'int'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            simple<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.AugAssign</code>(<em>target</em>, <em>op</em>, <em>value</em>)</p>
<p>Augmented assignment, such as <code>a += 1</code>. In the following example, <code>target</code> is a <code>Name</code> node for <code>x</code> (with the <code>Store</code> context), <code>op</code> is <code>Add</code>, and <code>value</code> is a <code>Constant</code> with value for 1.</p>
<p>The <code>target</code> attribute cannot be of class <code>Tuple</code> or <code>List</code>, unlike the targets of <code>Assign</code>.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'x += 2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        AugAssign<span class="token punctuation">(</span>
            target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            op<span class="token operator">=</span>Add<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Raise</code>(<em>exc</em>, <em>cause</em>)</p>
<p>A <code>raise</code> statement. <code>exc</code> is the exception object to be raised, normally a <code>Call</code> or <code>Name</code>, or <code>None</code> for a standalone <code>raise</code>. <code>cause</code> is the optional part for <code>y</code> in <code>raise x from y</code>.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'raise x from y'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Raise<span class="token punctuation">(</span>
            exc<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cause<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Assert</code>(<em>test</em>, <em>msg</em>)</p>
<p>An assertion. <code>test</code> holds the condition, such as a <code>Compare</code> node. <code>msg</code> holds the failure message.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'assert x,y'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Assert<span class="token punctuation">(</span>
            test<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            msg<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Delete</code>(<em>targets</em>)</p>
<p>Represents a <code>del</code> statement. <code>targets</code> is a list of nodes, such as <code>Name</code>, <code>Attribute</code> or <code>Subscript</code> nodes.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'del x,y,z'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Delete<span class="token punctuation">(</span>
            targets<span class="token operator">=</span><span class="token punctuation">[</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Del<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Del<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'z'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Del<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Pass</code></p>
<p>A <code>pass</code> statement.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'pass'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Pass<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Other statements which are only applicable inside functions or loops are described in other sections.</p>
<h5 id="Imports"><a href="#Imports" class="headerlink" title="Imports"></a>Imports</h5><p><em>class</em> <code>ast.Import</code>(<em>names</em>)</p>
<p>An import statement. <code>names</code> is a list of <code>alias</code> nodes.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'import x,y,z'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Import<span class="token punctuation">(</span>
            names<span class="token operator">=</span><span class="token punctuation">[</span>
                alias<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                alias<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                alias<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'z'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.ImportFrom</code>(<em>module</em>, <em>names</em>, <em>level</em>)</p>
<p>Represents <code>from x import y</code>. <code>module</code> is a raw string of the ‘from’ name, without any leading dots, or <code>None</code> for statements such as <code>from . import foo</code>. <code>level</code> is an integer holding the level of the relative import (0 means absolute import).</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'from y import x,y,z'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        ImportFrom<span class="token punctuation">(</span>
            module<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span>
            names<span class="token operator">=</span><span class="token punctuation">[</span>
                alias<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                alias<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                alias<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'z'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            level<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.alias</code>(<em>name</em>, <em>asname</em>)</p>
<p>Both parameters are raw strings of the names. <code>asname</code> can be <code>None</code> if the regular name is to be used.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'from ..foo.bar import a as b, c'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        ImportFrom<span class="token punctuation">(</span>
            module<span class="token operator">=</span><span class="token string">'foo.bar'</span><span class="token punctuation">,</span>
            names<span class="token operator">=</span><span class="token punctuation">[</span>
                alias<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> asname<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                alias<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            level<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Control-flow"><a href="#Control-flow" class="headerlink" title="Control flow"></a>Control flow</h4><p>注解</p>
<p>Optional clauses such as <code>else</code> are stored as an empty list if they’re not present.</p>
<p><em>class</em> <code>ast.If</code>(<em>test</em>, <em>body</em>, <em>orelse</em>)</p>
<p>An <code>if</code> statement. <code>test</code> holds a single node, such as a <code>Compare</code> node. <code>body</code> and <code>orelse</code> each hold a list of nodes.</p>
<p><code>elif</code> clauses don’t have a special representation in the AST, but rather appear as extra <code>If</code> nodes within the <code>orelse</code> section of the previous one.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... if x:
...    ...
... elif y:
...    ...
... else:
...    ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        If<span class="token punctuation">(</span>
            test<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            orelse<span class="token operator">=</span><span class="token punctuation">[</span>
                If<span class="token punctuation">(</span>
                    test<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    orelse<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.For</code>(<em>target</em>, <em>iter</em>, <em>body</em>, <em>orelse</em>, <em>type_comment</em>)</p>
<p>A <code>for</code> loop. <code>target</code> holds the variable(s) the loop assigns to, as a single <code>Name</code>, <code>Tuple</code> or <code>List</code> node. <code>iter</code> holds the item to be looped over, again as a single node. <code>body</code> and <code>orelse</code> contain lists of nodes to execute. Those in <code>orelse</code> are executed if the loop finishes normally, rather than via a <code>break</code> statement.</p>
<ul>
<li><p><code>type_comment</code></p>
<p><code>type_comment</code> is an optional string with the type annotation as a comment.</p>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... for x in y:
...     ...
... else:
...     ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        For<span class="token punctuation">(</span>
            target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            iter<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            orelse<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.While</code>(<em>test</em>, <em>body</em>, <em>orelse</em>)</p>
<p>A <code>while</code> loop. <code>test</code> holds the condition, such as a <code>Compare</code> node.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... while x:
...    ...
... else:
...    ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        While<span class="token punctuation">(</span>
            test<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            orelse<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Break</code></p>
<p><em>class</em> <code>ast.Continue</code></p>
<p>The <code>break</code> and <code>continue</code> statements.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""\
... for a in b:
...     if a > 5:
...         break
...     else:
...         continue
...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        For<span class="token punctuation">(</span>
            target<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            iter<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                If<span class="token punctuation">(</span>
                    test<span class="token operator">=</span>Compare<span class="token punctuation">(</span>
                        left<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        ops<span class="token operator">=</span><span class="token punctuation">[</span>
                            Gt<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        comparators<span class="token operator">=</span><span class="token punctuation">[</span>
                            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Break<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    orelse<span class="token operator">=</span><span class="token punctuation">[</span>
                        Continue<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            orelse<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Try</code>(<em>body</em>, <em>handlers</em>, <em>orelse</em>, <em>finalbody</em>)</p>
<p><code>try</code> blocks. All attributes are list of nodes to execute, except for <code>handlers</code>, which is a list of <code>ExceptHandler</code> nodes.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... try:
...    ...
... except Exception:
...    ...
... except OtherException as e:
...    ...
... else:
...    ...
... finally:
...    ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Try<span class="token punctuation">(</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            handlers<span class="token operator">=</span><span class="token punctuation">[</span>
                ExceptHandler<span class="token punctuation">(</span>
                    type<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'Exception'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                ExceptHandler<span class="token punctuation">(</span>
                    type<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'OtherException'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    name<span class="token operator">=</span><span class="token string">'e'</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            orelse<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            finalbody<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.ExceptHandler</code>(<em>type</em>, <em>name</em>, <em>body</em>)</p>
<p>A single <code>except</code> clause. <code>type</code> is the exception type it will match, typically a <code>Name</code> node (or <code>None</code> for a catch-all <code>except:</code> clause). <code>name</code> is a raw string for the name to hold the exception, or <code>None</code> if the clause doesn’t have <code>as foo</code>. <code>body</code> is a list of nodes.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""\
... try:
...     a + 1
... except TypeError:
...     pass
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Try<span class="token punctuation">(</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>BinOp<span class="token punctuation">(</span>
                        left<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        op<span class="token operator">=</span>Add<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        right<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            handlers<span class="token operator">=</span><span class="token punctuation">[</span>
                ExceptHandler<span class="token punctuation">(</span>
                    type<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'TypeError'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Pass<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            orelse<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            finalbody<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.With</code>(<em>items</em>, <em>body</em>, <em>type_comment</em>)</p>
<p>A <code>with</code> block. <code>items</code> is a list of <code>withitem</code> nodes representing the context managers, and <code>body</code> is the indented block inside the context.</p>
<ul>
<li><p><code>type_comment</code></p>
<p><code>type_comment</code> is an optional string with the type annotation as a comment.</p>
</li>
</ul>
<p><em>class</em> <code>ast.withitem</code>(<em>context_expr</em>, <em>optional_vars</em>)</p>
<p>A single context manager in a <code>with</code> block. <code>context_expr</code> is the context manager, often a <code>Call</code> node. <code>optional_vars</code> is a <code>Name</code>, <code>Tuple</code> or <code>List</code> for the <code>as foo</code> part, or <code>None</code> if that isn’t used.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""\
... with a as b, c as d:
...    something(b, d)
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        With<span class="token punctuation">(</span>
            items<span class="token operator">=</span><span class="token punctuation">[</span>
                withitem<span class="token punctuation">(</span>
                    context_expr<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    optional_vars<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                withitem<span class="token punctuation">(</span>
                    context_expr<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'c'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    optional_vars<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'d'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Store<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Call<span class="token punctuation">(</span>
                        func<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'something'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        args<span class="token operator">=</span><span class="token punctuation">[</span>
                            Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'d'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        keywords<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Pattern-matching"><a href="#Pattern-matching" class="headerlink" title="Pattern matching"></a>Pattern matching</h4><p><em>class</em> <code>ast.Match</code>(<em>subject</em>, <em>cases</em>)</p>
<p>A <code>match</code> statement. <code>subject</code> holds the subject of the match (the object that is being matched against the cases) and <code>cases</code> contains an iterable of <code>match_case</code> nodes with the different cases.</p>
<p><em>class</em> <code>ast.match_case</code>(<em>pattern</em>, <em>guard</em>, <em>body</em>)</p>
<p>A single case pattern in a <code>match</code> statement. <code>pattern</code> contains the match pattern that the subject will be matched against. Note that the <code>AST</code> nodes produced for patterns differ from those produced for expressions, even when they share the same syntax.</p>
<p>The <code>guard</code> attribute contains an expression that will be evaluated if the pattern matches the subject.</p>
<p><code>body</code> contains a list of nodes to execute if the pattern matches and the result of evaluating the guard expression is true.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... match x:
...     case [x] if x>0:
...         ...
...     case tuple():
...         ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Match<span class="token punctuation">(</span>
            subject<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cases<span class="token operator">=</span><span class="token punctuation">[</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchSequence<span class="token punctuation">(</span>
                        patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                            MatchAs<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    guard<span class="token operator">=</span>Compare<span class="token punctuation">(</span>
                        left<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        ops<span class="token operator">=</span><span class="token punctuation">[</span>
                            Gt<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        comparators<span class="token operator">=</span><span class="token punctuation">[</span>
                            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchClass<span class="token punctuation">(</span>
                        cls<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'tuple'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        patterns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        kwd_attrs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        kwd_patterns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.MatchValue</code>(<em>value</em>)</p>
<p>A match literal or value pattern that compares by equality. <code>value</code> is an expression node. Permitted value nodes are restricted as described in the match statement documentation. This pattern succeeds if the match subject is equal to the evaluated value.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... match x:
...     case "Relevant":
...         ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Match<span class="token punctuation">(</span>
            subject<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cases<span class="token operator">=</span><span class="token punctuation">[</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchValue<span class="token punctuation">(</span>
                        value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">'Relevant'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.MatchSingleton</code>(<em>value</em>)</p>
<p>A match literal pattern that compares by identity. <code>value</code> is the singleton to be compared against: <code>None</code>, <code>True</code>, or <code>False</code>. This pattern succeeds if the match subject is the given constant.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... match x:
...     case None:
...         ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Match<span class="token punctuation">(</span>
            subject<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cases<span class="token operator">=</span><span class="token punctuation">[</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchSingleton<span class="token punctuation">(</span>value<span class="token operator">=</span>None<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.MatchSequence</code>(<em>patterns</em>)</p>
<p>A match sequence pattern. <code>patterns</code> contains the patterns to be matched against the subject elements if the subject is a sequence. Matches a variable length sequence if one of the subpatterns is a <code>MatchStar</code> node, otherwise matches a fixed length sequence.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... match x:
...     case [1, 2]:
...         ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Match<span class="token punctuation">(</span>
            subject<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cases<span class="token operator">=</span><span class="token punctuation">[</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchSequence<span class="token punctuation">(</span>
                        patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                            MatchValue<span class="token punctuation">(</span>
                                value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            MatchValue<span class="token punctuation">(</span>
                                value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.MatchStar</code>(<em>name</em>)</p>
<p>Matches the rest of the sequence in a variable length match sequence pattern. If <code>name</code> is not <code>None</code>, a list containing the remaining sequence elements is bound to that name if the overall sequence pattern is successful.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... match x:
...     case [1, 2, *rest]:
...         ...
...     case [*_]:
...         ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Match<span class="token punctuation">(</span>
            subject<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cases<span class="token operator">=</span><span class="token punctuation">[</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchSequence<span class="token punctuation">(</span>
                        patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                            MatchValue<span class="token punctuation">(</span>
                                value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            MatchValue<span class="token punctuation">(</span>
                                value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            MatchStar<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'rest'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchSequence<span class="token punctuation">(</span>
                        patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                            MatchStar<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.MatchMapping</code>(<em>keys</em>, <em>patterns</em>, <em>rest</em>)</p>
<p>A match mapping pattern. <code>keys</code> is a sequence of expression nodes. <code>patterns</code> is a corresponding sequence of pattern nodes. <code>rest</code> is an optional name that can be specified to capture the remaining mapping elements. Permitted key expressions are restricted as described in the match statement documentation.</p>
<p>This pattern succeeds if the subject is a mapping, all evaluated key expressions are present in the mapping, and the value corresponding to each key matches the corresponding subpattern. If <code>rest</code> is not <code>None</code>, a dict containing the remaining mapping elements is bound to that name if the overall mapping pattern is successful.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... match x:
...     case {1: _, 2: _}:
...         ...
...     case {**rest}:
...         ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Match<span class="token punctuation">(</span>
            subject<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cases<span class="token operator">=</span><span class="token punctuation">[</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchMapping<span class="token punctuation">(</span>
                        keys<span class="token operator">=</span><span class="token punctuation">[</span>
                            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                            MatchAs<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            MatchAs<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchMapping<span class="token punctuation">(</span>keys<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> patterns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rest<span class="token operator">=</span><span class="token string">'rest'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.MatchClass</code>(<em>cls</em>, <em>patterns</em>, <em>kwd_attrs</em>, <em>kwd_patterns</em>)</p>
<p>A match class pattern. <code>cls</code> is an expression giving the nominal class to be matched. <code>patterns</code> is a sequence of pattern nodes to be matched against the class defined sequence of pattern matching attributes. <code>kwd_attrs</code> is a sequence of additional attributes to be matched (specified as keyword arguments in the class pattern), <code>kwd_patterns</code> are the corresponding patterns (specified as keyword values in the class pattern).</p>
<p>This pattern succeeds if the subject is an instance of the nominated class, all positional patterns match the corresponding class-defined attributes, and any specified keyword attributes match their corresponding pattern.</p>
<p>Note: classes may define a property that returns self in order to match a pattern node against the instance being matched. Several builtin types are also matched that way, as described in the match statement documentation.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... match x:
...     case Point2D(0, 0):
...         ...
...     case Point3D(x=0, y=0, z=0):
...         ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Match<span class="token punctuation">(</span>
            subject<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cases<span class="token operator">=</span><span class="token punctuation">[</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchClass<span class="token punctuation">(</span>
                        cls<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'Point2D'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                            MatchValue<span class="token punctuation">(</span>
                                value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            MatchValue<span class="token punctuation">(</span>
                                value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        kwd_attrs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        kwd_patterns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchClass<span class="token punctuation">(</span>
                        cls<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'Point3D'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        patterns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        kwd_attrs<span class="token operator">=</span><span class="token punctuation">[</span>
                            <span class="token string">'x'</span><span class="token punctuation">,</span>
                            <span class="token string">'y'</span><span class="token punctuation">,</span>
                            <span class="token string">'z'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                        kwd_patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                            MatchValue<span class="token punctuation">(</span>
                                value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            MatchValue<span class="token punctuation">(</span>
                                value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            MatchValue<span class="token punctuation">(</span>
                                value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.MatchAs</code>(<em>pattern</em>, <em>name</em>)</p>
<p>A match “as-pattern”, capture pattern or wildcard pattern. <code>pattern</code> contains the match pattern that the subject will be matched against. If the pattern is <code>None</code>, the node represents a capture pattern (i.e a bare name) and will always succeed.</p>
<p>The <code>name</code> attribute contains the name that will be bound if the pattern is successful. If <code>name</code> is <code>None</code>, <code>pattern</code> must also be <code>None</code> and the node represents the wildcard pattern.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... match x:
...     case [x] as y:
...         ...
...     case _:
...         ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Match<span class="token punctuation">(</span>
            subject<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cases<span class="token operator">=</span><span class="token punctuation">[</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchAs<span class="token punctuation">(</span>
                        pattern<span class="token operator">=</span>MatchSequence<span class="token punctuation">(</span>
                            patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                                MatchAs<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        name<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchAs<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.MatchOr</code>(<em>patterns</em>)</p>
<p>A match “or-pattern”. An or-pattern matches each of its subpatterns in turn to the subject, until one succeeds. The or-pattern is then deemed to succeed. If none of the subpatterns succeed the or-pattern fails. The <code>patterns</code> attribute contains a list of match pattern nodes that will be matched against the subject.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
... match x:
...     case [x] | (y):
...         ...
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Match<span class="token punctuation">(</span>
            subject<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            cases<span class="token operator">=</span><span class="token punctuation">[</span>
                match_case<span class="token punctuation">(</span>
                    pattern<span class="token operator">=</span>MatchOr<span class="token punctuation">(</span>
                        patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                            MatchSequence<span class="token punctuation">(</span>
                                patterns<span class="token operator">=</span><span class="token punctuation">[</span>
                                    MatchAs<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            MatchAs<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    body<span class="token operator">=</span><span class="token punctuation">[</span>
                        Expr<span class="token punctuation">(</span>
                            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Function-and-class-definitions"><a href="#Function-and-class-definitions" class="headerlink" title="Function and class definitions"></a>Function and class definitions</h4><p><em>class</em> <code>ast.FunctionDef</code>(<em>name</em>, <em>args</em>, <em>body</em>, <em>decorator_list</em>, <em>returns</em>, <em>type_comment</em>)</p>
<p>A function definition.</p>
<ul>
<li><p><code>name</code> is a raw string of the function name.</p>
</li>
<li><p><code>args</code> is an <code>arguments</code> node.</p>
</li>
<li><p><code>body</code> is the list of nodes inside the function.</p>
</li>
<li><p><code>decorator_list</code> is the list of decorators to be applied, stored outermost first (i.e. the first in the list will be applied last).</p>
</li>
<li><p><code>returns</code> is the return annotation.</p>
</li>
<li><p><code>type_comment</code></p>
<p><code>type_comment</code> is an optional string with the type annotation as a comment.</p>
</li>
</ul>
<p><em>class</em> <code>ast.Lambda</code>(<em>args</em>, <em>body</em>)</p>
<p><code>lambda</code> is a minimal function definition that can be used inside an expression. Unlike <code>FunctionDef</code>, <code>body</code> holds a single node.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'lambda x,y: ...'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Expr<span class="token punctuation">(</span>
            value<span class="token operator">=</span>Lambda<span class="token punctuation">(</span>
                args<span class="token operator">=</span>arguments<span class="token punctuation">(</span>
                    posonlyargs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    args<span class="token operator">=</span><span class="token punctuation">[</span>
                        arg<span class="token punctuation">(</span>arg<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        arg<span class="token punctuation">(</span>arg<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    kwonlyargs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    kw_defaults<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    defaults<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                body<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>Ellipsis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.arguments</code>(<em>posonlyargs</em>, <em>args</em>, <em>vararg</em>, <em>kwonlyargs</em>, <em>kw_defaults</em>, <em>kwarg</em>, <em>defaults</em>)</p>
<p>The arguments for a function.</p>
<ul>
<li><code>posonlyargs</code>, <code>args</code> and <code>kwonlyargs</code> are lists of <code>arg</code> nodes.</li>
<li><code>vararg</code> and <code>kwarg</code> are single <code>arg</code> nodes, referring to the <code>*args, **kwargs</code> parameters.</li>
<li><code>kw_defaults</code> is a list of default values for keyword-only arguments. If one is <code>None</code>, the corresponding argument is required.</li>
<li><code>defaults</code> is a list of default values for arguments that can be passed positionally. If there are fewer defaults, they correspond to the last n arguments.</li>
</ul>
<p><em>class</em> <code>ast.arg</code>(<em>arg</em>, <em>annotation</em>, <em>type_comment</em>)</p>
<p>A single argument in a list. <code>arg</code> is a raw string of the argument name, <code>annotation</code> is its annotation, such as a <code>Str</code> or <code>Name</code> node.</p>
<ul>
<li><p><code>type_comment</code></p>
<p><code>type_comment</code> is an optional string with the type annotation as a comment</p>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""\
... @decorator1
... @decorator2
... def f(a: 'annotation', b=1, c=2, *d, e, f=3, **g) -> 'return annotation':
...     pass
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        FunctionDef<span class="token punctuation">(</span>
            name<span class="token operator">=</span><span class="token string">'f'</span><span class="token punctuation">,</span>
            args<span class="token operator">=</span>arguments<span class="token punctuation">(</span>
                posonlyargs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                args<span class="token operator">=</span><span class="token punctuation">[</span>
                    arg<span class="token punctuation">(</span>
                        arg<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span>
                        annotation<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">'annotation'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    arg<span class="token punctuation">(</span>arg<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    arg<span class="token punctuation">(</span>arg<span class="token operator">=</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                vararg<span class="token operator">=</span>arg<span class="token punctuation">(</span>arg<span class="token operator">=</span><span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                kwonlyargs<span class="token operator">=</span><span class="token punctuation">[</span>
                    arg<span class="token punctuation">(</span>arg<span class="token operator">=</span><span class="token string">'e'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    arg<span class="token punctuation">(</span>arg<span class="token operator">=</span><span class="token string">'f'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                kw_defaults<span class="token operator">=</span><span class="token punctuation">[</span>
                    None<span class="token punctuation">,</span>
                    Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                kwarg<span class="token operator">=</span>arg<span class="token punctuation">(</span>arg<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                defaults<span class="token operator">=</span><span class="token punctuation">[</span>
                    Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                Pass<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            decorator_list<span class="token operator">=</span><span class="token punctuation">[</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'decorator1'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'decorator2'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            returns<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">'return annotation'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Return</code>(<em>value</em>)</p>
<p>A <code>return</code> statement.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'return 4'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Return<span class="token punctuation">(</span>
            value<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Yield</code>(<em>value</em>)</p>
<p><em>class</em> <code>ast.YieldFrom</code>(<em>value</em>)</p>
<p>A <code>yield</code> or <code>yield from</code> expression. Because these are expressions, they must be wrapped in a <code>Expr</code> node if the value sent back is not used.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'yield x'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Expr<span class="token punctuation">(</span>
            value<span class="token operator">=</span>Yield<span class="token punctuation">(</span>
                value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'yield from x'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Expr<span class="token punctuation">(</span>
            value<span class="token operator">=</span>YieldFrom<span class="token punctuation">(</span>
                value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'x'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.Global</code>(<em>names</em>)</p>
<p><em>class</em> <code>ast.Nonlocal</code>(<em>names</em>)</p>
<p><code>global</code> and <code>nonlocal</code> statements. <code>names</code> is a list of raw strings.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'global x,y,z'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Global<span class="token punctuation">(</span>
            names<span class="token operator">=</span><span class="token punctuation">[</span>
                <span class="token string">'x'</span><span class="token punctuation">,</span>
                <span class="token string">'y'</span><span class="token punctuation">,</span>
                <span class="token string">'z'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'nonlocal x,y,z'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        Nonlocal<span class="token punctuation">(</span>
            names<span class="token operator">=</span><span class="token punctuation">[</span>
                <span class="token string">'x'</span><span class="token punctuation">,</span>
                <span class="token string">'y'</span><span class="token punctuation">,</span>
                <span class="token string">'z'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.ClassDef</code>(<em>name</em>, <em>bases</em>, <em>keywords</em>, <em>starargs</em>, <em>kwargs</em>, <em>body</em>, <em>decorator_list</em>)</p>
<p>A class definition.</p>
<ul>
<li><code>name</code> is a raw string for the class name</li>
<li><code>bases</code> is a list of nodes for explicitly specified base classes.</li>
<li><code>keywords</code> is a list of <code>keyword</code> nodes, principally for ‘metaclass’. Other keywords will be passed to the metaclass, as per <a href="https://www.python.org/dev/peps/pep-3115/" target="_blank" rel="noopener">PEP-3115</a>.</li>
<li><code>starargs</code> and <code>kwargs</code> are each a single node, as in a function call. starargs will be expanded to join the list of base classes, and kwargs will be passed to the metaclass.</li>
<li><code>body</code> is a list of nodes representing the code within the class definition.</li>
<li><code>decorator_list</code> is a list of nodes, as in <code>FunctionDef</code>.</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""\
... @decorator1
... @decorator2
... class Foo(base1, base2, metaclass=meta):
...     pass
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        ClassDef<span class="token punctuation">(</span>
            name<span class="token operator">=</span><span class="token string">'Foo'</span><span class="token punctuation">,</span>
            bases<span class="token operator">=</span><span class="token punctuation">[</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'base1'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'base2'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            keywords<span class="token operator">=</span><span class="token punctuation">[</span>
                keyword<span class="token punctuation">(</span>
                    arg<span class="token operator">=</span><span class="token string">'metaclass'</span><span class="token punctuation">,</span>
                    value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'meta'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                Pass<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            decorator_list<span class="token operator">=</span><span class="token punctuation">[</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'decorator1'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'decorator2'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Async-and-await"><a href="#Async-and-await" class="headerlink" title="Async and await"></a>Async and await</h4><p><em>class</em> <code>ast.AsyncFunctionDef</code>(<em>name</em>, <em>args</em>, <em>body</em>, <em>decorator_list</em>, <em>returns</em>, <em>type_comment</em>)</p>
<p>An <code>async def</code> function definition. Has the same fields as <code>FunctionDef</code>.</p>
<p><em>class</em> <code>ast.Await</code>(<em>value</em>)</p>
<p>An <code>await</code> expression. <code>value</code> is what it waits for. Only valid in the body of an <code>AsyncFunctionDef</code>.</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""\
... async def f():
...     await other_func()
... """</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Module<span class="token punctuation">(</span>
    body<span class="token operator">=</span><span class="token punctuation">[</span>
        AsyncFunctionDef<span class="token punctuation">(</span>
            name<span class="token operator">=</span><span class="token string">'f'</span><span class="token punctuation">,</span>
            args<span class="token operator">=</span>arguments<span class="token punctuation">(</span>
                posonlyargs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                args<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                kwonlyargs<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                kw_defaults<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                defaults<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            body<span class="token operator">=</span><span class="token punctuation">[</span>
                Expr<span class="token punctuation">(</span>
                    value<span class="token operator">=</span>Await<span class="token punctuation">(</span>
                        value<span class="token operator">=</span>Call<span class="token punctuation">(</span>
                            func<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'other_func'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            args<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                            keywords<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            decorator_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type_ignores<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><em>class</em> <code>ast.AsyncFor</code>(<em>target</em>, <em>iter</em>, <em>body</em>, <em>orelse</em>, <em>type_comment</em>)</p>
<p><em>class</em> <code>ast.AsyncWith</code>(<em>items</em>, <em>body</em>, <em>type_comment</em>)</p>
<p><code>async for</code> loops and <code>async with</code> context managers. They have the same fields as <code>For</code> and <code>With</code>, respectively. Only valid in the body of an <code>AsyncFunctionDef</code>.</p>
<p>注解</p>
<p>When a string is parsed by <code>ast.parse()</code>, operator nodes (subclasses of <code>ast.operator</code>, <code>ast.unaryop</code>, <code>ast.cmpop</code>, <code>ast.boolop</code> and <code>ast.expr_context</code>) on the returned tree will be singletons. Changes to one will be reflected in all other occurrences of the same value (e.g. <code>ast.Add</code>).</p>
<h3 id="ast-中的辅助函数"><a href="#ast-中的辅助函数" class="headerlink" title="ast 中的辅助函数"></a><code>ast</code> 中的辅助函数</h3><p>除了节点类， <code>ast</code> 模块里为遍历抽象语法树定义了这些工具函数和类:</p>
<p><code>ast.parse</code>(<em>source</em>, <em>filename=’&lt;unknown&gt;’</em>, <em>mode=’exec’</em>, <em>**,</em> type_comments=False<em>,</em> feature_version=None*)</p>
<p>把源码解析为AST节点。和 <code>compile(source, filename, mode,ast.PyCF_ONLY_AST)</code> 等价。</p>
<p>If <code>type_comments=True</code> is given, the parser is modified to check and return type comments as specified by <a href="https://www.python.org/dev/peps/pep-0484" target="_blank" rel="noopener"><strong>PEP 484</strong></a> and <a href="https://www.python.org/dev/peps/pep-0526" target="_blank" rel="noopener"><strong>PEP 526</strong></a>. This is equivalent to adding <code>ast.PyCF_TYPE_COMMENTS</code> to the flags passed to <code>compile()</code>. This will report syntax errors for misplaced type comments. Without this flag, type comments will be ignored, and the <code>type_comment</code> field on selected AST nodes will always be <code>None</code>. In addition, the locations of <code># type: ignore</code> comments will be returned as the <code>type_ignores</code> attribute of <code>Module</code> (otherwise it is always an empty list).</p>
<p>In addition, if <code>mode</code> is <code>'func_type'</code>, the input syntax is modified to correspond to <a href="https://www.python.org/dev/peps/pep-0484" target="_blank" rel="noopener"><strong>PEP 484</strong></a> “signature type comments”, e.g. <code>(str, int) -&gt; List[str]</code>.</p>
<p>Also, setting <code>feature_version</code> to a tuple <code>(major, minor)</code> will attempt to parse using that Python version’s grammar. Currently <code>major</code> must equal to <code>3</code>. For example, setting <code>feature_version=(3, 4)</code> will allow the use of <code>async</code> and <code>await</code> as variable names. The lowest supported version is <code>(3, 4)</code>; the highest is <code>sys.version_info[0:2]</code>.</p>
<p>If source contains a null character (‘0’), <code>ValueError</code> is raised.</p>
<blockquote>
<p>警告</p>
<p>Note that succesfully parsing souce code into an AST object doesn’t guarantee that the source code provided is valid Python code that can be executed as the compilation step can raise further <code>SyntaxError</code> exceptions. For instance, the source <code>return 42</code> generates a valid AST node for a return statement, but it cannot be compiled alone (it needs to be inside a function node).</p>
<p>In particular, <code>ast.parse()</code> won’t do any scoping checks, which the compilation step does.</p>
</blockquote>
<p>警告</p>
<p>足够复杂或是巨大的字符串可能导致Python解释器的崩溃，因为Python的AST编译器是有栈深限制的。</p>
<p>在 3.8 版更改: Added <code>type_comments</code>, <code>mode='func_type'</code> and <code>feature_version</code>.</p>
<p><code>ast.unparse</code>(<em>ast_obj</em>)</p>
<p>Unparse an <code>ast.AST</code> object and generate a string with code that would produce an equivalent <code>ast.AST</code> object if parsed back with <code>ast.parse()</code>.</p>
<p>警告</p>
<p>The produced code string will not necessarily be equal to the original code that generated the <code>ast.AST</code> object (without any compiler optimizations, such as constant tuples/frozensets).</p>
<p>警告</p>
<p>Trying to unparse a highly complex expression would result with <code>RecursionError</code>.</p>
<p>3.9 新版功能.</p>
<p><code>ast.literal_eval</code>(<em>node_or_string</em>)</p>
<p>Safely evaluate an expression node or a string containing a Python literal or container display. The string or node provided may only consist of the following Python literal structures: strings, bytes, numbers, tuples, lists, dicts, sets, booleans, <code>None</code> and <code>Ellipsis</code>.</p>
<p>This can be used for safely evaluating strings containing Python values from untrusted sources without the need to parse the values oneself. It is not capable of evaluating arbitrarily complex expressions, for example involving operators or indexing.</p>
<p>警告</p>
<p>足够复杂或是巨大的字符串可能导致Python解释器的崩溃，因为Python的AST编译器是有栈深限制的。</p>
<p>It can raise <code>ValueError</code>, <code>TypeError</code>, <code>SyntaxError</code>, <code>MemoryError</code> and <code>RecursionError</code> depending on the malformed input.</p>
<p>在 3.2 版更改: 目前支持字节和集合。</p>
<p>在 3.9 版更改: Now supports creating empty sets with <code>'set()'</code>.</p>
<p>在 3.10 版更改: For string inputs, leading spaces and tabs are now stripped.</p>
<p><code>ast.get_docstring</code>(<em>node</em>, <em>clean=True</em>)</p>
<p>Return the docstring of the given <em>node</em> (which must be a <code>FunctionDef</code>, <code>AsyncFunctionDef</code>, <code>ClassDef</code>, or <code>Module</code> node), or <code>None</code> if it has no docstring. If <em>clean</em> is true, clean up the docstring’s indentation with <code>inspect.cleandoc()</code>.</p>
<p>在 3.5 版更改: 目前支持 <code>AsyncFunctionDef</code></p>
<p><code>ast.get_source_segment</code>(<em>source</em>, <em>node</em>, <em>**,</em> padded=False*)</p>
<p>Get source code segment of the <em>source</em> that generated <em>node</em>. If some location information (<code>lineno</code>, <code>end_lineno</code>, <code>col_offset</code>, or <code>end_col_offset</code>) is missing, return <code>None</code>.</p>
<p>If <em>padded</em> is <code>True</code>, the first line of a multi-line statement will be padded with spaces to match its original position.</p>
<p>3.8 新版功能.</p>
<p><code>ast.fix_missing_locations</code>(<em>node</em>)</p>
<p>When you compile a node tree with <code>compile()</code>, the compiler expects <code>lineno</code> and <code>col_offset</code> attributes for every node that supports them. This is rather tedious to fill in for generated nodes, so this helper adds these attributes recursively where not already set, by setting them to the values of the parent node. It works recursively starting at <em>node</em>.</p>
<p><code>ast.increment_lineno</code>(<em>node</em>, <em>n=1</em>)</p>
<p>Increment the line number and end line number of each node in the tree starting at <em>node</em> by <em>n</em>. This is useful to “move code” to a different location in a file.</p>
<p><code>ast.copy_location</code>(<em>new_node</em>, <em>old_node</em>)</p>
<p>Copy source location (<code>lineno</code>, <code>col_offset</code>, <code>end_lineno</code>, and <code>end_col_offset</code>) from <em>old_node</em> to <em>new_node</em> if possible, and return <em>new_node</em>.</p>
<p><code>ast.iter_fields</code>(<em>node</em>)</p>
<p>Yield a tuple of <code>(fieldname, value)</code> for each field in <code>node._fields</code> that is present on <em>node</em>.</p>
<p><code>ast.iter_child_nodes</code>(<em>node</em>)</p>
<p>Yield all direct child nodes of <em>node</em>, that is, all fields that are nodes and all items of fields that are lists of nodes.</p>
<p><code>ast.walk</code>(<em>node</em>)</p>
<p>Recursively yield all descendant nodes in the tree starting at <em>node</em> (including <em>node</em> itself), in no specified order. This is useful if you only want to modify nodes in place and don’t care about the context.</p>
<p><em>class</em> <code>ast.NodeVisitor</code></p>
<p>A node visitor base class that walks the abstract syntax tree and calls a visitor function for every node found. This function may return a value which is forwarded by the <code>visit()</code> method.</p>
<p>This class is meant to be subclassed, with the subclass adding visitor methods.</p>
<ul>
<li><p><code>visit</code>(<em>node</em>)</p>
<p>Visit a node. The default implementation calls the method called <code>self.visit_*classname*</code> where <em>classname</em> is the name of the node class, or <code>generic_visit()</code> if that method doesn’t exist.</p>
</li>
<li><p><code>generic_visit</code>(<em>node</em>)</p>
<p>This visitor calls <code>visit()</code> on all children of the node.</p>
<p>Note that child nodes of nodes that have a custom visitor method won’t be visited unless the visitor calls <code>generic_visit()</code> or visits them itself.</p>
</li>
</ul>
<p>Don’t use the <code>NodeVisitor</code> if you want to apply changes to nodes during traversal. For this a special visitor exists (<code>NodeTransformer</code>) that allows modifications.</p>
<p>3.8 版后已移除: Methods <code>visit_Num()</code>, <code>visit_Str()</code>, <code>visit_Bytes()</code>, <code>visit_NameConstant()</code> and <code>visit_Ellipsis()</code> are deprecated now and will not be called in future Python versions. Add the <code>visit_Constant()</code> method to handle all constant nodes.</p>
<p><em>class</em> <code>ast.NodeTransformer</code></p>
<p>子类 <code>NodeVisitor</code> 用于遍历抽象语法树，并允许修改节点。</p>
<p><code>NodeTransformer</code> 将遍历抽象语法树并使用visitor方法的返回值去替换或移除旧节点。如果visitor方法的返回值为 <code>None</code> , 则该节点将从其位置移除，否则将替换为返回值。当返回值是原始节点时，无需替换。</p>
<p>如下是一个转换器示例，它将所有出现的名称 (<code>foo</code>) 重写为 <code>data['foo']</code>:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">RewriteName</span><span class="token punctuation">(</span>NodeTransformer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">visit_Name</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Subscript<span class="token punctuation">(</span>
            value<span class="token operator">=</span>Name<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token string">'data'</span><span class="token punctuation">,</span> ctx<span class="token operator">=</span>Load<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            slice<span class="token operator">=</span>Constant<span class="token punctuation">(</span>value<span class="token operator">=</span>node<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
            ctx<span class="token operator">=</span>node<span class="token punctuation">.</span>ctx
        <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>请记住，如果您正在操作的节点具有子节点，则必须先转换其子节点或为该节点调用 <code>generic_visit()</code> 方法。</p>
<p>对于属于语句集合（适用于所有语句节点）的节点，访问者还可以返回节点列表而不仅仅是单个节点。</p>
<p>If <code>NodeTransformer</code> introduces new nodes (that weren’t part of original tree) without giving them location information (such as <code>lineno</code>), <code>fix_missing_locations()</code> should be called with the new sub-tree to recalculate the location information:</p>
<pre class="line-numbers language-python"><code class="language-python">tree <span class="token operator">=</span> ast<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'eval'</span><span class="token punctuation">)</span>
new_tree <span class="token operator">=</span> fix_missing_locations<span class="token punctuation">(</span>RewriteName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>visit<span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>通常你可以像这样使用转换器:</p>
<pre class="line-numbers language-python"><code class="language-python">node <span class="token operator">=</span> YourTransformer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>visit<span class="token punctuation">(</span>node<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>ast.dump</code>(<em>node</em>, <em>annotate_fields=True</em>, <em>include_attributes=False</em>, <em>**,</em> indent=None*)</p>
<p>Return a formatted dump of the tree in <em>node</em>. This is mainly useful for debugging purposes. If <em>annotate_fields</em> is true (by default), the returned string will show the names and the values for fields. If <em>annotate_fields</em> is false, the result string will be more compact by omitting unambiguous field names. Attributes such as line numbers and column offsets are not dumped by default. If this is wanted, <em>include_attributes</em> can be set to true.</p>
<p>If <em>indent</em> is a non-negative integer or string, then the tree will be pretty-printed with that indent level. An indent level of 0, negative, or <code>""</code> will only insert newlines. <code>None</code> (the default) selects the single line representation. Using a positive integer indent indents that many spaces per level. If <em>indent</em> is a string (such as <code>"\t"</code>), that string is used to indent each level.</p>
<p>在 3.9 版更改: Added the <em>indent</em> option.</p>
<h3 id="Compiler-Flags"><a href="#Compiler-Flags" class="headerlink" title="Compiler Flags"></a>Compiler Flags</h3><p>The following flags may be passed to <code>compile()</code> in order to change effects on the compilation of a program:</p>
<pre><code>ast.PyCF_ALLOW_TOP_LEVEL_AWAIT</code></pre><p>Enables support for top-level <code>await</code>, <code>async for</code>, <code>async with</code> and async comprehensions.</p>
<p>3.8 新版功能.</p>
<pre><code>ast.PyCF_ONLY_AST</code></pre><p>Generates and returns an abstract syntax tree instead of returning a compiled code object.</p>
<pre><code>ast.PyCF_TYPE_COMMENTS</code></pre><p>Enables support for <a href="https://www.python.org/dev/peps/pep-0484" target="_blank" rel="noopener"><strong>PEP 484</strong></a> and <a href="https://www.python.org/dev/peps/pep-0526" target="_blank" rel="noopener"><strong>PEP 526</strong></a> style type comments (<code># type: &lt;type&gt;</code>, <code># type: ignore &lt;stuff&gt;</code>).</p>
<p>3.8 新版功能.</p>
<h3 id="Command-Line-Usage"><a href="#Command-Line-Usage" class="headerlink" title="Command-Line Usage"></a>Command-Line Usage</h3><p>3.9 新版功能.</p>
<p>The <code>ast</code> module can be executed as a script from the command line. It is as simple as:</p>
<pre><code>python -m ast [-m &lt;mode&gt;] [-a] [infile]</code></pre><p>The following options are accepted:</p>
<pre><code>-h``,` `--help</code></pre><p>Show the help message and exit.</p>
<pre><code>-m` `&lt;mode&gt;
--mode` `&lt;mode&gt;</code></pre><p>Specify what kind of code must be compiled, like the <em>mode</em> argument in <code>parse()</code>.</p>
<pre><code>--no-type-comments</code></pre><p>Don’t parse type comments.</p>
<pre><code>-a``,` `--include-attributes</code></pre><p>Include attributes such as line numbers and column offsets.</p>
<pre><code>-i` `&lt;indent&gt;
--indent` `&lt;indent&gt;</code></pre><p>Indentation of nodes in AST (number of spaces).</p>
<p>If <code>infile</code> is specified its contents are parsed to AST and dumped to stdout. Otherwise, the content is read from stdin.</p>
<p>参见</p>
<p><a href="https://greentreesnakes.readthedocs.io/" target="_blank" rel="noopener">Green Tree Snakes</a>, an external documentation resource, has good details on working with Python ASTs.</p>
<p><a href="https://asttokens.readthedocs.io/en/latest/user-guide.html" target="_blank" rel="noopener">ASTTokens</a> annotates Python ASTs with the positions of tokens and text in the source code that generated them. This is helpful for tools that make source code transformations.</p>
<p><a href="http://leoeditor.com/appendices.html#leoast-py" target="_blank" rel="noopener">leoAst.py</a> unifies the token-based and parse-tree-based views of python programs by inserting two-way links between tokens and ast nodes.</p>
<p><a href="https://libcst.readthedocs.io/" target="_blank" rel="noopener">LibCST</a> parses code as a Concrete Syntax Tree that looks like an ast tree and keeps all formatting details. It’s useful for building automated refactoring (codemod) applications and linters.</p>
<p><a href="https://parso.readthedocs.io/" target="_blank" rel="noopener">Parso</a> is a Python parser that supports error recovery and round-trip parsing for different Python versions (in multiple Python versions). Parso is also able to list multiple syntax errors in your python file.</p>
<h2 id="symtable-—-Access-to-the-compiler’s-symbol-tables"><a href="#symtable-—-Access-to-the-compiler’s-symbol-tables" class="headerlink" title="symtable —- Access to the compiler’s symbol tables"></a><code>symtable</code> —- Access to the compiler’s symbol tables</h2><p><strong>Source code:</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/symtable.py" target="_blank" rel="noopener">Lib/symtable.py</a></p>
<hr>
<p>Symbol tables are generated by the compiler from AST just before bytecode is generated. The symbol table is responsible for calculating the scope of every identifier in the code. <code>symtable</code> provides an interface to examine these tables.</p>
<h3 id="Generating-Symbol-Tables"><a href="#Generating-Symbol-Tables" class="headerlink" title="Generating Symbol Tables"></a>Generating Symbol Tables</h3><p><code>symtable.symtable</code>(<em>code</em>, <em>filename</em>, <em>compile_type</em>)</p>
<p>Return the toplevel <code>SymbolTable</code> for the Python source <em>code</em>. <em>filename</em> is the name of the file containing the code. <em>compile_type</em> is like the <em>mode</em> argument to <code>compile()</code>.</p>
<h3 id="Examining-Symbol-Tables"><a href="#Examining-Symbol-Tables" class="headerlink" title="Examining Symbol Tables"></a>Examining Symbol Tables</h3><p><em>class</em> <code>symtable.SymbolTable</code></p>
<p>A namespace table for a block. The constructor is not public.</p>
<ul>
<li><p><code>get_type</code>()</p>
<p>Return the type of the symbol table. Possible values are <code>'class'</code>, <code>'module'</code>, and <code>'function'</code>.</p>
</li>
<li><p><code>get_id</code>()</p>
<p>Return the table’s identifier.</p>
</li>
<li><p><code>get_name</code>()</p>
<p>Return the table’s name. This is the name of the class if the table is for a class, the name of the function if the table is for a function, or <code>'top'</code> if the table is global (<code>get_type()</code> returns <code>'module'</code>).</p>
</li>
<li><p><code>get_lineno</code>()</p>
<p>Return the number of the first line in the block this table represents.</p>
</li>
<li><p><code>is_optimized</code>()</p>
<p>Return <code>True</code> if the locals in this table can be optimized.</p>
</li>
<li><p><code>is_nested</code>()</p>
<p>Return <code>True</code> if the block is a nested class or function.</p>
</li>
<li><p><code>has_children</code>()</p>
<p>Return <code>True</code> if the block has nested namespaces within it. These can be obtained with <code>get_children()</code>.</p>
</li>
<li><p><code>get_identifiers</code>()</p>
<p>Return a list of names of symbols in this table.</p>
</li>
<li><p><code>lookup</code>(<em>name</em>)</p>
<p>Lookup <em>name</em> in the table and return a <code>Symbol</code> instance.</p>
</li>
<li><p><code>get_symbols</code>()</p>
<p>Return a list of <code>Symbol</code> instances for names in the table.</p>
</li>
<li><p><code>get_children</code>()</p>
<p>Return a list of the nested symbol tables.</p>
</li>
</ul>
<p><em>class</em> <code>symtable.Function</code></p>
<p>A namespace for a function or method. This class inherits <code>SymbolTable</code>.</p>
<ul>
<li><p><code>get_parameters</code>()</p>
<p>Return a tuple containing names of parameters to this function.</p>
</li>
<li><p><code>get_locals</code>()</p>
<p>Return a tuple containing names of locals in this function.</p>
</li>
<li><p><code>get_globals</code>()</p>
<p>Return a tuple containing names of globals in this function.</p>
</li>
<li><p><code>get_nonlocals</code>()</p>
<p>Return a tuple containing names of nonlocals in this function.</p>
</li>
<li><p><code>get_frees</code>()</p>
<p>Return a tuple containing names of free variables in this function.</p>
</li>
</ul>
<p><em>class</em> <code>symtable.Class</code></p>
<p>A namespace of a class. This class inherits <code>SymbolTable</code>.</p>
<ul>
<li><p><code>get_methods</code>()</p>
<p>Return a tuple containing the names of methods declared in the class.</p>
</li>
</ul>
<p><em>class</em> <code>symtable.Symbol</code></p>
<p>An entry in a <code>SymbolTable</code> corresponding to an identifier in the source. The constructor is not public.</p>
<ul>
<li><p><code>get_name</code>()</p>
<p>Return the symbol’s name.</p>
</li>
<li><p><code>is_referenced</code>()</p>
<p>Return <code>True</code> if the symbol is used in its block.</p>
</li>
<li><p><code>is_imported</code>()</p>
<p>Return <code>True</code> if the symbol is created from an import statement.</p>
</li>
<li><p><code>is_parameter</code>()</p>
<p>Return <code>True</code> if the symbol is a parameter.</p>
</li>
<li><p><code>is_global</code>()</p>
<p>Return <code>True</code> if the symbol is global.</p>
</li>
<li><p><code>is_nonlocal</code>()</p>
<p>Return <code>True</code> if the symbol is nonlocal.</p>
</li>
<li><p><code>is_declared_global</code>()</p>
<p>Return <code>True</code> if the symbol is declared global with a global statement.</p>
</li>
<li><p><code>is_local</code>()</p>
<p>Return <code>True</code> if the symbol is local to its block.</p>
</li>
<li><p><code>is_annotated</code>()</p>
<p>Return <code>True</code> if the symbol is annotated.</p>
<p>3.6 新版功能.</p>
</li>
<li><p><code>is_free</code>()</p>
<p>Return <code>True</code> if the symbol is referenced in its block, but not assigned to.</p>
</li>
<li><p><code>is_assigned</code>()</p>
<p>Return <code>True</code> if the symbol is assigned to in its block.</p>
</li>
<li><p><code>is_namespace</code>()</p>
<p>Return <code>True</code> if name binding introduces new namespace.</p>
<p>If the name is used as the target of a function or class statement, this will be true.</p>
<p>例如：</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> table <span class="token operator">=</span> symtable<span class="token punctuation">.</span>symtable<span class="token punctuation">(</span><span class="token string">"def some_func(): pass"</span><span class="token punctuation">,</span> <span class="token string">"string"</span><span class="token punctuation">,</span> <span class="token string">"exec"</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> table<span class="token punctuation">.</span>lookup<span class="token punctuation">(</span><span class="token string">"some_func"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>is_namespace<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">True</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Note that a single name can be bound to multiple objects. If the result is <code>True</code>, the name may also be bound to other objects, like an int or list, that does not introduce a new namespace.</p>
</li>
<li><p><code>get_namespaces</code>()</p>
<p>Return a list of namespaces bound to this name.</p>
</li>
<li><p><code>get_namespace</code>()</p>
<p>Return the namespace bound to this name. If more than one namespace is bound, <code>ValueError</code> is raised.</p>
</li>
</ul>
<h2 id="token-—-与Python解析树一起使用的常量"><a href="#token-—-与Python解析树一起使用的常量" class="headerlink" title="token —- 与Python解析树一起使用的常量"></a><code>token</code> —- 与Python解析树一起使用的常量</h2><p><strong>源码：</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/token.py" target="_blank" rel="noopener">Lib/token.py</a></p>
<hr>
<p>This module provides constants which represent the numeric values of leaf nodes of the parse tree (terminal tokens). Refer to the file <code>Grammar/Tokens</code> in the Python distribution for the definitions of the names in the context of the language grammar. The specific numeric values which the names map to may change between Python versions.</p>
<p>该模块还提供从数字代码到名称和一些函数的映射。 这些函数镜像了 Python C 头文件中的定义。</p>
<pre><code>token.tok_name</code></pre><p>将此模块中定义的常量的数值映射回名称字符串的字典，允许生成更加人类可读的解析树表示。</p>
<p><code>token.ISTERMINAL</code>(<em>x</em>)</p>
<p>对终端标记值返回 <code>True</code>。</p>
<p><code>token.ISNONTERMINAL</code>(<em>x</em>)</p>
<p>对非终端标记值返回 <code>True</code>。</p>
<p><code>token.ISEOF</code>(<em>x</em>)</p>
<p>如果 <em>x</em> 是表示输入结束的标记则返回 <code>True</code>。</p>
<p>标记常量是：</p>
<pre><code>token.ENDMARKER
token.NAME
token.NUMBER
token.STRING
token.NEWLINE
token.INDENT
token.DEDENT
token.LPAR</code></pre><p><code>"("</code> 的权标值。</p>
<pre><code>token.RPAR</code></pre><p><code>")"</code> 的权标值。</p>
<pre><code>token.LSQB</code></pre><p><code>"["</code> 的权标值。</p>
<pre><code>token.RSQB</code></pre><p><code>"]"</code> 的权标值。</p>
<pre><code>token.COLON</code></pre><p><code>":"</code> 的权标值。</p>
<pre><code>token.COMMA</code></pre><p><code>","</code> 的权标值。</p>
<pre><code>token.SEMI</code></pre><p><code>";"</code> 的权标值。</p>
<pre><code>token.PLUS</code></pre><p><code>"+"</code> 的权标值。</p>
<pre><code>token.MINUS</code></pre><p><code>"-"</code> 的权标值。</p>
<pre><code>token.STAR</code></pre><p><code>"*"</code> 的权标值。</p>
<pre><code>token.SLASH</code></pre><p><code>"/"</code> 的权标值。</p>
<pre><code>token.VBAR</code></pre><p><code>"|"</code> 的权标值。</p>
<pre><code>token.AMPER</code></pre><p><code>"&amp;"</code> 的权标值。</p>
<pre><code>token.LESS</code></pre><p><code>"&lt;"</code> 的权标值。</p>
<pre><code>token.GREATER</code></pre><p><code>"&gt;"</code> 的权标值。</p>
<pre><code>token.EQUAL</code></pre><p>Token value for <code>"="</code>.</p>
<pre><code>token.DOT</code></pre><p>Token value for <code>"."</code>.</p>
<pre><code>token.PERCENT</code></pre><p>Token value for <code>"%"</code>.</p>
<pre><code>token.LBRACE</code></pre><p>Token value for <code>"{"</code>.</p>
<pre><code>token.RBRACE</code></pre><p>Token value for <code>"}"</code>.</p>
<pre><code>token.EQEQUAL</code></pre><p>Token value for <code>"=="</code>.</p>
<pre><code>token.NOTEQUAL</code></pre><p>Token value for <code>"!="</code>.</p>
<pre><code>token.LESSEQUAL</code></pre><p>Token value for <code>"&lt;="</code>.</p>
<pre><code>token.GREATEREQUAL</code></pre><p>Token value for <code>"&gt;="</code>.</p>
<pre><code>token.TILDE</code></pre><p>Token value for <code>"~"</code>.</p>
<pre><code>token.CIRCUMFLEX</code></pre><p>Token value for <code>"^"</code>.</p>
<pre><code>token.LEFTSHIFT</code></pre><p>Token value for <code>"&lt;&lt;"</code>.</p>
<pre><code>token.RIGHTSHIFT</code></pre><p>Token value for <code>"&gt;&gt;"</code>.</p>
<pre><code>token.DOUBLESTAR</code></pre><p>Token value for <code>"**"</code>.</p>
<pre><code>token.PLUSEQUAL</code></pre><p>Token value for <code>"+="</code>.</p>
<pre><code>token.MINEQUAL</code></pre><p>Token value for <code>"-="</code>.</p>
<pre><code>token.STAREQUAL</code></pre><p>Token value for <code>"*="</code>.</p>
<pre><code>token.SLASHEQUAL</code></pre><p>Token value for <code>"/="</code>.</p>
<pre><code>token.PERCENTEQUAL</code></pre><p>Token value for <code>"%="</code>.</p>
<pre><code>token.AMPEREQUAL</code></pre><p>Token value for <code>"&amp;="</code>.</p>
<pre><code>token.VBAREQUAL</code></pre><p>Token value for <code>"|="</code>.</p>
<pre><code>token.CIRCUMFLEXEQUAL</code></pre><p>Token value for <code>"^="</code>.</p>
<pre><code>token.LEFTSHIFTEQUAL</code></pre><p>Token value for <code>"&lt;&lt;="</code>.</p>
<pre><code>token.RIGHTSHIFTEQUAL</code></pre><p>Token value for <code>"&gt;&gt;="</code>.</p>
<pre><code>token.DOUBLESTAREQUAL</code></pre><p>Token value for <code>"**="</code>.</p>
<pre><code>token.DOUBLESLASH</code></pre><p>Token value for <code>"//"</code>.</p>
<pre><code>token.DOUBLESLASHEQUAL</code></pre><p>Token value for <code>"//="</code>.</p>
<pre><code>token.AT</code></pre><p>Token value for <code>"@"</code>.</p>
<pre><code>token.ATEQUAL</code></pre><p>Token value for <code>"@="</code>.</p>
<pre><code>token.RARROW</code></pre><p>Token value for <code>"-&gt;"</code>.</p>
<pre><code>token.ELLIPSIS</code></pre><p>Token value for <code>"..."</code>.</p>
<pre><code>token.COLONEQUAL</code></pre><p>Token value for <code>":="</code>.</p>
<pre><code>token.OP
token.AWAIT
token.ASYNC
token.TYPE_IGNORE
token.TYPE_COMMENT
token.SOFT_KEYWORD
token.ERRORTOKEN
token.N_TOKENS
token.NT_OFFSET</code></pre><p>C 标记生成器不使用以下标记类型值，但 <code>tokenize</code> 模块需要这些标记类型值。</p>
<pre><code>token.COMMENT</code></pre><p>标记值用于表示注释。</p>
<pre><code>token.NL</code></pre><p>标记值用于表示非终止换行符。 <code>NEWLINE</code> 标记表示 Python 代码逻辑行的结束；当在多条物理线路上继续执行逻辑代码行时，会生成 <code>NL</code> 标记。</p>
<pre><code>token.ENCODING</code></pre><p>指示用于将源字节解码为文本的编码的标记值。 <code>tokenize.tokenize()</code> 返回的第一个标记将始终是一个 <code>ENCODING</code> 标记。</p>
<pre><code>token.TYPE_COMMENT</code></pre><p>Token value indicating that a type comment was recognized. Such tokens are only produced when <code>ast.parse()</code> is invoked with <code>type_comments=True</code>.</p>
<p>在 3.5 版更改: 补充 <code>AWAIT</code> 和 <code>ASYNC</code> 标记。</p>
<p>在 3.7 版更改: 补充 <code>COMMENT</code> 、 <code>NL</code> 和 <code>ENCODING</code> 标记。</p>
<p>在 3.7 版更改: 移除 <code>AWAIT</code>和 <code>ASYNC</code> 标记。 “async” 和 “await” 现在被标记为 <code>NAME</code> 标记。</p>
<p>在 3.8 版更改: Added <code>TYPE_COMMENT</code>, <code>TYPE_IGNORE</code>, <code>COLONEQUAL</code>. Added <code>AWAIT</code> and <code>ASYNC</code> tokens back (they’re needed to support parsing older Python versions for <code>ast.parse()</code> with <code>feature_version</code> set to 6 or lower).</p>
<h2 id="keyword-—-检验Python关键字"><a href="#keyword-—-检验Python关键字" class="headerlink" title="keyword —- 检验Python关键字"></a><code>keyword</code> —- 检验Python关键字</h2><p><strong>源码：</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/keyword.py" target="_blank" rel="noopener">Lib/keyword.py</a></p>
<hr>
<p>此模块允许 Python 程序确定某个字符串是否为 关键字。</p>
<p><code>keyword.iskeyword</code>(<em>s</em>)</p>
<p>如果 <em>s</em> 是一个 Python 关键字 则返回 <code>True</code>。</p>
<pre><code>keyword.kwlist</code></pre><p>包含解释器定义的所有 关键字 的序列。 如果所定义的任何关键字仅在特定 <code>__future__</code> 语句生效时被激活，它们也将被包含在内。</p>
<p><code>keyword.issoftkeyword</code>(<em>s</em>)</p>
<p>如果 <em>s</em> 是一个 Python 的软 关键字 则返回 <code>True</code>。</p>
<p>3.9 新版功能.</p>
<pre><code>keyword.softkwlist</code></pre><p>包含解释器定义的所有软 关键字 的序列。 如果所定义的任何软关键字仅在特定 <code>__future__</code> 语句生效时被激活，它们也将被包含在内。</p>
<p>3.9 新版功能.</p>
<h2 id="tokenize-—-对-Python-代码使用的标记解析器"><a href="#tokenize-—-对-Python-代码使用的标记解析器" class="headerlink" title="tokenize —- 对 Python 代码使用的标记解析器"></a><code>tokenize</code> —- 对 Python 代码使用的标记解析器</h2><p><strong>源码：</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/tokenize.py" target="_blank" rel="noopener">Lib/tokenize.py</a></p>
<hr>
<p>The <code>tokenize</code> module provides a lexical scanner for Python source code, implemented in Python. The scanner in this module returns comments as tokens as well, making it useful for implementing “pretty-printers”, including colorizers for on-screen displays.</p>
<p>为了简化标记流的处理，所有的 运算符 和 定界符 以及 <code>Ellipsis</code> 返回时都会打上通用的 <code>OP</code> 标记。 可以通过 <code>tokenize.tokenize()</code> 返回的 named tuple 对象的 <code>exact_type</code> 属性来获得确切的标记类型。</p>
<h3 id="对输入进行解析标记"><a href="#对输入进行解析标记" class="headerlink" title="对输入进行解析标记"></a>对输入进行解析标记</h3><p>主要的入口是一个 generator:</p>
<p><code>tokenize.tokenize</code>(<em>readline</em>)</p>
<p>生成器 <code>tokenize()</code> 需要一个 <em>readline</em> 参数，这个参数必须是一个可调用对象，且能提供与文件对象的 <code>io.IOBase.readline()</code> 方法相同的接口。每次调用这个函数都要 返回字节类型输入的一行数据。</p>
<p>The generator produces 5-tuples with these members: the token type; the token string; a 2-tuple <code>(srow, scol)</code> of ints specifying the row and column where the token begins in the source; a 2-tuple <code>(erow, ecol)</code> of ints specifying the row and column where the token ends in the source; and the line on which the token was found. The line passed (the last tuple item) is the <em>physical</em> line. The 5 tuple is returned as a named tuple with the field names: <code>type string start end line</code>.</p>
<p>The returned named tuple has an additional property named <code>exact_type</code> that contains the exact operator type for <code>OP</code> tokens. For all other token types <code>exact_type</code> equals the named tuple <code>type</code> field.</p>
<p>在 3.1 版更改: Added support for named tuples.</p>
<p>在 3.3 版更改: Added support for <code>exact_type</code>.</p>
<p><code>tokenize()</code> determines the source encoding of the file by looking for a UTF-8 BOM or encoding cookie, according to <a href="https://www.python.org/dev/peps/pep-0263" target="_blank" rel="noopener"><strong>PEP 263</strong></a>.</p>
<p><code>tokenize.generate_tokens</code>(<em>readline</em>)</p>
<p>Tokenize a source reading unicode strings instead of bytes.</p>
<p>Like <code>tokenize()</code>, the <em>readline</em> argument is a callable returning a single line of input. However, <code>generate_tokens()</code> expects <em>readline</em> to return a str object rather than bytes.</p>
<p>The result is an iterator yielding named tuples, exactly like <code>tokenize()</code>. It does not yield an <code>ENCODING</code> token.</p>
<p>All constants from the <code>token</code> module are also exported from <code>tokenize</code>.</p>
<p>Another function is provided to reverse the tokenization process. This is useful for creating tools that tokenize a script, modify the token stream, and write back the modified script.</p>
<p><code>tokenize.untokenize</code>(<em>iterable</em>)</p>
<p>Converts tokens back into Python source code. The <em>iterable</em> must return sequences with at least two elements, the token type and the token string. Any additional sequence elements are ignored.</p>
<p>The reconstructed script is returned as a single string. The result is guaranteed to tokenize back to match the input so that the conversion is lossless and round-trips are assured. The guarantee applies only to the token type and token string as the spacing between tokens (column positions) may change.</p>
<p>It returns bytes, encoded using the <code>ENCODING</code> token, which is the first token sequence output by <code>tokenize()</code>. If there is no encoding token in the input, it returns a str instead.</p>
<p><code>tokenize()</code> needs to detect the encoding of source files it tokenizes. The function it uses to do this is available:</p>
<p><code>tokenize.detect_encoding</code>(<em>readline</em>)</p>
<p>The <code>detect_encoding()</code> function is used to detect the encoding that should be used to decode a Python source file. It requires one argument, readline, in the same way as the <code>tokenize()</code> generator.</p>
<p>It will call readline a maximum of twice, and return the encoding used (as a string) and a list of any lines (not decoded from bytes) it has read in.</p>
<p>It detects the encoding from the presence of a UTF-8 BOM or an encoding cookie as specified in <a href="https://www.python.org/dev/peps/pep-0263" target="_blank" rel="noopener"><strong>PEP 263</strong></a>. If both a BOM and a cookie are present, but disagree, a <code>SyntaxError</code> will be raised. Note that if the BOM is found, <code>'utf-8-sig'</code> will be returned as an encoding.</p>
<p>If no encoding is specified, then the default of <code>'utf-8'</code> will be returned.</p>
<p>Use <code>open()</code> to open Python source files: it uses <code>detect_encoding()</code> to detect the file encoding.</p>
<p><code>tokenize.open</code>(<em>filename</em>)</p>
<p>Open a file in read only mode using the encoding detected by <code>detect_encoding()</code>.</p>
<p>3.2 新版功能.</p>
<p><em>exception</em> <code>tokenize.TokenError</code></p>
<p>Raised when either a docstring or expression that may be split over several lines is not completed anywhere in the file, for example:</p>
<pre><code>"""Beginning of
docstring</code></pre><p>或者：</p>
<pre><code>[1,
 2,
 3</code></pre><p>Note that unclosed single-quoted strings do not cause an error to be raised. They are tokenized as <code>ERRORTOKEN</code>, followed by the tokenization of their contents.</p>
<h3 id="Command-Line-Usage-1"><a href="#Command-Line-Usage-1" class="headerlink" title="Command-Line Usage"></a>Command-Line Usage</h3><p>3.3 新版功能.</p>
<p>The <code>tokenize</code> module can be executed as a script from the command line. It is as simple as:</p>
<pre><code>python -m tokenize [-e] [filename.py]</code></pre><p>The following options are accepted:</p>
<pre><code>-h``,` `--help</code></pre><p>show this help message and exit</p>
<pre><code>-e``,` `--exact</code></pre><p>display token names using the exact type</p>
<p>If <code>filename.py</code> is specified its contents are tokenized to stdout. Otherwise, tokenization is performed on stdin.</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>Example of a script rewriter that transforms float literals into Decimal objects:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> tokenize <span class="token keyword">import</span> tokenize<span class="token punctuation">,</span> untokenize<span class="token punctuation">,</span> NUMBER<span class="token punctuation">,</span> STRING<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> OP
<span class="token keyword">from</span> io <span class="token keyword">import</span> BytesIO
<span class="token keyword">def</span> <span class="token function">decistmt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Substitute Decimals for floats in a string of statements.
    >>> from decimal import Decimal
    >>> s = 'print(+21.3e-5*-.1234/81.7)'
    >>> decistmt(s)
    "print (+Decimal ('21.3e-5')*-Decimal ('.1234')/Decimal ('81.7'))"
    The format of the exponent is inherited from the platform C library.
    Known cases are "e-007" (Windows) and "e-07" (not Windows).  Since
    we're only showing 12 digits, and the 13th isn't close to 5, the
    rest of the output should be platform-independent.
    >>> exec(s)  #doctest: +ELLIPSIS
    -3.21716034272e-0...7
    Output from calculations with Decimal should be identical across all
    platforms.
    >>> exec(decistmt(s))
    -3.217160342717258261933904529E-7
    """</span>
    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    g <span class="token operator">=</span> tokenize<span class="token punctuation">(</span>BytesIO<span class="token punctuation">(</span>s<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>readline<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># tokenize the string</span>
    <span class="token keyword">for</span> toknum<span class="token punctuation">,</span> tokval<span class="token punctuation">,</span> _<span class="token punctuation">,</span> _<span class="token punctuation">,</span> _ <span class="token keyword">in</span> g<span class="token punctuation">:</span>
        <span class="token keyword">if</span> toknum <span class="token operator">==</span> NUMBER <span class="token operator">and</span> <span class="token string">'.'</span> <span class="token keyword">in</span> tokval<span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># replace NUMBER tokens</span>
            result<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> <span class="token string">'Decimal'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span>OP<span class="token punctuation">,</span> <span class="token string">'('</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span>STRING<span class="token punctuation">,</span> repr<span class="token punctuation">(</span>tokval<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span>OP<span class="token punctuation">,</span> <span class="token string">')'</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>toknum<span class="token punctuation">,</span> tokval<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> untokenize<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Example of tokenizing from the command line. The script:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">say_hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Hello, World!"</span><span class="token punctuation">)</span>
say_hello<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>will be tokenized to the following output where the first column is the range of the line/column coordinates where the token is found, the second column is the name of the token, and the final column is the value of the token (if any)</p>
<pre><code>$ python -m tokenize hello.py
0,0-0,0:            ENCODING       'utf-8'
1,0-1,3:            NAME           'def'
1,4-1,13:           NAME           'say_hello'
1,13-1,14:          OP             '('
1,14-1,15:          OP             ')'
1,15-1,16:          OP             ':'
1,16-1,17:          NEWLINE        '\n'
2,0-2,4:            INDENT         '    '
2,4-2,9:            NAME           'print'
2,9-2,10:           OP             '('
2,10-2,25:          STRING         '"Hello, World!"'
2,25-2,26:          OP             ')'
2,26-2,27:          NEWLINE        '\n'
3,0-3,1:            NL             '\n'
4,0-4,0:            DEDENT         ''
4,0-4,9:            NAME           'say_hello'
4,9-4,10:           OP             '('
4,10-4,11:          OP             ')'
4,11-4,12:          NEWLINE        '\n'
5,0-5,0:            ENDMARKER      ''</code></pre><p>The exact token type names can be displayed using the <code>-e</code> option:</p>
<pre><code>$ python -m tokenize -e hello.py
0,0-0,0:            ENCODING       'utf-8'
1,0-1,3:            NAME           'def'
1,4-1,13:           NAME           'say_hello'
1,13-1,14:          LPAR           '('
1,14-1,15:          RPAR           ')'
1,15-1,16:          COLON          ':'
1,16-1,17:          NEWLINE        '\n'
2,0-2,4:            INDENT         '    '
2,4-2,9:            NAME           'print'
2,9-2,10:           LPAR           '('
2,10-2,25:          STRING         '"Hello, World!"'
2,25-2,26:          RPAR           ')'
2,26-2,27:          NEWLINE        '\n'
3,0-3,1:            NL             '\n'
4,0-4,0:            DEDENT         ''
4,0-4,9:            NAME           'say_hello'
4,9-4,10:           LPAR           '('
4,10-4,11:          RPAR           ')'
4,11-4,12:          NEWLINE        '\n'
5,0-5,0:            ENDMARKER      ''</code></pre><p>Example of tokenizing a file programmatically, reading unicode strings instead of bytes with <code>generate_tokens()</code>:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> tokenize
<span class="token keyword">with</span> tokenize<span class="token punctuation">.</span>open<span class="token punctuation">(</span><span class="token string">'hello.py'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    tokens <span class="token operator">=</span> tokenize<span class="token punctuation">.</span>generate_tokens<span class="token punctuation">(</span>f<span class="token punctuation">.</span>readline<span class="token punctuation">)</span>
    <span class="token keyword">for</span> token <span class="token keyword">in</span> tokens<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>或者通过 <code>tokenize()</code> 直接读取字节数据:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> tokenize
<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'hello.py'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    tokens <span class="token operator">=</span> tokenize<span class="token punctuation">.</span>tokenize<span class="token punctuation">(</span>f<span class="token punctuation">.</span>readline<span class="token punctuation">)</span>
    <span class="token keyword">for</span> token <span class="token keyword">in</span> tokens<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="tabnanny-—-模糊缩进检测"><a href="#tabnanny-—-模糊缩进检测" class="headerlink" title="tabnanny —- 模糊缩进检测"></a><code>tabnanny</code> —- 模糊缩进检测</h2><p><strong>源代码:</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/tabnanny.py" target="_blank" rel="noopener">Lib/tabnanny.py</a></p>
<hr>
<p>目前，该模块旨在作为脚本调用。但是可以使用下面描述的 <code>check()</code> 函数将其导入IDE。</p>
<p>注解</p>
<p>此模块提供的API可能会在将来的版本中更改；此类更改可能无法向后兼容。</p>
<p><code>tabnanny.check</code>(<em>file_or_dir</em>)</p>
<p>如果 <em>file_or_dir</em> 是目录而非符号链接，则递归地在名为 <em>file_or_dir</em> 的目录树中下行，沿途检查所有 <code>.py</code> 文件。 如果 <em>file_or_dir</em> 是一个普通 Python 源文件，将检查其中的空格相关问题。 诊断消息将使用 <code>print()</code> 函数写入到标准输出。</p>
<pre><code>tabnanny.verbose</code></pre><p>此旗标指明是否打印详细消息。 如果作为脚本调用则是通过 <code>-v</code> 选项来增加。</p>
<pre><code>tabnanny.filename_only</code></pre><p>此旗标指明是否只打印包含空格相关问题文件的文件名。 如果作为脚本调用则是通过 <code>-q</code> 选项来设为真值。</p>
<p><em>exception</em> <code>tabnanny.NannyNag</code></p>
<p>如果检测到模糊缩进则由 <code>process_tokens()</code> 引发。 在 <code>check()</code> 中捕获并处理。</p>
<p><code>tabnanny.process_tokens</code>(<em>tokens</em>)</p>
<p>此函数由 <code>check()</code> 用来处理由 <code>tokenize</code> 模块所生成的标记。</p>
<h2 id="pyclbr-—-Python-模块浏览器支持"><a href="#pyclbr-—-Python-模块浏览器支持" class="headerlink" title="pyclbr —- Python 模块浏览器支持"></a><code>pyclbr</code> —- Python 模块浏览器支持</h2><p><strong>源代码:</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/pyclbr.py" target="_blank" rel="noopener">Lib/pyclbr.py</a></p>
<hr>
<p><code>pyclbr</code> 模块提供了对于以 Python 编写的模块中定义的函数、类和方法的受限信息。 这种信息足够用来实现一个模块浏览器。 这种信息是从 Python 源代码中直接提取而非通过导入模块，因此该模块可以安全地用于不受信任的代码。 此限制使得非 Python 实现的模块无法使用此模块，包括所有标准和可选的扩展模块。</p>
<p><code>pyclbr.readmodule</code>(<em>module</em>, <em>path=None</em>)</p>
<p>返回一个将模块层级的类名映射到类描述器的字典。 如果可能，将会包括已导入基类的描述器。 形参 <em>module</em> 为要读取模块名称的字符串；它可能是某个包内部的模块名称。 <em>path</em> 如果给出则为添加到 <code>sys.path</code> 开头的目录路径序列，它会被用于定位模块的源代码。</p>
<p>此函数为原始接口，仅保留用于向下兼容。 它会返回以下内容的过滤版本。</p>
<p><code>pyclbr.readmodule_ex</code>(<em>module</em>, <em>path=None</em>)</p>
<p>返回一个基于字典的树，其中包含与模块中每个用 <code>def</code> 或 <code>class</code> 语句定义的函数和类相对应的函数和类描述器。 被返回的字典会将模块层级的函数和类名映射到它们的描述器。 嵌套的对象会被输入到它们的上级子目录中。 与 readmodule 一样，<em>module</em> 指明要读取的模块而 <em>path</em> 会被添加到 sys.path。 如果被读取的模块是一个包，则返回的字典将具有 <code>'__path__'</code> 键，其值是一个包含包搜索路径的列表。</p>
<p>3.7 新版功能: 嵌套定义的描述器。 它们通过新的子属性来访问。 每个定义都会有一个新的上级属性。</p>
<p>这些函数所返回的描述器是 Function 和 Class 类的实例。 用户不应自行创建这些类的实例。</p>
<h3 id="Function-对象"><a href="#Function-对象" class="headerlink" title="Function 对象"></a>Function 对象</h3><p><code>Function</code> 类的实例描述了由 def 语句所定义的函数。 它们具有下列属性:</p>
<pre><code>Function.file</code></pre><p>函数定义所在的文件名称。</p>
<pre><code>Function.module</code></pre><p>定义了所描述函数的模块名称。</p>
<pre><code>Function.name</code></pre><p>函数名称。</p>
<pre><code>Function.lineno</code></pre><p>定义在文件中起始位置的行号。</p>
<pre><code>Function.parent</code></pre><p>对于最高层级函数为 None。 对于嵌套函数则为上级函数。</p>
<p>3.7 新版功能.</p>
<pre><code>Function.children</code></pre><p>将名称映射到嵌套函数和类描述器的字典。</p>
<p>3.7 新版功能.</p>
<pre><code>Function.is_async</code></pre><p><code>True</code> 针对使用 <code>async</code> 前缀定义的函数，其他情况下为 <code>False</code>。</p>
<p>3.10 新版功能.</p>
<h3 id="Class-对象"><a href="#Class-对象" class="headerlink" title="Class 对象"></a>Class 对象</h3><p><code>Class</code> 类的实例描述了由 class 语句所定义的类。 它们具有与 Function 对象相同的属性以及两个额外属性。</p>
<pre><code>Class.file</code></pre><p>类定义所在的文件名称。</p>
<pre><code>Class.module</code></pre><p>定义了所描述类的模块名称。</p>
<pre><code>Class.name</code></pre><p>类名称。</p>
<pre><code>Class.lineno</code></pre><p>定义在文件中起始位置的行号。</p>
<pre><code>Class.parent</code></pre><p>对于最高层级类为 None。 对于嵌套类则为上级类。</p>
<p>3.7 新版功能.</p>
<pre><code>Class.children</code></pre><p>将名称映射到嵌套函数和类描述器的字典。</p>
<p>3.7 新版功能.</p>
<pre><code>Class.super</code></pre><p>一个 <code>Class</code> 对象的列表，它们描述了所描述类的直接基类。 被命名为超类但无法被 <code>readmodule_ex()</code> 发现的类会作为类名字符串而非 <code>Class</code> 对象列出。</p>
<pre><code>Class.methods</code></pre><p>一个将方法名映射到行号的字典。 此属性可从更新的子目录中获取，仅保留用于向下兼容。</p>
<h2 id="py-compile-—-编译-Python-源文件"><a href="#py-compile-—-编译-Python-源文件" class="headerlink" title="py_compile —- 编译 Python 源文件"></a><code>py_compile</code> —- 编译 Python 源文件</h2><p><strong>源代码:</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/py_compile.py" target="_blank" rel="noopener">Lib/py_compile.py</a></p>
<hr>
<p><code>py_compile</code> 模块提供了用来从源文件生成字节码的函数和另一个用于当模块源文件作为脚本被调用时的函数。</p>
<p>虽然不太常用，但这个函数在安装共享模块时还是很有用的，特别是当一些用户可能没有权限在包含源代码的目录中写字节码缓存文件时。</p>
<p><em>exception</em> <code>py_compile.PyCompileError</code></p>
<p>当编译文件过程中发生错误时，抛出的异常。</p>
<p><code>py_compile.compile</code>(<em>file</em>, <em>cfile=None</em>, <em>dfile=None</em>, <em>doraise=False</em>, <em>optimize=- 1</em>, <em>invalidation_mode=PycInvalidationMode.TIMESTAMP</em>, <em>quiet=0</em>)</p>
<p>将源文件编译成字节码并写出字节码缓存文件。 源代码从名为 <em>file</em> 的文件中加载。 字节码会写入到 <em>cfile<em>，默认为 [*</em>PEP 3147<strong>](<a href="https://www.python.org/dev/peps/pep-3147)/[" target="_blank" rel="noopener">https://www.python.org/dev/peps/pep-3147)/[</a></strong>PEP 488**](<a href="https://www.python.org/dev/peps/pep-0488" target="_blank" rel="noopener">https://www.python.org/dev/peps/pep-0488</a>) 路径，以 <code>.pyc</code> 结尾。 例如，如果 *file</em> 是 <code>/foo/bar/baz.py</code> 则对于 Python 3.2 <em>cfile</em> 将默认为 <code>/foo/bar/__pycache__/baz.cpython-32.pyc</code>。 如果指定了 <em>dfile*，则在错误信息中它将代替 *file</em> 作为源文件的名称。 如果 <em>doraise</em> 为真值，则当编译 <em>file</em> 遇到错误时将会引发 <code>PyCompileError</code>。 如果 <em>doraise</em> 为假值（默认），则将错误信息写入到 <code>sys.stderr</code>，但不会引发异常。 此函数返回编译后字节码文件的路径，即 <em>cfile</em> 所使用的值。</p>
<p><em>doraise</em> 和 <em>quiet</em> 参数确定在编译文件时如何处理错误。 如果 <em>quiet</em> 为 0 或 1，并且 <em>doraise</em> 为假值，则会启用默认行为：写入错误信息到 <code>sys.stderr</code>，并且函数将返回 <code>None</code> 而非一个路径。 如果 <em>doraise</em> 为真值，则将改为引发 <code>PyCompileError</code>。 但是如果 <em>quiet</em> 为 2，则不会写入消息，并且 <em>doraise</em> 也不会有效果。</p>
<p>如果 <em>cfile</em> 所表示（显式指定或计算得出）的路径为符号链接或非常规文件，则将引发 <code>FileExistsError</code>。 此行为是用来警告如果允许写入编译后字节码文件到这些路径则导入操作将会把它们转为常规文件。 这是使用文件重命名来将最终编译后字节码文件放置到位以防止并发文件写入问题的导入操作的附带效果。</p>
<p><em>optimize</em> 控制优化级别并会被传给内置的 <code>compile()</code> 函数。 默认值 <code>-1</code> 表示选择当前解释器的优化级别。</p>
<p><em>invalidation_mode</em> 应当是 <code>PycInvalidationMode</code> 枚举的成员，它控制在运行时如何让已生成的字节码缓存失效。 如果设置了 <code>SOURCE_DATE_EPOCH</code> 环境变量则默认值为 <code>PycInvalidationMode.CHECKED_HASH</code>，否则默认值为 <code>PycInvalidationMode.TIMESTAMP</code>。</p>
<p>在 3.2 版更改: 将 <em>cfile</em> 的默认值改成与 <a href="https://www.python.org/dev/peps/pep-3147" target="_blank" rel="noopener"><strong>PEP 3147</strong></a> 兼容。 之前的默认值是 <em>file</em> + <code>'c'</code> (如果启用优化则为 <code>'o'</code>)。 同时也添加了 <em>optimize</em> 形参。</p>
<p>在 3.4 版更改: 将代码更改为使用 <code>importlib</code> 执行字节码缓存文件写入。 这意味着文件创建/写入的语义现在与 <code>importlib</code> 所做的相匹配，例如权限、写入和移动语义等等。 同时也添加了当 <em>cfile</em> 为符号链接或非常规文件时引发 <code>FileExistsError</code> 的预警设置。</p>
<p>在 3.7 版更改: <em>invalidation_mode</em> 形参是根据 <a href="https://www.python.org/dev/peps/pep-0552" target="_blank" rel="noopener"><strong>PEP 552</strong></a> 的描述添加的。 如果设置了 <code>SOURCE_DATE_EPOCH</code> 环境变量，<em>invalidation_mode</em> 将被强制设为 <code>PycInvalidationMode.CHECKED_HASH</code>。</p>
<p>在 3.7.2 版更改: <code>SOURCE_DATE_EPOCH</code> 环境变量不会再覆盖 <em>invalidation_mode</em> 参数的值，而改为确定其默认值。</p>
<p>在 3.8 版更改: 增加了 <em>quiet</em> 形参。</p>
<p><em>class</em> <code>py_compile.PycInvalidationMode</code></p>
<p>一个由可用方法组成的枚举，解释器可以用来确定字节码文件是否与源文件保持一致。 <code>.pyc</code> 文件在其标头中指明了所需的失效模式。 Python 在运行时如何让 <code>.pyc</code> 文件失效的更多信息。</p>
<p>3.7 新版功能.</p>
<ul>
<li><p><code>TIMESTAMP</code></p>
<p><code>.pyc</code> 文件包括时间戳和源文件的大小，Python 将在运行时将其与源文件的元数据进行比较以确定 <code>.pyc</code> 文件是否需要重新生成。</p>
</li>
<li><p><code>CHECKED_HASH</code></p>
<p><code>.pyc</code> 文件包括源文件内容的哈希值，Python 将在运行时将其与源文件内容进行比较以确定 <code>.pyc</code> 文件是否需要重新生成。</p>
</li>
<li><p><code>UNCHECKED_HASH</code></p>
<p>类似于 <code>CHECKED_HASH</code>，<code>.pyc</code> 文件包括源文件内容的哈希值。 但是，Python 将在运行时假定 <code>.pyc</code> 文件是最新的而完全不会将 <code>.pyc</code> 与源文件进行验证。</p>
<p>此选项适用于 <code>.pycs</code> 由 Python 以外的某个系统例如构建系统来确保最新的情况。</p>
</li>
</ul>
<h3 id="命令行接口"><a href="#命令行接口" class="headerlink" title="命令行接口"></a>命令行接口</h3><p>这个模块可作为脚本发起调用以编译多个源文件。 在 <em>filenames</em> 中指定的文件会被编译并将结果字节码以普通方式进行缓存。 这个程序不会搜索目录结构来定位源文件；它只编译显式指定的文件。 如果某个文件无法被编译则退出状态为非零值。</p>
<pre><code>&lt;file&gt;` `... &lt;fileN&gt;
-</code></pre><p>位置参数是要编译的文件。 如果 <code>-</code> 是唯一的形参，则文件列表将从标准输入获取。</p>
<pre><code>-q``,` `--quiet</code></pre><p>屏蔽错误输出。</p>
<p>在 3.2 版更改: 添加了对 <code>-</code> 的支持。</p>
<p>在 3.10 版更改: 添加了对 <code>-q</code> 的支持。</p>
<h2 id="compileall-—-Byte-compile-Python-libraries"><a href="#compileall-—-Byte-compile-Python-libraries" class="headerlink" title="compileall —- Byte-compile Python libraries"></a><code>compileall</code> —- Byte-compile Python libraries</h2><p><strong>Source code:</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/compileall.py" target="_blank" rel="noopener">Lib/compileall.py</a></p>
<hr>
<p>This module provides some utility functions to support installing Python libraries. These functions compile Python source files in a directory tree. This module can be used to create the cached byte-code files at library installation time, which makes them available for use even by users who don’t have write permission to the library directories.</p>
<h3 id="Command-line-use"><a href="#Command-line-use" class="headerlink" title="Command-line use"></a>Command-line use</h3><p>This module can work as a script (using <strong>python -m compileall</strong>) to compile Python sources.</p>
<pre><code>directory` `...
file` `...</code></pre><p>Positional arguments are files to compile or directories that contain source files, traversed recursively. If no argument is given, behave as if the command line was <code>-l &lt;directories from sys.path&gt;</code>.</p>
<pre><code>-l</code></pre><p>Do not recurse into subdirectories, only compile source code files directly contained in the named or implied directories.</p>
<pre><code>-f</code></pre><p>Force rebuild even if timestamps are up-to-date.</p>
<pre><code>-q</code></pre><p>Do not print the list of files compiled. If passed once, error messages will still be printed. If passed twice (<code>-qq</code>), all output is suppressed.</p>
<pre><code>-d` `destdir</code></pre><p>Directory prepended to the path to each file being compiled. This will appear in compilation time tracebacks, and is also compiled in to the byte-code file, where it will be used in tracebacks and other messages in cases where the source file does not exist at the time the byte-code file is executed.</p>
<pre><code>-s` `strip_prefix
-p` `prepend_prefix</code></pre><p>Remove (<code>-s</code>) or append (<code>-p</code>) the given prefix of paths recorded in the <code>.pyc</code> files. Cannot be combined with <code>-d</code>.</p>
<pre><code>-x` `regex</code></pre><p>regex is used to search the full path to each file considered for compilation, and if the regex produces a match, the file is skipped.</p>
<pre><code>-i` `list</code></pre><p>Read the file <code>list</code> and add each line that it contains to the list of files and directories to compile. If <code>list</code> is <code>-</code>, read lines from <code>stdin</code>.</p>
<pre><code>-b</code></pre><p>Write the byte-code files to their legacy locations and names, which may overwrite byte-code files created by another version of Python. The default is to write files to their <a href="https://www.python.org/dev/peps/pep-3147" target="_blank" rel="noopener"><strong>PEP 3147</strong></a> locations and names, which allows byte-code files from multiple versions of Python to coexist.</p>
<pre><code>-r</code></pre><p>Control the maximum recursion level for subdirectories. If this is given, then <code>-l</code> option will not be taken into account. <strong>python -m compileall &lt;directory&gt; -r 0</strong> is equivalent to <strong>python -m compileall &lt;directory&gt; -l</strong>.</p>
<pre><code>-j` `N</code></pre><p>Use <em>N</em> workers to compile the files within the given directory. If <code>0</code> is used, then the result of <code>os.cpu_count()</code> will be used.</p>
<pre><code>--invalidation-mode` `[timestamp|checked-hash|unchecked-hash]</code></pre><p>Control how the generated byte-code files are invalidated at runtime. The <code>timestamp</code> value, means that <code>.pyc</code> files with the source timestamp and size embedded will be generated. The <code>checked-hash</code> and <code>unchecked-hash</code> values cause hash-based pycs to be generated. Hash-based pycs embed a hash of the source file contents rather than a timestamp. See 已缓存字节码的失效 for more information on how Python validates bytecode cache files at runtime. The default is <code>timestamp</code> if the <code>SOURCE_DATE_EPOCH</code> environment variable is not set, and <code>checked-hash</code> if the <code>SOURCE_DATE_EPOCH</code> environment variable is set.</p>
<pre><code>-o` `level</code></pre><p>Compile with the given optimization level. May be used multiple times to compile for multiple levels at a time (for example, <code>compileall -o 1 -o 2</code>).</p>
<pre><code>-e` `dir</code></pre><p>Ignore symlinks pointing outside the given directory.</p>
<pre><code>--hardlink-dupes</code></pre><p>If two <code>.pyc</code> files with different optimization level have the same content, use hard links to consolidate duplicate files.</p>
<p>在 3.2 版更改: Added the <code>-i</code>, <code>-b</code> and <code>-h</code> options.</p>
<p>在 3.5 版更改: Added the <code>-j</code>, <code>-r</code>, and <code>-qq</code> options. <code>-q</code> option was changed to a multilevel value. <code>-b</code> will always produce a byte-code file ending in <code>.pyc</code>, never <code>.pyo</code>.</p>
<p>在 3.7 版更改: Added the <code>--invalidation-mode</code> option.</p>
<p>在 3.9 版更改: Added the <code>-s</code>, <code>-p</code>, <code>-e</code> and <code>--hardlink-dupes</code> options. Raised the default recursion limit from 10 to <code>sys.getrecursionlimit()</code>. Added the possibility to specify the <code>-o</code> option multiple times.</p>
<p>There is no command-line option to control the optimization level used by the <code>compile()</code> function, because the Python interpreter itself already provides the option: <strong>python -O -m compileall</strong>.</p>
<p>Similarly, the <code>compile()</code> function respects the <code>sys.pycache_prefix</code> setting. The generated bytecode cache will only be useful if <code>compile()</code> is run with the same <code>sys.pycache_prefix</code> (if any) that will be used at runtime.</p>
<h3 id="Public-functions"><a href="#Public-functions" class="headerlink" title="Public functions"></a>Public functions</h3><p><code>compileall.compile_dir</code>(<em>dir</em>, <em>maxlevels=sys.getrecursionlimit()</em>, <em>ddir=None</em>, <em>force=False</em>, <em>rx=None</em>, <em>quiet=0</em>, <em>legacy=False</em>, <em>optimize=- 1</em>, <em>workers=1</em>, <em>invalidation_mode=None</em>, <em>**,</em> stripdir=None<em>,</em> prependdir=None<em>,</em> limit_sl_dest=None<em>,</em> hardlink_dupes=False*)</p>
<p>Recursively descend the directory tree named by <em>dir</em>, compiling all <code>.py</code> files along the way. Return a true value if all the files compiled successfully, and a false value otherwise.</p>
<p>The <em>maxlevels</em> parameter is used to limit the depth of the recursion; it defaults to <code>sys.getrecursionlimit()</code>.</p>
<p>If <em>ddir</em> is given, it is prepended to the path to each file being compiled for use in compilation time tracebacks, and is also compiled in to the byte-code file, where it will be used in tracebacks and other messages in cases where the source file does not exist at the time the byte-code file is executed.</p>
<p>If <em>force</em> is true, modules are re-compiled even if the timestamps are up to date.</p>
<p>If <em>rx</em> is given, its <code>search</code> method is called on the complete path to each file considered for compilation, and if it returns a true value, the file is skipped. This can be used to exclude files matching a regular expression, given as a re.Pattern object.</p>
<p>If <em>quiet</em> is <code>False</code> or <code>0</code> (the default), the filenames and other information are printed to standard out. Set to <code>1</code>, only errors are printed. Set to <code>2</code>, all output is suppressed.</p>
<p>If <em>legacy</em> is true, byte-code files are written to their legacy locations and names, which may overwrite byte-code files created by another version of Python. The default is to write files to their <a href="https://www.python.org/dev/peps/pep-3147" target="_blank" rel="noopener"><strong>PEP 3147</strong></a> locations and names, which allows byte-code files from multiple versions of Python to coexist.</p>
<p><em>optimize</em> specifies the optimization level for the compiler. It is passed to the built-in <code>compile()</code> function. Accepts also a sequence of optimization levels which lead to multiple compilations of one <code>.py</code> file in one call.</p>
<p>The argument <em>workers</em> specifies how many workers are used to compile files in parallel. The default is to not use multiple workers. If the platform can’t use multiple workers and <em>workers</em> argument is given, then sequential compilation will be used as a fallback. If <em>workers</em> is 0, the number of cores in the system is used. If <em>workers</em> is lower than <code>0</code>, a <code>ValueError</code> will be raised.</p>
<p><em>invalidation_mode</em> should be a member of the <code>py_compile.PycInvalidationMode</code> enum and controls how the generated pycs are invalidated at runtime.</p>
<p>The <em>stripdir</em>, <em>prependdir</em> and <em>limit_sl_dest</em> arguments correspond to the <code>-s</code>, <code>-p</code> and <code>-e</code> options described above. They may be specified as <code>str</code>, <code>bytes</code> or <code>os.PathLike</code>.</p>
<p>If <em>hardlink_dupes</em> is true and two <code>.pyc</code> files with different optimization level have the same content, use hard links to consolidate duplicate files.</p>
<p>在 3.2 版更改: Added the <em>legacy</em> and <em>optimize</em> parameter.</p>
<p>在 3.5 版更改: Added the <em>workers</em> parameter.</p>
<p>在 3.5 版更改: <em>quiet</em> parameter was changed to a multilevel value.</p>
<p>在 3.5 版更改: The <em>legacy</em> parameter only writes out <code>.pyc</code> files, not <code>.pyo</code> files no matter what the value of <em>optimize</em> is.</p>
<p>在 3.6 版更改: 接受一个 path-like object。</p>
<p>在 3.7 版更改: The <em>invalidation_mode</em> parameter was added.</p>
<p>在 3.7.2 版更改: The <em>invalidation_mode</em> parameter’s default value is updated to None.</p>
<p>在 3.8 版更改: Setting <em>workers</em> to 0 now chooses the optimal number of cores.</p>
<p>在 3.9 版更改: Added <em>stripdir</em>, <em>prependdir</em>, <em>limit_sl_dest</em> and <em>hardlink_dupes</em> arguments. Default value of <em>maxlevels</em> was changed from <code>10</code> to <code>sys.getrecursionlimit()</code></p>
<p><code>compileall.compile_file</code>(<em>fullname</em>, <em>ddir=None</em>, <em>force=False</em>, <em>rx=None</em>, <em>quiet=0</em>, <em>legacy=False</em>, <em>optimize=- 1</em>, <em>invalidation_mode=None</em>, <em>**,</em> stripdir=None<em>,</em> prependdir=None<em>,</em> limit_sl_dest=None<em>,</em> hardlink_dupes=False*)</p>
<p>Compile the file with path <em>fullname</em>. Return a true value if the file compiled successfully, and a false value otherwise.</p>
<p>If <em>ddir</em> is given, it is prepended to the path to the file being compiled for use in compilation time tracebacks, and is also compiled in to the byte-code file, where it will be used in tracebacks and other messages in cases where the source file does not exist at the time the byte-code file is executed.</p>
<p>If <em>rx</em> is given, its <code>search</code> method is passed the full path name to the file being compiled, and if it returns a true value, the file is not compiled and <code>True</code> is returned. This can be used to exclude files matching a regular expression, given as a re.Pattern object.</p>
<p>If <em>quiet</em> is <code>False</code> or <code>0</code> (the default), the filenames and other information are printed to standard out. Set to <code>1</code>, only errors are printed. Set to <code>2</code>, all output is suppressed.</p>
<p>If <em>legacy</em> is true, byte-code files are written to their legacy locations and names, which may overwrite byte-code files created by another version of Python. The default is to write files to their <a href="https://www.python.org/dev/peps/pep-3147" target="_blank" rel="noopener"><strong>PEP 3147</strong></a> locations and names, which allows byte-code files from multiple versions of Python to coexist.</p>
<p><em>optimize</em> specifies the optimization level for the compiler. It is passed to the built-in <code>compile()</code> function. Accepts also a sequence of optimization levels which lead to multiple compilations of one <code>.py</code> file in one call.</p>
<p><em>invalidation_mode</em> should be a member of the <code>py_compile.PycInvalidationMode</code> enum and controls how the generated pycs are invalidated at runtime.</p>
<p>The <em>stripdir</em>, <em>prependdir</em> and <em>limit_sl_dest</em> arguments correspond to the <code>-s</code>, <code>-p</code> and <code>-e</code> options described above. They may be specified as <code>str</code>, <code>bytes</code> or <code>os.PathLike</code>.</p>
<p>If <em>hardlink_dupes</em> is true and two <code>.pyc</code> files with different optimization level have the same content, use hard links to consolidate duplicate files.</p>
<p>3.2 新版功能.</p>
<p>在 3.5 版更改: <em>quiet</em> parameter was changed to a multilevel value.</p>
<p>在 3.5 版更改: The <em>legacy</em> parameter only writes out <code>.pyc</code> files, not <code>.pyo</code> files no matter what the value of <em>optimize</em> is.</p>
<p>在 3.7 版更改: The <em>invalidation_mode</em> parameter was added.</p>
<p>在 3.7.2 版更改: The <em>invalidation_mode</em> parameter’s default value is updated to None.</p>
<p>在 3.9 版更改: Added <em>stripdir</em>, <em>prependdir</em>, <em>limit_sl_dest</em> and <em>hardlink_dupes</em> arguments.</p>
<p><code>compileall.compile_path</code>(<em>skip_curdir=True</em>, <em>maxlevels=0</em>, <em>force=False</em>, <em>quiet=0</em>, <em>legacy=False</em>, <em>optimize=- 1</em>, <em>invalidation_mode=None</em>)</p>
<p>Byte-compile all the <code>.py</code> files found along <code>sys.path</code>. Return a true value if all the files compiled successfully, and a false value otherwise.</p>
<p>If <em>skip_curdir</em> is true (the default), the current directory is not included in the search. All other parameters are passed to the <code>compile_dir()</code> function. Note that unlike the other compile functions, <code>maxlevels</code> defaults to <code>0</code>.</p>
<p>在 3.2 版更改: Added the <em>legacy</em> and <em>optimize</em> parameter.</p>
<p>在 3.5 版更改: <em>quiet</em> parameter was changed to a multilevel value.</p>
<p>在 3.5 版更改: The <em>legacy</em> parameter only writes out <code>.pyc</code> files, not <code>.pyo</code> files no matter what the value of <em>optimize</em> is.</p>
<p>在 3.7 版更改: The <em>invalidation_mode</em> parameter was added.</p>
<p>在 3.7.2 版更改: The <em>invalidation_mode</em> parameter’s default value is updated to None.</p>
<p>To force a recompile of all the <code>.py</code> files in the <code>Lib/</code> subdirectory and all its subdirectories:</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> compileall
compileall<span class="token punctuation">.</span>compile_dir<span class="token punctuation">(</span><span class="token string">'Lib/'</span><span class="token punctuation">,</span> force<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># Perform same compilation, excluding files in .svn directories.</span>
<span class="token keyword">import</span> re
compileall<span class="token punctuation">.</span>compile_dir<span class="token punctuation">(</span><span class="token string">'Lib/'</span><span class="token punctuation">,</span> rx<span class="token operator">=</span>re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span>r<span class="token string">'[/\\][.]svn'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> force<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># pathlib.Path objects can also be used.</span>
<span class="token keyword">import</span> pathlib
compileall<span class="token punctuation">.</span>compile_dir<span class="token punctuation">(</span>pathlib<span class="token punctuation">.</span>Path<span class="token punctuation">(</span><span class="token string">'Lib/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> force<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="dis-—-Python-字节码反汇编器"><a href="#dis-—-Python-字节码反汇编器" class="headerlink" title="dis —- Python 字节码反汇编器"></a><code>dis</code> —- Python 字节码反汇编器</h2><p><strong>Source code:</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/dis.py" target="_blank" rel="noopener">Lib/dis.py</a></p>
<ul>
<li><a href="https://docs.python.org/zh-cn/3.10/library/dis.html" target="_blank" rel="noopener"><code>dis</code> — Python 字节码反汇编器</a></li>
</ul>
<h2 id="pickletools-—-pickle-开发者工具集"><a href="#pickletools-—-pickle-开发者工具集" class="headerlink" title="pickletools —- pickle 开发者工具集"></a><code>pickletools</code> —- pickle 开发者工具集</h2><p><strong>源代码:</strong> <a href="https://github.com/python/cpython/tree/3.10/Lib/pickletools.py" target="_blank" rel="noopener">Lib/pickletools.py</a></p>
<hr>
<p>此模块包含与 <code>pickle</code> 模块内部细节有关的多个常量，一些关于具体实现的详细注释，以及一些能够分析封存数据的有用函数。 此模块的内容对需要操作 <code>pickle</code> 的 Python 核心开发者来说很有用处；<code>pickle</code> 的一般用户则可能会感觉 <code>pickletools</code> 模块与他们无关。</p>
<h3 id="命令行语法"><a href="#命令行语法" class="headerlink" title="命令行语法"></a>命令行语法</h3><p>3.2 新版功能.</p>
<p>当从命令行发起调用时，<code>python -m pickletools</code> 将对一个或更多 pickle 文件的内容进行拆解。 请注意如果你查看 pickle 中保存的 Python 对象而非 pickle 格式的细节，你可能需要改用 <code>-m pickle</code>。 但是，当你想检查的 pickle 文件来自某个不受信任的源时，<code>-m pickletools</code> 是更安全的选择，因为它不会执行 pickle 字节码。</p>
<p>例如，对于一个封存在文件 <code>x.pickle</code> 中的元组 <code>(1, 2)</code>:</p>
<pre><code>$ python -m pickle x.pickle
(1, 2)
$ python -m pickletools x.pickle
    0: \x80 PROTO      3
    2: K    BININT1    1
    4: K    BININT1    2
    6: \x86 TUPLE2
    7: q    BINPUT     0
    9: .    STOP
highest protocol among opcodes = 2</code></pre><h4 id="命令行选项"><a href="#命令行选项" class="headerlink" title="命令行选项"></a>命令行选项</h4><pre><code>-a``,` `--annotate</code></pre><p>使用简短的操作码描述来标注每一行。</p>
<pre><code>-o``,` `--output``=&lt;file&gt;</code></pre><p>输出应当写入到的文件名称。</p>
<pre><code>-l``,` `--indentlevel``=&lt;num&gt;</code></pre><p>一个新的 MARK 层级所需缩进的空格数。</p>
<pre><code>-m``,` `--memo</code></pre><p>当反汇编多个对象时，保留各个反汇编的备忘记录。</p>
<pre><code>-p``,` `--preamble``=&lt;preamble&gt;</code></pre><p>当指定一个以上的 pickle 文件时，在每次反汇编之前打印给定的前言。</p>
<h3 id="编程接口"><a href="#编程接口" class="headerlink" title="编程接口"></a>编程接口</h3><p><code>pickletools.dis</code>(<em>pickle</em>, <em>out=None</em>, <em>memo=None</em>, <em>indentlevel=4</em>, <em>annotate=0</em>)</p>
<p>将 pickle 的符号化反汇编数据输出到文件类对象 <em>out*，默认为 <code>sys.stdout</code>。 *pickle</em> 可以是一个字符串或一个文件类对象。 <em>memo</em> 可以是一个将被用作 pickle 的备忘记录的 Python 字典；它可被用来对由同一封存器创建的多个封存对象执行反汇编。 由 <code>MARK</code> 操作码指明的每个连续级别将会缩进 <em>indentlevel</em> 个空格。 如果为 <em>annotate</em> 指定了一个非零值，则输出中的每个操作码将以一个简短描述来标注。 <em>annotate</em> 的值会被用作标注所应开始的列的提示。</p>
<p>3.2 新版功能: <em>annotate</em> 参数。</p>
<p><code>pickletools.genops</code>(<em>pickle</em>)</p>
<p>提供包含 pickle 中所有操作码的 iterator，返回一个 <code>(opcode, arg, pos)</code> 三元组的序列。 <em>opcode</em> 是 <code>OpcodeInfo</code> 类的一个实例；<em>arg</em> 是 Python 对象形式的 opcode 参数的已解码值；<em>pos</em> 是 opcode 所在的位置。 <em>pickle</em> 可以是一个字符串或一个文件类对象。</p>
<p><code>pickletools.optimize</code>(<em>picklestring</em>)</p>
<p>在消除未使用的 <code>PUT</code> 操作码之后返回一个新的等效 pickle 字符串。 优化后的 pickle 将更为简短，耗费更为的传输时间，要求更少的存储空间并能更高效地解封。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io" rel="external nofollow noreferrer">杰克成</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io/posts/Leecode-Record.html">https://jackhcc.github.io/posts/Leecode-Record.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Algorithm/">
                                    <span class="chip bg-color">Algorithm</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/aliqr.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/wxqr.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '3821a0bbb773038a51fc',
        clientSecret: '4b30b507d67ec5497ec0e77f43f80cb3e0d7dd3a',
        repo: 'JackHCC.github.io',
        owner: 'JackHCC',
        admin: "JackHCC",
        id: '2021-10-24T10-58-46',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/blog-python26.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/13.jpg" class="responsive-img" alt="Python-Awesome Project">
                        
                        <span class="card-title">Python-Awesome Project</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Python小项目合集
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-10-25
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Python/" class="post-category">
                                    Python
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Python/">
                        <span class="chip bg-color">Python</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/dl-series15.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/14.jpg" class="responsive-img" alt="DL专栏15-损失函数汇总">
                        
                        <span class="card-title">DL专栏15-损失函数汇总</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            常见的损失函数一览
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-10-23
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Deep-Learning/" class="post-category">
                                    Deep Learning
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Loss-Function/">
                        <span class="chip bg-color">Loss Function</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('4'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">3133.8k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "2";
                    var startDate = "27";
                    var startHour = "6";
                    var startMinute = "30";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/JackHCC" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:jackcc0701@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/profile.php?id=100046343443643" class="tooltipped" target="_blank" data-tooltip="关注我的Facebook: https://www.facebook.com/profile.php?id=100046343443643" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>



    <a href="https://twitter.com/JackChe66021834" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/JackChe66021834" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2508074836" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2508074836" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/6885584679" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/6885584679" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/matery.js"></script>

    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script type="text/javascript" src="/js/fireworks.js"></script>

    <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>'); }
    </script>

    <!-- weather -->
	<script type="text/javascript">
	WIDGET = {FID: 'TToslpmkVO'}
	</script>
	<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>


    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

    
    
    <script async src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script src="//code.tidio.co/kqhlkxviiccyoa0czpfpu4ijuey9hfre.js"></script>
        <script> 
            $(document).ready(function () {
                setInterval(change_Tidio, 50);  
                function change_Tidio() { 
                    var tidio=$("#tidio-chat iframe");
                    if(tidio.css("display")=="block"&& $(window).width()>977 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" &&$(window).width()>977)>0? "-40px" : ($("div.toc-title").length&&$(window).width()>977)>0?"85px":"20px";   
                        document.getElementById("tidio-chat-iframe").style.right="-15px";   
                        document.getElementById("tidio-chat-iframe").style.height=parseInt(tidio.css("height"))>=520?"520px":tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    } 
                    else if(tidio.css("display")=="block"&&$(window).width()>601 &&$(window).width()<992 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && 601< $(window).width()<992)>0? "-40px":"20px" ;   
                        document.getElementById("tidio-chat-iframe").style.right="-15px"; 
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))<230){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && $(window).width()<601)>0? "-10px":"45px" ;   
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    if( tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))>=230){
                        document.getElementById("tidio-chat-iframe").style.zIndex="998";
                    }
                } 
            }); 
        </script>
    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/canvas-nest.js"></script>
    

    

    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

        <script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script>
        <script>
        $('a').each(function() {
          const $this = $(this);
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'your_domain' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });
        </script><script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>

</html>

