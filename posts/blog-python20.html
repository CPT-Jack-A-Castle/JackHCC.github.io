<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Python Key Knowledge Summary, JackHCC">
    <meta name="description" content="Python重点知识总结">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Python Key Knowledge Summary | JackHCC</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my.css">
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="JackHCC" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-hopscotch.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">JackHCC</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">JackHCC</div>
        <div class="logo-desc">
            
            Make the world betterrrr!!!
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/JackHCC/JackHCC.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/JackHCC/JackHCC.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/17.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Python Key Knowledge Summary</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 30px;
        bottom: 146px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Python/">
                                <span class="chip bg-color">Python</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Python/" class="post-category">
                                Python
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-09-27
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-09-27
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    7.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    32 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h3 id="Py2-VS-Py3"><a href="#Py2-VS-Py3" class="headerlink" title="Py2 VS Py3"></a><strong>Py2 VS Py3</strong></h3><ul>
<li><p>print成为了函数，python2是关键字</p>
</li>
<li><p>不再有unicode对象，默认str就是unicode</p>
</li>
<li><p>python3除号返回浮点数</p>
</li>
<li><p>没有了long类型</p>
</li>
<li><p>xrange不存在，range替代了xrange</p>
</li>
<li><p>可以使用中文定义函数名变量名</p>
</li>
<li><p>高级解包 和*解包</p>
</li>
<li><p>限定关键字参数 *后的变量必须加入名字=值</p>
</li>
<li><p>raise from</p>
</li>
<li><p>iteritems移除变成items()</p>
</li>
<li><p>yield from 链接子生成器</p>
</li>
<li><p>asyncio,async/await原生协程支持异步编程</p>
</li>
<li><p>新增 enum, mock, ipaddress, concurrent.futures, asyncio urllib, selector</p>
</li>
<li><ul>
<li>不同枚举类间不能进行比较</li>
<li>同一枚举类间只能进行相等的比较</li>
<li>枚举类的使用(编号默认从1开始)</li>
<li>为了避免枚举类中相同枚举值的出现，可以使用@unique装饰枚举类</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#枚举的注意事项</span>
<span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum

<span class="token keyword">class</span> <span class="token class-name">COLOR</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>
    YELLOW<span class="token operator">=</span><span class="token number">1</span>
<span class="token comment" spellcheck="true">#YELLOW=2#会报错</span>
    GREEN<span class="token operator">=</span><span class="token number">1</span><span class="token comment" spellcheck="true">#不会报错,GREEN可以看作是YELLOW的别名</span>
    BLACK<span class="token operator">=</span><span class="token number">3</span>
    RED<span class="token operator">=</span><span class="token number">4</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>COLOR<span class="token punctuation">.</span>GREEN<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#COLOR.YELLOW,还是会打印出YELLOW</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> COLOR<span class="token punctuation">:</span><span class="token comment" spellcheck="true">#遍历一下COLOR并不会有GREEN</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">#COLOR.YELLOW\nCOLOR.BLACK\nCOLOR.RED\n怎么把别名遍历出来</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> COLOR<span class="token punctuation">.</span>__members__<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># output:('YELLOW', &lt;COLOR.YELLOW: 1>)\n('GREEN', &lt;COLOR.YELLOW: 1>)\n('BLACK', &lt;COLOR.BLACK: 3>)\n('RED', &lt;COLOR.RED: 4>)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> COLOR<span class="token punctuation">.</span>__members__<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># output:YELLOW\nGREEN\nBLACK\nRED</span>

<span class="token comment" spellcheck="true">#枚举转换</span>
<span class="token comment" spellcheck="true">#最好在数据库存取使用枚举的数值而不是使用标签名字字符串</span>
<span class="token comment" spellcheck="true">#在代码里面使用枚举类</span>
a<span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>COLOR<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># output:COLOR.YELLOW</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="py2-3-转换工具"><a href="#py2-3-转换工具" class="headerlink" title="py2/3 转换工具"></a><strong>py2/3 转换工具</strong></h3><ul>
<li>six模块：兼容pyton2和pyton3的模块</li>
<li>2to3工具：改变代码语法版本</li>
<li><strong>future</strong>：使用下一版本的功能</li>
</ul>
<h3 id="常用的库"><a href="#常用的库" class="headerlink" title="常用的库"></a><strong>常用的库</strong></h3><ul>
<li><p>必须知道的collections</p>
<p><a href="https://segmentfault.com/a/1190000017385799" target="_blank" rel="noopener">https://segmentfault.com/a/1190000017385799</a></p>
</li>
<li><p>python排序操作及heapq模块</p>
<p><a href="https://segmentfault.com/a/1190000017383322" target="_blank" rel="noopener">https://segmentfault.com/a/1190000017383322</a></p>
</li>
<li><p>itertools模块超实用方法</p>
<p><a href="https://segmentfault.com/a/1190000017416590" target="_blank" rel="noopener">https://segmentfault.com/a/1190000017416590</a></p>
</li>
</ul>
<h3 id="不常用但很重要的库"><a href="#不常用但很重要的库" class="headerlink" title="不常用但很重要的库"></a><strong>不常用但很重要的库</strong></h3><ul>
<li><p>dis(代码字节码分析)</p>
</li>
<li><p>inspect(生成器状态)</p>
</li>
<li><p>cProfile(性能分析)</p>
</li>
<li><p>bisect(维护有序列表)</p>
</li>
<li><p>fnmatch</p>
</li>
<li><ul>
<li>fnmatch(string,”*.txt”) #win下不区分大小写</li>
<li>fnmatch根据系统决定</li>
<li>fnmatchcase完全区分大小写</li>
</ul>
</li>
<li><p>timeit(代码执行时间)</p>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">def</span> <span class="token function">isLen</span><span class="token punctuation">(</span>strString<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment" spellcheck="true">#还是应该使用三元表达式，更快</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span> <span class="token keyword">if</span> len<span class="token punctuation">(</span>strString<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">6</span> <span class="token keyword">else</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">isLen1</span><span class="token punctuation">(</span>strString<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment" spellcheck="true">#这里注意false和true的位置</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token punctuation">(</span>strString<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">6</span><span class="token punctuation">]</span>
    <span class="token keyword">import</span> timeit
    <span class="token keyword">print</span><span class="token punctuation">(</span>timeit<span class="token punctuation">.</span>timeit<span class="token punctuation">(</span><span class="token string">'isLen1("5fsdfsdfsaf")'</span><span class="token punctuation">,</span>setup<span class="token operator">=</span><span class="token string">"from __main__ import isLen1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>timeit<span class="token punctuation">.</span>timeit<span class="token punctuation">(</span><span class="token string">'isLen("5fsdfsdfsaf")'</span><span class="token punctuation">,</span>setup<span class="token operator">=</span><span class="token string">"from __main__ import isLen"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>contextlib</p>
</li>
<li><ul>
<li>@contextlib.contextmanager使生成器函数变成一个上下文管理器</li>
</ul>
</li>
<li><p>types(包含了标准解释器定义的所有类型的类型对象,可以将生成器函数修饰为异步模式)</p>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">import</span> types
    types<span class="token punctuation">.</span>coroutine <span class="token comment" spellcheck="true">#相当于实现了__await__</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>html(实现对html的转义)</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">import</span> html
    html<span class="token punctuation">.</span>escape<span class="token punctuation">(</span><span class="token string">"&lt;h1>I'm Jim&lt;/h1>"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># output:'&amp;lt;h1&amp;gt;I&amp;#x27;m Jim&amp;lt;/h1&amp;gt;'</span>
    html<span class="token punctuation">.</span>unescape<span class="token punctuation">(</span><span class="token string">'&amp;lt;h1&amp;gt;I&amp;#x27;m Jim&amp;lt;/h1&amp;gt;'</span><span class="token punctuation">)</span> # <span class="token operator">&lt;</span>h1<span class="token operator">></span>I'm Jim<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ul>
<li>mock(解决测试依赖)</li>
<li>concurrent(创建进程池和线程池)</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> ThreadPoolExecutor

pool <span class="token operator">=</span> ThreadPoolExecutor<span class="token punctuation">(</span><span class="token punctuation">)</span>
task <span class="token operator">=</span> pool<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>函数名，（参数）<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#此方法不会阻塞，会立即返回</span>
task<span class="token punctuation">.</span>done<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#查看任务执行是否完成</span>
task<span class="token punctuation">.</span>result<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#阻塞的方法，查看任务返回值</span>
task<span class="token punctuation">.</span>cancel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#取消未执行的任务，返回True或False,取消成功返回True</span>
task<span class="token punctuation">.</span>add_done_callback<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#回调函数</span>
task<span class="token punctuation">.</span>running<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#是否正在执行     task就是一个Future对象</span>

<span class="token keyword">for</span> data <span class="token keyword">in</span> pool<span class="token punctuation">.</span>map<span class="token punctuation">(</span>函数，参数列表<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true">#返回已经完成的任务结果列表，根据参数顺序执行</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>返回任务完成得执行结果data<span class="token punctuation">)</span>

<span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> as_completed
as_completed<span class="token punctuation">(</span>任务列表<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#返回已经完成的任务列表，完成一个执行一个</span>

wait<span class="token punctuation">(</span>任务列表<span class="token punctuation">,</span>return_when<span class="token operator">=</span>条件<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#根据条件进行阻塞主线程，有四个条件</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>selector(封装select,用户多路复用io编程)</li>
<li>asyncio</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">future<span class="token operator">=</span>asyncio<span class="token punctuation">.</span>ensure_future<span class="token punctuation">(</span>协程<span class="token punctuation">)</span>  等于后面的方式  future<span class="token operator">=</span>loop<span class="token punctuation">.</span>create_task<span class="token punctuation">(</span>协程<span class="token punctuation">)</span>
future<span class="token punctuation">.</span>add_done_callback<span class="token punctuation">(</span><span class="token punctuation">)</span>添加一个完成后的回调函数
loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>future<span class="token punctuation">)</span>
future<span class="token punctuation">.</span>result<span class="token punctuation">(</span><span class="token punctuation">)</span>查看写成返回结果

asyncio<span class="token punctuation">.</span>wait<span class="token punctuation">(</span><span class="token punctuation">)</span>接受一个可迭代的协程对象
asynicio<span class="token punctuation">.</span>gather<span class="token punctuation">(</span><span class="token operator">*</span>可迭代对象<span class="token punctuation">,</span><span class="token operator">*</span>可迭代对象）    两者结果相同，但gather可以批量取消，gather对象<span class="token punctuation">.</span>cancel<span class="token punctuation">(</span><span class="token punctuation">)</span>

一个线程中只有一个loop

在loop<span class="token punctuation">.</span>stop时一定要loop<span class="token punctuation">.</span>run_forever<span class="token punctuation">(</span><span class="token punctuation">)</span>否则会报错
loop<span class="token punctuation">.</span>run_forever<span class="token punctuation">(</span><span class="token punctuation">)</span>可以执行非协程
最后执行<span class="token keyword">finally</span>模块中 loop<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

asyncio<span class="token punctuation">.</span>Task<span class="token punctuation">.</span>all_tasks<span class="token punctuation">(</span><span class="token punctuation">)</span>拿到所有任务 然后依次迭代并使用任务<span class="token punctuation">.</span>cancel<span class="token punctuation">(</span><span class="token punctuation">)</span>取消

偏函数partial<span class="token punctuation">(</span>函数，参数<span class="token punctuation">)</span>把函数包装成另一个函数名  其参数必须放在定义函数的前面

loop<span class="token punctuation">.</span>call_soon<span class="token punctuation">(</span>函数<span class="token punctuation">,</span>参数<span class="token punctuation">)</span>
call_soon_threadsafe<span class="token punctuation">(</span><span class="token punctuation">)</span>线程安全    
loop<span class="token punctuation">.</span>call_later<span class="token punctuation">(</span>时间<span class="token punctuation">,</span>函数<span class="token punctuation">,</span>参数<span class="token punctuation">)</span>
在同一代码块中call_soon优先执行，然后多个later根据时间的升序进行执行

如果非要运行有阻塞的代码
使用loop<span class="token punctuation">.</span>run_in_executor<span class="token punctuation">(</span>executor<span class="token punctuation">,</span>函数，参数<span class="token punctuation">)</span>包装成一个多线程，然后放入到一个task列表中，通过wait<span class="token punctuation">(</span>task列表<span class="token punctuation">)</span>来运行

通过asyncio实现http
reader<span class="token punctuation">,</span>writer<span class="token operator">=</span><span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>open_connection<span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span>
writer<span class="token punctuation">.</span>writer<span class="token punctuation">(</span><span class="token punctuation">)</span>发送请求
<span class="token keyword">async</span> <span class="token keyword">for</span> data <span class="token keyword">in</span> reader<span class="token punctuation">:</span>
    data<span class="token operator">=</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>
    list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
然后list中存储的就是html

as_completed<span class="token punctuation">(</span>tasks<span class="token punctuation">)</span>完成一个返回一个<span class="token punctuation">,</span>返回的是一个可迭代对象    

协程锁
<span class="token keyword">async</span> <span class="token keyword">with</span> Lock<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Python进阶"><a href="#Python进阶" class="headerlink" title="Python进阶"></a><strong>Python进阶</strong></h3><ul>
<li><p>进程间通信：</p>
</li>
<li><ul>
<li>Manager(内置了好多数据结构，可以实现多进程间内存共享)</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Manager<span class="token punctuation">,</span>Process
<span class="token keyword">def</span> <span class="token function">add_data</span><span class="token punctuation">(</span>p_dict<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    p_dict<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    progress_dict <span class="token operator">=</span> Manager<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dict<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">from</span> queue <span class="token keyword">import</span> PriorityQueue

    first_progress <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>add_data<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>progress_dict<span class="token punctuation">,</span> <span class="token string">"bobby1"</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    second_progress <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>add_data<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>progress_dict<span class="token punctuation">,</span> <span class="token string">"bobby2"</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    first_progress<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    second_progress<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    first_progress<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    second_progress<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>progress_dict<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><ul>
<li>Pipe(适用于两个进程)</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Pipe<span class="token punctuation">,</span>Process
<span class="token comment" spellcheck="true">#pipe的性能高于queue</span>
<span class="token keyword">def</span> <span class="token function">producer</span><span class="token punctuation">(</span>pipe<span class="token punctuation">)</span><span class="token punctuation">:</span>
    pipe<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">"bobby"</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">consumer</span><span class="token punctuation">(</span>pipe<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>pipe<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    recevie_pipe<span class="token punctuation">,</span> send_pipe <span class="token operator">=</span> Pipe<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">#pipe只能适用于两个进程</span>
    my_producer<span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>producer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>send_pipe<span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
    my_consumer <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>consumer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>recevie_pipe<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    my_producer<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    my_consumer<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    my_producer<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    my_consumer<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><ul>
<li>Queue(不能用于进程池,进程池间通信需要使用Manager().Queue())</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Queue<span class="token punctuation">,</span>Process
<span class="token keyword">def</span> <span class="token function">producer</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">:</span>
    queue<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">consumer</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    data <span class="token operator">=</span> queue<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    queue <span class="token operator">=</span> Queue<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    my_producer <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>producer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    my_consumer <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>consumer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    my_producer<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    my_consumer<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    my_producer<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    my_consumer<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><ul>
<li>进程池</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">producer</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">:</span>
    queue<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">consumer</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    data <span class="token operator">=</span> queue<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    queue <span class="token operator">=</span> Manager<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Queue<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    pool <span class="token operator">=</span> Pool<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

    pool<span class="token punctuation">.</span>apply_async<span class="token punctuation">(</span>producer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    pool<span class="token punctuation">.</span>apply_async<span class="token punctuation">(</span>consumer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>sys模块几个常用方法</p>
</li>
<li><ul>
<li>argv 命令行参数list,第一个是程序本身的路径</li>
<li>path 返回模块的搜索路径</li>
<li>modules.keys() 返回已经导入的所有模块的列表</li>
<li>exit(0) 退出程序</li>
</ul>
</li>
<li><p>a in s or b in s or c in s简写</p>
</li>
<li><ul>
<li>采用any方式：all() 对于任何可迭代对象为空都会返回True</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token comment" spellcheck="true"># 方法一</span>
    <span class="token boolean">True</span> <span class="token keyword">in</span> <span class="token punctuation">[</span>i <span class="token keyword">in</span> s <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token comment" spellcheck="true"># 方法二</span>
    any<span class="token punctuation">(</span>i <span class="token keyword">in</span> s <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># 方法三</span>
    list<span class="token punctuation">(</span>filter<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x <span class="token keyword">in</span> s<span class="token punctuation">,</span><span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>set集合运用</p>
</li>
<li><ul>
<li>{1,2}.issubset({1,2,3})#判断是否是其子集</li>
<li>{1,2,3}.issuperset({1,2})</li>
<li>{}.isdisjoint({})#判断两个set交集是否为空,是空集则为True</li>
</ul>
</li>
<li><p>代码中中文匹配</p>
</li>
<li><ul>
<li>[u4E00-u9FA5]匹配中文文字区间[一到龥]</li>
</ul>
</li>
<li><p>查看系统默认编码格式</p>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">import</span> sys
    sys<span class="token punctuation">.</span>getdefaultencoding<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># setdefaultencodeing()设置系统编码方式</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>getattr VS getattribute</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__getattr__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true">#当访问属性不存在的时候返回</span>
        <span class="token keyword">return</span> <span class="token number">2</span>
    <span class="token keyword">def</span> <span class="token function">__getattribute__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true">#屏蔽所有的元素访问</span>
        <span class="token keyword">return</span> item<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>类变量是不会存入实例<strong>dict</strong>中的，只会存在于类的<strong>dict</strong>中</p>
</li>
<li><p>globals/locals(可以变相操作代码)</p>
</li>
<li><ul>
<li>globals中保存了当前模块中所有的变量属性与值</li>
<li>locals中保存了当前环境中的所有变量属性与值</li>
</ul>
</li>
<li><p>python变量名的解析机制(LEGB)</p>
</li>
<li><ul>
<li>本地作用域(Local)</li>
<li>当前作用域被嵌入的本地作用域(Enclosing locals)</li>
<li>全局/模块作用域(Global)</li>
<li>内置作用域(Built-in)</li>
</ul>
</li>
<li><p>实现从1-100每三个为一组分组</p>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">:</span>i<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li><p>什么是元类？</p>
</li>
<li><ul>
<li>即创建类的类，创建类的时候只需要将metaclass=元类，元类需要继承type而不是object,因为type就是元类</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">type<span class="token punctuation">.</span>__bases__  <span class="token comment" spellcheck="true">#(&lt;class 'object'>,)</span>
object<span class="token punctuation">.</span>__bases__    <span class="token comment" spellcheck="true">#()</span>
type<span class="token punctuation">(</span>object<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#&lt;class 'type'></span>
    <span class="token keyword">class</span> <span class="token class-name">Yuan</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span>name<span class="token punctuation">,</span>base<span class="token punctuation">,</span>attr<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> type<span class="token punctuation">(</span>name<span class="token punctuation">,</span>base<span class="token punctuation">,</span>attr<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>Yuan<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>什么是鸭子类型(即:多态)？</p>
</li>
<li><ul>
<li>Python在使用传入参数的过程中不会默认判断参数类型，只要参数具备执行条件就可以执行</li>
</ul>
</li>
<li><p>深拷贝和浅拷贝</p>
</li>
<li><ul>
<li>深拷贝拷贝内容，浅拷贝拷贝地址(增加引用计数)</li>
<li>copy模块实现深拷贝</li>
</ul>
</li>
<li><p>单元测试</p>
</li>
<li><ul>
<li>一般测试类继承模块unittest下的TestCase</li>
<li>pytest模块快捷测试(方法以test_开头/测试文件以test_开头/测试类以Test开头，并且不能带有 init 方法)</li>
<li>coverage统计测试覆盖率</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">class</span> <span class="token class-name">MyTest</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">tearDown</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true"># 每个测试用例执行前执行</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'本方法开始测试了'</span><span class="token punctuation">)</span>

        <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true"># 每个测试用例执行之前做操作</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'本方法测试结束'</span><span class="token punctuation">)</span>

        @classmethod
        <span class="token keyword">def</span> <span class="token function">tearDownClass</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true"># 必须使用 @ classmethod装饰器, 所有test运行完后运行一次</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'开始测试'</span><span class="token punctuation">)</span>
        @classmethod
        <span class="token keyword">def</span> <span class="token function">setUpClass</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true"># 必须使用@classmethod 装饰器,所有test运行前运行一次</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'结束测试'</span><span class="token punctuation">)</span>

        <span class="token keyword">def</span> <span class="token function">test_a_run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 测试用例</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>gil会根据执行的字节码行数以及时间片释放gil，gil在遇到io的操作时候主动释放</p>
</li>
<li><p>什么是monkey patch?</p>
</li>
<li><ul>
<li>猴子补丁，在运行的时候替换掉会阻塞的语法修改为非阻塞的方法</li>
</ul>
</li>
<li><p>什么是自省(Introspection)？</p>
</li>
<li><ul>
<li>运行时判断一个对象的类型的能力，id,type,isinstance</li>
</ul>
</li>
<li><p>python是值传递还是引用传递？</p>
</li>
<li><ul>
<li>都不是，python是共享传参，默认参数在执行时只会执行一次</li>
</ul>
</li>
<li><p>try-except-else-finally中else和finally的区别</p>
</li>
<li><ul>
<li>else在不发生异常的时候执行，finally无论是否发生异常都会执行</li>
<li>except一次可以捕获多个异常，但一般为了对不同异常进行不同处理，我们分次捕获处理</li>
</ul>
</li>
<li><p>GIL全局解释器锁</p>
</li>
<li><ul>
<li>同一时间只能有一个线程执行，CPython(IPython)的特点，其他解释器不存在</li>
<li>cpu密集型：多进程+进程池</li>
<li>io密集型：多线程/协程</li>
</ul>
</li>
<li><p>什么是Cython</p>
</li>
<li><ul>
<li>将python解释成C代码工具</li>
</ul>
</li>
<li><p>生成器和迭代器</p>
</li>
<li><ul>
<li><p>可迭代对象只需要实现<strong>iter</strong>方法</p>
</li>
<li><ul>
<li>实现<strong>next</strong>和<strong>iter</strong>方法的对象就是迭代器</li>
</ul>
</li>
<li><p>使用生成器表达式或者yield的生成器函数(生成器是一种特殊的迭代器)</p>
</li>
</ul>
</li>
<li><p>什么是协程</p>
</li>
<li><ul>
<li><p>yield</p>
</li>
<li><p>async-awiat</p>
</li>
<li><ul>
<li>比线程更轻量的多任务方式</li>
<li>实现方式</li>
</ul>
</li>
</ul>
</li>
<li><p>dict底层结构</p>
</li>
<li><ul>
<li>为了支持快速查找使用了哈希表作为底层结构</li>
<li>哈希表平均查找时间复杂度为o(1)</li>
<li>CPython解释器使用二次探查解决哈希冲突问题</li>
</ul>
</li>
<li><p>Hash扩容和Hash冲突解决方案</p>
</li>
<li><ul>
<li><p>链接法</p>
</li>
<li><p>二次探查(开放寻址法)：python使用</p>
</li>
<li><ul>
<li>循环复制到新空间实现扩容</li>
<li>冲突解决：</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">for</span> gevent <span class="token keyword">import</span> monkey
    monkey<span class="token punctuation">.</span>patch_all<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#将代码中所有的阻塞方法都进行修改，可以指定具体要修改的方法</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>判断是否为生成器或者协程</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    co_flags <span class="token operator">=</span> func<span class="token punctuation">.</span>__code__<span class="token punctuation">.</span>co_flags

    <span class="token comment" spellcheck="true"># 检查是否是协程</span>
    <span class="token keyword">if</span> co_flags <span class="token operator">&amp;</span> <span class="token number">0x180</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> func

    <span class="token comment" spellcheck="true"># 检查是否是生成器</span>
    <span class="token keyword">if</span> co_flags <span class="token operator">&amp;</span> <span class="token number">0x20</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> func<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>斐波那契解决的问题及变形</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#一只青蛙一次可以跳上1级台阶，也可以跳上2级。求该青蛙跳上一个n级的台阶总共有多少种跳法。</span>
<span class="token comment" spellcheck="true">#请问用n个2*1的小矩形无重叠地覆盖一个2*n的大矩形，总共有多少种方法？</span>
<span class="token comment" spellcheck="true">#方式一：</span>
fib <span class="token operator">=</span> <span class="token keyword">lambda</span> n<span class="token punctuation">:</span> n <span class="token keyword">if</span> n <span class="token operator">&lt;=</span> <span class="token number">2</span> <span class="token keyword">else</span> fib<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> fib<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">#方式二：</span>
<span class="token keyword">def</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> range<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a <span class="token operator">+</span> b
    <span class="token keyword">return</span> b

<span class="token comment" spellcheck="true">#一只青蛙一次可以跳上1级台阶，也可以跳上2级……它也可以跳上n级。求该青蛙跳上一个n级的台阶总共有多少种跳法。</span>
fib <span class="token operator">=</span> <span class="token keyword">lambda</span> n<span class="token punctuation">:</span> n <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token keyword">else</span> <span class="token number">2</span> <span class="token operator">*</span> fib<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>获取电脑设置的环境变量</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">import</span> os
    os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span>env_name<span class="token punctuation">,</span>None<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#获取环境变量如果不存在为None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li><p>垃圾回收机制</p>
</li>
<li><ul>
<li>引用计数</li>
<li>标记清除</li>
<li>分代回收</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token comment" spellcheck="true">#查看分代回收触发</span>
    <span class="token keyword">import</span> gc
    gc<span class="token punctuation">.</span>get_threshold<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#output:(700, 10, 10)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>True和False在代码中完全等价于1和0,可以直接和数字进行计算，inf表示无穷大</p>
</li>
<li><p>C10M/C10K</p>
</li>
<li><ul>
<li>C10M:8核心cpu，64G内存，在10gbps的网络上保持1000万并发连接</li>
<li>C10K：1GHz CPU,2G内存，1gbps网络环境下保持1万个客户端提供FTP服务</li>
</ul>
</li>
<li><p>yield from与yield的区别：</p>
</li>
<li><ul>
<li>yield from跟的是一个可迭代对象，而yield后面没有限制</li>
<li>GeneratorExit生成器停止时触发</li>
</ul>
</li>
<li><p>单下划线的几种使用</p>
</li>
<li><ul>
<li>在定义变量时，表示为私有变量</li>
<li>在解包时，表示舍弃无用的数据</li>
<li>在交互模式中表示上一次代码执行结果</li>
<li>可以做数字的拼接(111_222_333)</li>
</ul>
</li>
<li><p>使用break就不会执行else</p>
</li>
<li><p>10进制转2进制</p>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">def</span> <span class="token function">conver_bin</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> num <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> num
        re <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">while</span> num<span class="token punctuation">:</span>
            num<span class="token punctuation">,</span> rem <span class="token operator">=</span> divmod<span class="token punctuation">(</span>num<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
            re<span class="token punctuation">.</span>append<span class="token punctuation">(</span>str<span class="token punctuation">(</span>rem<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>reversed<span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">)</span>
    conver_bin<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>list1 = [‘A’, ‘B’, ‘C’, ‘D’] 如何才能得到以list中元素命名的新列表 A=[],B=[],C=[],D=[]呢</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    list1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">]</span>

    <span class="token comment" spellcheck="true"># 方法一</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> list1<span class="token punctuation">:</span>
        globals<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>   <span class="token comment" spellcheck="true"># 可以用于实现python版反射</span>

    <span class="token comment" spellcheck="true"># 方法二</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> list1<span class="token punctuation">:</span>
        <span class="token keyword">exec</span><span class="token punctuation">(</span>f<span class="token string">'{i} = []'</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true"># exec执行字符串语句</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>memoryview与bytearray$\color{&amp;#35 000}(不常用，只是看到了记载一下)$</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token comment" spellcheck="true"># bytearray是可变的，bytes是不可变的,memoryview不会产生新切片和对象</span>
    a <span class="token operator">=</span> <span class="token string">'aaaaaa'</span>
    ma <span class="token operator">=</span> memoryview<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    ma<span class="token punctuation">.</span>readonly  <span class="token comment" spellcheck="true"># 只读的memoryview</span>
    mb <span class="token operator">=</span> ma<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true"># 不会产生新的字符串</span>

    a <span class="token operator">=</span> bytearray<span class="token punctuation">(</span><span class="token string">'aaaaaa'</span><span class="token punctuation">)</span>
    ma <span class="token operator">=</span> memoryview<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    ma<span class="token punctuation">.</span>readonly  <span class="token comment" spellcheck="true"># 可写的memoryview</span>
    mb <span class="token operator">=</span> ma<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>      <span class="token comment" spellcheck="true"># 不会会产生新的bytearray</span>
    mb<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'bb'</span>    <span class="token comment" spellcheck="true"># 对mb的改动就是对ma的改动</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>Ellipsis类型</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 代码中出现...省略号的现象就是一个Ellipsis对象</span>
L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
L<span class="token punctuation">.</span>append<span class="token punctuation">(</span>L<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># output:[1,2,3,[…]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>lazy惰性计算</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">class</span> <span class="token class-name">lazy</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> func<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>func <span class="token operator">=</span> func

        <span class="token keyword">def</span> <span class="token function">__get__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
            val <span class="token operator">=</span> self<span class="token punctuation">.</span>func<span class="token punctuation">(</span>instance<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#其相当于执行的area(c),c为下面的Circle对象</span>
            setattr<span class="token punctuation">(</span>instance<span class="token punctuation">,</span> self<span class="token punctuation">.</span>func<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
            <span class="token keyword">return</span> val`

    <span class="token keyword">class</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>radius <span class="token operator">=</span> radius

        @lazy
        <span class="token keyword">def</span> <span class="token function">area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'evalute'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">3.14</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>遍历文件，传入一个文件夹，将里面所有文件的路径打印出来(递归)</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">all_files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    
<span class="token keyword">def</span> <span class="token function">getAllFiles</span><span class="token punctuation">(</span>directory_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> os                                       
    <span class="token keyword">for</span> sChild <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>directory_path<span class="token punctuation">)</span><span class="token punctuation">:</span>                
        sChildPath <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>directory_path<span class="token punctuation">,</span>sChild<span class="token punctuation">)</span>
        <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>sChildPath<span class="token punctuation">)</span><span class="token punctuation">:</span>
            getAllFiles<span class="token punctuation">(</span>sChildPath<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            all_files<span class="token punctuation">.</span>append<span class="token punctuation">(</span>sChildPath<span class="token punctuation">)</span>
    <span class="token keyword">return</span> all_files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>文件存储时，文件名的处理</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#secure_filename将字符串转化为安全的文件名</span>
<span class="token keyword">from</span> werkzeug <span class="token keyword">import</span> secure_filename
secure_filename<span class="token punctuation">(</span><span class="token string">"My cool movie.mov"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># output:My_cool_movie.mov</span>
secure_filename<span class="token punctuation">(</span><span class="token string">"../../../etc/passwd"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># output:etc_passwd</span>
secure_filename<span class="token punctuation">(</span>u<span class="token string">'i contain cool \xfcml\xe4uts.txt'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># output:i_contain_cool_umlauts.txt</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>日期格式化</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime

datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d"</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> time
<span class="token comment" spellcheck="true">#这里只有localtime可以被格式化，time是不能格式化的</span>
time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d"</span><span class="token punctuation">,</span>time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>tuple使用+=奇怪的问题</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 会报错，但是tuple的值会改变，因为t[1]id没有发生变化</span>
t<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># t[1]使用append\extend方法并不会报错，并可以成功执行</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><strong>missing</strong>你应该知道</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Mydict</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__missing__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># 当Mydict使用切片访问属性不存在的时候返回的值</span>
        <span class="token keyword">return</span> key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ul>
<li>+与+=</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># +不能用来连接列表和元祖，而+=可以（通过iadd实现，内部实现方式为extends(),所以可以增加元组），+会创建新对象</span>
<span class="token comment" spellcheck="true">#不可变对象没有__iadd__方法，所以直接使用的是__add__方法，因此元祖可以使用+=进行元祖之间的相加</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>如何将一个可迭代对象的每个元素变成一个字典的所有键？</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">dict<span class="token punctuation">.</span>fromkeys<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jim'</span><span class="token punctuation">,</span><span class="token string">'han'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># output:{'jim': 21, 'han': 21}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>wireshark抓包软件</li>
</ul>
<h3 id="网络知识"><a href="#网络知识" class="headerlink" title="网络知识"></a><strong>网络知识</strong></h3><ul>
<li><p>什么是HTTPS?</p>
</li>
<li><ul>
<li>安全的HTTP协议，https需要cs证书，数据加密，端口为443，安全，同一网站https seo排名会更高</li>
</ul>
</li>
<li><p>常见响应状态码</p>
</li>
</ul>
<pre><code>    204 No Content //请求成功处理，没有实体的主体返回，一般用来表示删除成功
    206 Partial Content //Get范围请求已成功处理
    303 See Other //临时重定向，期望使用get定向获取
    304 Not Modified //请求缓存资源
    307 Temporary Redirect //临时重定向，Post不会变成Get
    401 Unauthorized //认证失败
    403 Forbidden //资源请求被拒绝
    400 //请求参数错误
    201 //添加或更改成功
    503 //服务器维护或者超负载</code></pre><ul>
<li>http请求方法的幂等性及安全性</li>
<li>WSGI</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token comment" spellcheck="true"># environ：一个包含所有HTTP请求信息的dict对象</span>
    <span class="token comment" spellcheck="true"># start_response：一个发送HTTP响应的函数</span>
    <span class="token keyword">def</span> <span class="token function">application</span><span class="token punctuation">(</span>environ<span class="token punctuation">,</span> start_response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        start_response<span class="token punctuation">(</span><span class="token string">'200 OK'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">'&lt;h1>Hello, web!&lt;/h1>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>RPC</p>
</li>
<li><p>CDN</p>
</li>
<li><p>SSL(Secure Sockets Layer 安全套接层),及其继任者传输层安全（Transport Layer Security，TLS）是为网络通信提供安全及数据完整性的一种安全协议。</p>
</li>
<li><p>SSH（安全外壳协议） 为 Secure Shell 的缩写，由 IETF 的网络小组（Network Working Group）所制定；SSH 为建立在应用层基础上的安全协议。SSH 是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。几乎所有UNIX平台—包括HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行SSH。</p>
</li>
<li><p>TCP/IP</p>
</li>
<li><ul>
<li><p>TCP:面向连接/可靠/基于字节流</p>
</li>
<li><p>UDP:无连接/不可靠/面向报文</p>
</li>
<li><p>三次握手四次挥手</p>
</li>
<li><ul>
<li>三次握手(SYN/SYN+ACK/ACK)</li>
<li>四次挥手(FIN/ACK/FIN/ACK)</li>
</ul>
</li>
<li><p>为什么连接的时候是三次握手，关闭的时候却是四次握手？</p>
</li>
<li><ul>
<li>因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，”你发的FIN报文我收到了”。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。</li>
</ul>
</li>
<li><p>为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态？</p>
</li>
<li><ul>
<li>虽然按道理，四个报文都发送完毕，我们可以直接进入CLOSE状态了，但是我们必须假象网络是不可靠的，有可以最后一个ACK丢失。所以TIME_WAIT状态就是用来重发可能丢失的ACK报文。</li>
</ul>
</li>
</ul>
</li>
<li><p>XSS/CSRF</p>
</li>
<li><ul>
<li>HttpOnly禁止js脚本访问和操作Cookie,可以有效防止XSS</li>
</ul>
</li>
</ul>
<h3 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a><strong>Mysql</strong></h3><ul>
<li><p>索引改进过程</p>
</li>
<li><ul>
<li>线性结构-&gt;二分查找-&gt;hash-&gt;二叉查找树-&gt;平衡二叉树-&gt;多路查找树-&gt;多路平衡查找树(B-Tree)</li>
</ul>
</li>
<li><p>Mysql面试总结基础篇</p>
<p><a href="https://segmentfault.com/a/1190000018371218" target="_blank" rel="noopener">https://segmentfault.com/a/1190000018371218</a></p>
</li>
<li><p>Mysql面试总结进阶篇</p>
<p><a href="https://segmentfault.com/a/1190000018380324" target="_blank" rel="noopener">https://segmentfault.com/a/1190000018380324</a></p>
</li>
<li><p>深入浅出Mysql</p>
<p><a href="http://ningning.today/2017/02/13/database/深入浅出mysql/" target="_blank" rel="noopener">http://ningning.today/2017/02/13/database/深入浅出mysql/</a></p>
</li>
<li><p>清空整个表时，InnoDB是一行一行的删除，而MyISAM则会从新删除建表</p>
</li>
<li><p>text/blob数据类型不能有默认值，查询时不存在大小写转换</p>
</li>
<li><p>什么时候索引失效</p>
</li>
<li><ul>
<li><p>以%开头的like模糊查询</p>
</li>
<li><p>出现隐式类型转换</p>
</li>
<li><p>没有满足最左前缀原则</p>
</li>
<li><ul>
<li>对于多列索引，不是使用的第一部分，则不会使用索引</li>
</ul>
</li>
<li><p>失效场景：</p>
</li>
<li><ul>
<li>应尽量避免在 where 子句中使用 != 或 &lt;&gt; 操作符，否则引擎将放弃使用索引而进行全表扫描</li>
<li>尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，即使其中有条件带索引也不会使用，这也是为什么尽量少用 or 的原因</li>
<li>如果列类型是字符串，那一定要在条件中将数据使用引号引用起来，否则不会使用索引</li>
<li>应尽量避免在 where 子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">例如：
select id <span class="token keyword">from</span> t where substring<span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">'abc'</span> – name<span class="token punctuation">;</span>
以abc开头的，应改成：
select id <span class="token keyword">from</span> t where name like <span class="token string">'abc%'</span> 
例如：
select id <span class="token keyword">from</span> t where datediff<span class="token punctuation">(</span>day<span class="token punctuation">,</span> createdate<span class="token punctuation">,</span> <span class="token string">'2005-11-30'</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span> – <span class="token string">'2005-11-30'</span><span class="token punctuation">;</span>
应改为<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><ul>
<li><ul>
<li>不要在 where 子句中的 “=” 左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用索引</li>
<li>应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-python"><code class="language-python">如：
select id <span class="token keyword">from</span> t where num<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">=</span> <span class="token number">100</span> 
应改为<span class="token punctuation">:</span>
select id <span class="token keyword">from</span> t where num <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">*</span><span class="token number">2</span>；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><ul>
<li><ul>
<li>不适合键值较少的列（重复数据较多的列）比如：set enum列就不适合(枚举类型(enum)可以添加null,并且默认的值会自动过滤空格集合(set)和枚举类似，但只可以添加64个值)</li>
<li>如果MySQL估计使用全表扫描要比使用索引快，则不使用索引</li>
</ul>
</li>
</ul>
</li>
<li><p>什么是聚集索引</p>
</li>
<li><ul>
<li>B+Tree叶子节点保存的是数据还是指针</li>
<li>MyISAM索引和数据分离，使用非聚集</li>
<li>InnoDB数据文件就是索引文件，主键索引就是聚集索引</li>
</ul>
</li>
</ul>
<h3 id="Redis命令总结"><a href="#Redis命令总结" class="headerlink" title="Redis命令总结"></a><strong>Redis命令总结</strong></h3><ul>
<li><p>为什么这么快？</p>
</li>
<li><ul>
<li><p>基于内存，由C语言编写</p>
</li>
<li><p>使用多路I/O复用模型，非阻塞IO</p>
</li>
<li><p>使用单线程减少线程间切换</p>
</li>
<li><ul>
<li>因为Redis是基于内存的操作，CPU不是Redis的瓶颈，Redis的瓶颈最有可能是机器内存的大小或者网络带宽。既然单线程容易实现，而且CPU不会成为瓶颈，那就顺理成章地采用单线程的方案了（毕竟采用多线程会有很多麻烦！）。</li>
</ul>
</li>
<li><p>数据结构简单</p>
</li>
<li><p>自己构建了VM机制，减少调用系统函数的时间</p>
</li>
</ul>
</li>
<li><p>优势</p>
</li>
<li><ul>
<li>性能高 – Redis能读的速度是110000次/s,写的速度是81000次/s</li>
<li>丰富的数据类型</li>
<li>原子 – Redis的所有操作都是原子性的，同时Redis还支持对几个操作全并后的原子性执行</li>
<li>丰富的特性 – Redis还支持 publish/subscribe（发布/订阅）, 通知, key 过期等等特性</li>
</ul>
</li>
<li><p>什么是redis事务？</p>
</li>
<li><ul>
<li>将多个请求打包，一次性、按序执行多个命令的机制</li>
<li>通过multi,exec,watch等命令实现事务功能</li>
<li>Python redis-py pipeline=conn.pipeline(transaction=True)</li>
</ul>
</li>
<li><p>持久化方式</p>
</li>
<li><ul>
<li><p>RDB(快照)</p>
</li>
<li><ul>
<li>save(同步，可以保证数据一致性)</li>
<li>bgsave(异步，shutdown时，无AOF则默认使用)</li>
</ul>
</li>
<li><p>AOF(追加日志)</p>
</li>
</ul>
</li>
<li><p>怎么实现队列</p>
</li>
<li><ul>
<li>push</li>
<li>rpop</li>
</ul>
</li>
<li><p>常用的数据类型(Bitmaps,Hyperloglogs,范围查询等不常用)</p>
</li>
<li><ul>
<li><p>String(字符串):计数器</p>
</li>
<li><ul>
<li>整数或sds(Simple Dynamic String)</li>
</ul>
</li>
<li><p>List(列表)：用户的关注，粉丝列表</p>
</li>
<li><ul>
<li>ziplist(连续内存块，每个entry节点头部保存前后节点长度信息实现双向链表功能)或double linked list</li>
</ul>
</li>
<li><p>Hash(哈希)：</p>
</li>
<li><p>Set(集合)：用户的关注者</p>
</li>
<li><ul>
<li>intset或hashtable</li>
</ul>
</li>
<li><p>Zset(有序集合)：实时信息排行榜</p>
</li>
<li><ul>
<li>skiplist(跳跃表)</li>
</ul>
</li>
</ul>
</li>
<li><p>与Memcached区别</p>
</li>
<li><ul>
<li>Memcached只能存储字符串键</li>
<li>Memcached用户只能通过APPEND的方式将数据添加到已有的字符串的末尾，并将这个字符串当做列表来使用。但是在删除这些元素的时候，Memcached采用的是通过黑名单的方式来隐藏列表里的元素，从而避免了对元素的读取、更新、删除等操作</li>
<li>Redis和Memcached都是将数据存放在内存中，都是内存数据库。不过Memcached还可用于缓存其他东西，例如图片、视频等等</li>
<li>虚拟内存–Redis当物理内存用完时，可以将一些很久没用到的Value 交换到磁盘</li>
<li>存储数据安全–Memcached挂掉后，数据没了；Redis可以定期保存到磁盘（持久化）</li>
<li>应用场景不一样：Redis出来作为NoSQL数据库使用外，还能用做消息队列、数据堆栈和数据缓存等；Memcached适合于缓存SQL语句、数据集、用户临时性数据、延迟查询数据和Session等</li>
</ul>
</li>
<li><p>Redis实现分布式锁</p>
</li>
<li><ul>
<li>使用setnx实现加锁，可以同时通过expire添加超时时间</li>
<li>锁的value值可以是一个随机的uuid或者特定的命名</li>
<li>释放锁的时候，通过uuid判断是否是该锁，是则执行delete释放锁</li>
</ul>
</li>
<li><p>常见问题</p>
</li>
<li><ul>
<li><p>缓存雪崩</p>
</li>
<li><ul>
<li>短时间内缓存数据过期，大量请求访问数据库</li>
</ul>
</li>
<li><p>缓存穿透</p>
</li>
<li><ul>
<li>请求访问数据时，查询缓存中不存在，数据库中也不存在</li>
</ul>
</li>
<li><p>缓存预热</p>
</li>
<li><ul>
<li>初始化项目，将部分常用数据加入缓存</li>
</ul>
</li>
<li><p>缓存更新</p>
</li>
<li><ul>
<li>数据过期，进行更新缓存数据</li>
</ul>
</li>
<li><p>缓存降级</p>
</li>
<li><ul>
<li>当访问量剧增、服务出现问题（如响应时间慢或不响应）或非核心服务影响到核心流程的性能时，仍然需要保证服务还是可用的，即使是有损服务。系统可以根据一些关键数据进行自动降级，也可以配置开关实现人工降级</li>
</ul>
</li>
</ul>
</li>
<li><p>一致性Hash算法</p>
</li>
<li><ul>
<li>使用集群的时候保证数据的一致性</li>
</ul>
</li>
<li><p>基于redis实现一个分布式锁，要求一个超时的参数</p>
</li>
<li><ul>
<li>setnx</li>
</ul>
</li>
<li><p>虚拟内存</p>
</li>
<li><p>内存抖动</p>
</li>
</ul>
<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a><strong>Linux</strong></h3><ul>
<li><p>Unix五种i/o模型</p>
</li>
<li><ul>
<li><p>阻塞io</p>
</li>
<li><p>非阻塞io</p>
</li>
<li><p>多路复用io(Python下使用selectot实现io多路复用)</p>
</li>
<li><ul>
<li><p>select</p>
</li>
<li><ul>
<li>并发不高，连接数很活跃的情况下</li>
</ul>
</li>
<li><p>poll</p>
</li>
<li><ul>
<li>比select提高的并不多</li>
</ul>
</li>
<li><p>epoll</p>
</li>
<li><ul>
<li>适用于连接数量较多，但活动链接数少的情况</li>
</ul>
</li>
</ul>
</li>
<li><p>信号驱动io</p>
</li>
<li><p>异步io(Gevent/Asyncio实现异步)</p>
</li>
</ul>
</li>
<li><p>比man更好使用的命令手册</p>
</li>
<li><ul>
<li>tldr:一个有命令示例的手册</li>
</ul>
</li>
<li><p>kill -9和-15的区别</p>
</li>
<li><ul>
<li>-15：程序立刻停止/当程序释放相应资源后再停止/程序可能仍然继续运行</li>
<li>-9：由于-15的不确定性，所以直接使用-9立即杀死进程</li>
</ul>
</li>
<li><p>分页机制（逻辑地址和物理地址分离的内存分配管理方案）：</p>
</li>
<li><ul>
<li>操作系统为了高效管理内存，减少碎片</li>
<li>程序的逻辑地址划分为固定大小的页</li>
<li>物理地址划分为同样大小的帧</li>
<li>通过页表对应逻辑地址和物理地址</li>
</ul>
</li>
<li><p>分段机制</p>
</li>
<li><ul>
<li>为了满足代码的一些逻辑需求</li>
<li>数据共享/数据保护/动态链接</li>
<li>每个段内部连续内存分配，段和段之间是离散分配的</li>
</ul>
</li>
<li><p>查看cpu内存使用情况？</p>
</li>
<li><ul>
<li>top</li>
<li>free 查看可用内存，排查内存泄漏问题</li>
</ul>
</li>
</ul>
<h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a><strong>设计模式</strong></h3><p><strong>单例模式</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token comment" spellcheck="true"># 方式一</span>
    <span class="token keyword">def</span> <span class="token function">Single</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        instances <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">def</span> get_instance <span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> cls <span class="token operator">not</span> <span class="token keyword">in</span> instances<span class="token punctuation">:</span>
                instances<span class="token punctuation">[</span>cls<span class="token punctuation">]</span> <span class="token operator">=</span> cls<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
            <span class="token keyword">return</span> instances<span class="token punctuation">[</span>cls<span class="token punctuation">]</span>
        <span class="token keyword">return</span> get_instance
    @Single
    <span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
    <span class="token comment" spellcheck="true"># 方式二</span>
    <span class="token keyword">class</span> <span class="token class-name">Single</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"单例模式实现方式二。。。"</span><span class="token punctuation">)</span>

    single <span class="token operator">=</span> Single<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">del</span> Single  <span class="token comment" spellcheck="true"># 每次调用single就可以了</span>
    <span class="token comment" spellcheck="true"># 方式三(最常用的方式)</span>
    <span class="token keyword">class</span> <span class="token class-name">Single</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token operator">not</span> hasattr<span class="token punctuation">(</span>cls<span class="token punctuation">,</span><span class="token string">'_instance'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                cls<span class="token punctuation">.</span>_instance <span class="token operator">=</span> super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
            <span class="token keyword">return</span> cls<span class="token punctuation">.</span>_instance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>工厂模式</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Wang Wang Wang"</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Miao Miao Miao"</span><span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">fac</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> animal<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"dog"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> Dog<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> animal<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"cat"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> Cat<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"对不起，必须是：dog,cat"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>构造模式</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">class</span> <span class="token class-name">Computer</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>serial_number<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>serial_number <span class="token operator">=</span> serial_number
            self<span class="token punctuation">.</span>memory <span class="token operator">=</span> None
            self<span class="token punctuation">.</span>hadd <span class="token operator">=</span> None
            self<span class="token punctuation">.</span>gpu <span class="token operator">=</span> None
        <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token punctuation">(</span>f<span class="token string">'Memory:{self.memoryGB}'</span><span class="token punctuation">,</span>
            <span class="token string">'Hard Disk:{self.hadd}GB'</span><span class="token punctuation">,</span>
            <span class="token string">'Graphics Card:{self.gpu}'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>info<span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">ComputerBuilder</span>：
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>computer <span class="token operator">=</span> Computer<span class="token punctuation">(</span><span class="token string">'Jim1996'</span><span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">configure_memory</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>amount<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>computer<span class="token punctuation">.</span>memory <span class="token operator">=</span> amount
            <span class="token keyword">return</span> self <span class="token comment" spellcheck="true">#为了方便链式调用</span>
        <span class="token keyword">def</span> <span class="token function">configure_hdd</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>amount<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
        <span class="token keyword">def</span> <span class="token function">configure_gpu</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>gpu_model<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
    <span class="token keyword">class</span> <span class="token class-name">HardwareEngineer</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>builder <span class="token operator">=</span> None
        <span class="token keyword">def</span> <span class="token function">construct_computer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>memory<span class="token punctuation">,</span>hdd<span class="token punctuation">,</span>gpu<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>builder <span class="token operator">=</span> ComputerBuilder<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>configure_memory<span class="token punctuation">(</span>memory<span class="token punctuation">)</span><span class="token punctuation">.</span>configure_hdd<span class="token punctuation">(</span>hdd<span class="token punctuation">)</span><span class="token punctuation">.</span>configure_gpu<span class="token punctuation">(</span>gpu<span class="token punctuation">)</span>
        @property
        <span class="token keyword">def</span> <span class="token function">computer</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>builder<span class="token punctuation">.</span>computer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据结构和算法内置数据结构和算法"><a href="#数据结构和算法内置数据结构和算法" class="headerlink" title="数据结构和算法内置数据结构和算法"></a><strong>数据结构和算法内置数据结构和算法</strong></h3><h4 id="python实现各种数据结构"><a href="#python实现各种数据结构" class="headerlink" title="python实现各种数据结构"></a><strong>python实现各种数据结构</strong></h4><p><strong>快速排序</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">def</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span>_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> len<span class="token punctuation">(</span>_list<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> _list
            pivot_index <span class="token operator">=</span> <span class="token number">0</span>
            pivot <span class="token operator">=</span> _list<span class="token punctuation">(</span>pivot_index<span class="token punctuation">)</span>
            left_list <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> _list<span class="token punctuation">[</span><span class="token punctuation">:</span>pivot_index<span class="token punctuation">]</span> <span class="token keyword">if</span> i <span class="token operator">&lt;</span> pivot<span class="token punctuation">]</span>
            right_list <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> _list<span class="token punctuation">[</span>pivot_index<span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">if</span> i <span class="token operator">></span> pivot<span class="token punctuation">]</span>
        <span class="token keyword">return</span> quick_sort<span class="token punctuation">(</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">[</span>pivot<span class="token punctuation">]</span> <span class="token operator">+</span> quick_sort<span class="token punctuation">(</span>right<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>选择排序</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">def</span> <span class="token function">select_sort</span><span class="token punctuation">(</span>seq<span class="token punctuation">)</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> len<span class="token punctuation">(</span>seq<span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>n<span class="token number">-1</span><span class="token punctuation">)</span>
        min_idx <span class="token operator">=</span> i
            <span class="token keyword">for</span> j <span class="token keyword">in</span> range<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> seq<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> seq<span class="token punctuation">[</span>min_inx<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    min_idx <span class="token operator">=</span> j
            <span class="token keyword">if</span> min_idx <span class="token operator">!=</span> i<span class="token punctuation">:</span>
                seq<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> seq<span class="token punctuation">[</span>min_idx<span class="token punctuation">]</span> <span class="token operator">=</span> seq<span class="token punctuation">[</span>min_idx<span class="token punctuation">]</span><span class="token punctuation">,</span>seq<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>插入排序</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">def</span> <span class="token function">insertion_sort</span><span class="token punctuation">(</span>_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> len<span class="token punctuation">(</span>_list<span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            value <span class="token operator">=</span> _list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            pos <span class="token operator">=</span> i
            <span class="token keyword">while</span> pos <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">and</span> value <span class="token operator">&lt;</span> _list<span class="token punctuation">[</span>pos <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
                _list<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> _list<span class="token punctuation">[</span>pos <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
                pos <span class="token operator">-=</span> <span class="token number">1</span>
            _list<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> value
            <span class="token keyword">print</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>归并排序</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">def</span> <span class="token function">merge_sorted_list</span><span class="token punctuation">(</span>_list1<span class="token punctuation">,</span>_list2<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true">#合并有序列表</span>
        len_a<span class="token punctuation">,</span> len_b <span class="token operator">=</span> len<span class="token punctuation">(</span>_list1<span class="token punctuation">)</span><span class="token punctuation">,</span>len<span class="token punctuation">(</span>_list2<span class="token punctuation">)</span>
        a <span class="token operator">=</span> b <span class="token operator">=</span> <span class="token number">0</span>
        sort <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">while</span> len_a <span class="token operator">></span> a <span class="token operator">and</span> len_b <span class="token operator">></span> b<span class="token punctuation">:</span>
            <span class="token keyword">if</span> _list1<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">></span> _list2<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">:</span>
                sort<span class="token punctuation">.</span>append<span class="token punctuation">(</span>_list2<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span>
                b <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                sort<span class="token punctuation">.</span>append<span class="token punctuation">(</span>_list1<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span>
                a <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">if</span> len_a <span class="token operator">></span> a<span class="token punctuation">:</span>
            sort<span class="token punctuation">.</span>append<span class="token punctuation">(</span>_list1<span class="token punctuation">[</span>a<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> len_b <span class="token operator">></span> b<span class="token punctuation">:</span>
            sort<span class="token punctuation">.</span>append<span class="token punctuation">(</span>_list2<span class="token punctuation">[</span>b<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> sort

    <span class="token keyword">def</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span>_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> len<span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> list1
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            mid <span class="token operator">=</span> int<span class="token punctuation">(</span>len<span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
            left <span class="token operator">=</span> mergesort<span class="token punctuation">(</span>list1<span class="token punctuation">[</span><span class="token punctuation">:</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span>
            right <span class="token operator">=</span> mergesort<span class="token punctuation">(</span>list1<span class="token punctuation">[</span>mid<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> merge_sorted_list<span class="token punctuation">(</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>堆排序heapq模块</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">from</span> heapq <span class="token keyword">import</span> nsmallest
    <span class="token keyword">def</span> <span class="token function">heap_sort</span><span class="token punctuation">(</span>_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> nsmallest<span class="token punctuation">(</span>len<span class="token punctuation">(</span>_list<span class="token punctuation">)</span><span class="token punctuation">,</span>_list<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>栈</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">from</span> collections <span class="token keyword">import</span> deque
    <span class="token keyword">class</span> <span class="token class-name">Stack</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>s <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">peek</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            p <span class="token operator">=</span> self<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>push<span class="token punctuation">(</span>p<span class="token punctuation">)</span>
            <span class="token keyword">return</span> p
        <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> el<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>append<span class="token punctuation">(</span>el<span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>队列</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">from</span> collections <span class="token keyword">import</span> deque
    <span class="token keyword">class</span> <span class="token class-name">Queue</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>s <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> el<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>s<span class="token punctuation">.</span>append<span class="token punctuation">(</span>el<span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>二分查找</strong></p>
<pre class="line-numbers language-python"><code class="language-python">    <span class="token keyword">def</span> <span class="token function">binary_search</span><span class="token punctuation">(</span>_list<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
        mid <span class="token operator">=</span> len<span class="token punctuation">(</span>_list<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>
        <span class="token keyword">if</span> len<span class="token punctuation">(</span>_list<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> Flase
        <span class="token keyword">if</span> num <span class="token operator">></span> _list<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>
            BinarySearch<span class="token punctuation">(</span>_list<span class="token punctuation">[</span>mid<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> num <span class="token operator">&lt;</span> _list<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>
            BinarySearch<span class="token punctuation">(</span>_list<span class="token punctuation">[</span><span class="token punctuation">:</span>mid<span class="token punctuation">]</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> _list<span class="token punctuation">.</span>index<span class="token punctuation">(</span>num<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="面试加强题："><a href="#面试加强题：" class="headerlink" title="面试加强题："></a><strong>面试加强题：</strong></h3><h4 id="关于数据库优化及设计"><a href="#关于数据库优化及设计" class="headerlink" title="关于数据库优化及设计"></a>关于数据库优化及设计</h4><p><a href="https://segmentfault.com/a/1190000018426586" target="_blank" rel="noopener">https://segmentfault.com/a/1190000018426586</a></p>
<ul>
<li><p>如何使用两个栈实现一个队列</p>
</li>
<li><p>反转链表</p>
</li>
<li><p>合并两个有序链表</p>
</li>
<li><p>删除链表节点</p>
</li>
<li><p>反转二叉树</p>
</li>
<li><p>设计短网址服务？62进制实现</p>
</li>
<li><p>设计一个秒杀系统(feed流)？</p>
<p><a href="https://www.jianshu.com/p/ea0259d109f9" target="_blank" rel="noopener">https://www.jianshu.com/p/ea0259d109f9</a></p>
</li>
<li><p>为什么mysql数据库的主键使用自增的整数比较好？使用uuid可以吗？为什么？</p>
</li>
<li><ul>
<li>如果InnoDB表的数据写入顺序能和B+树索引的叶子节点顺序一致的话，这时候存取效率是最高的。为了存储和查询性能应该使用自增长id做主键。</li>
<li>对于InnoDB的主索引，数据会按照主键进行排序，由于UUID的无序性，InnoDB会产生巨大的IO压力，此时不适合使用UUID做物理主键，可以把它作为逻辑主键，物理主键依然使用自增ID。为了全局的唯一性，应该用uuid做索引关联其他表或做外键</li>
</ul>
</li>
<li><p>如果是分布式系统下我们怎么生成数据库的自增id呢？</p>
</li>
<li><ul>
<li>使用redis</li>
</ul>
</li>
<li><p>基于redis实现一个分布式锁，要求一个超时的参数</p>
</li>
<li><ul>
<li>setnx</li>
<li>setnx + expire</li>
</ul>
</li>
<li><p>如果redis单个节点宕机了，如何处理？还有其他业界的方案实现分布式锁码?</p>
</li>
<li><ul>
<li>使用hash一致算法</li>
</ul>
</li>
</ul>
<h4 id="缓存算法"><a href="#缓存算法" class="headerlink" title="缓存算法"></a><strong>缓存算法</strong></h4><ul>
<li>LRU(least-recently-used):替换最近最少使用的对象</li>
<li>LFU(Least frequently used):最不经常使用，如果一个数据在最近一段时间内使用次数很少，那么在将来一段时间内被使用的可能性也很小</li>
</ul>
<h4 id="服务端性能优化方向"><a href="#服务端性能优化方向" class="headerlink" title="服务端性能优化方向"></a><strong>服务端性能优化方向</strong></h4><ul>
<li><p>使用数据结构和算法</p>
</li>
<li><p>数据库</p>
</li>
<li><ul>
<li><p>索引优化</p>
</li>
<li><p>慢查询消除</p>
</li>
<li><ul>
<li>slow_query_log_file开启并且查询慢查询日志</li>
<li>通过explain排查索引问题</li>
<li>调整数据修改索引</li>
</ul>
</li>
<li><p>批量操作，从而减少io操作</p>
</li>
<li><p>使用NoSQL:比如Redis</p>
</li>
</ul>
</li>
<li><p>网络io</p>
</li>
<li><ul>
<li>批量操作</li>
<li>pipeline</li>
</ul>
</li>
<li><p>缓存</p>
</li>
<li><ul>
<li>Redis</li>
</ul>
</li>
<li><p>异步</p>
</li>
<li><ul>
<li>Asyncio实现异步操作</li>
<li>使用Celery减少io阻塞</li>
</ul>
</li>
<li><p>并发</p>
</li>
<li><ul>
<li>多线程</li>
<li>Gevent</li>
</ul>
</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io" rel="external nofollow noreferrer">杰克成</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io/posts/blog-python20.html">https://jackhcc.github.io/posts/blog-python20.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Python/">
                                    <span class="chip bg-color">Python</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/aliqr.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/wxqr.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '3821a0bbb773038a51fc',
        clientSecret: '4b30b507d67ec5497ec0e77f43f80cb3e0d7dd3a',
        repo: 'JackHCC.github.io',
        owner: 'JackHCC',
        admin: "JackHCC",
        id: '2021-09-27T12-23-55',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/awesome-cst.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/23.jpg" class="responsive-img" alt="Awesome Cyber Security Tools">
                        
                        <span class="card-title">Awesome Cyber Security Tools</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Cyber Security Tools汇总
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-09-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Awesome/" class="post-category">
                                    Awesome
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Cyber-Security/">
                        <span class="chip bg-color">Cyber Security</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/Embedded-Microprocessor-System.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/1.jpg" class="responsive-img" alt="Embedded Microprocessor System笔记">
                        
                        <span class="card-title">Embedded Microprocessor System笔记</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            嵌入式微处理系统学习笔记
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-09-26
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Embedded/" class="post-category">
                                    Embedded
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Microprocessor/">
                        <span class="chip bg-color">Microprocessor</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('4'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">1704.1k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "2";
                    var startDate = "27";
                    var startHour = "6";
                    var startMinute = "30";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/JackHCC" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:jackcc0701@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/profile.php?id=100046343443643" class="tooltipped" target="_blank" data-tooltip="关注我的Facebook: https://www.facebook.com/profile.php?id=100046343443643" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>



    <a href="https://twitter.com/JackChe66021834" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/JackChe66021834" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2508074836" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2508074836" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/6885584679" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/6885584679" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/matery.js"></script>

    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script type="text/javascript" src="/js/fireworks.js"></script>

    <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>'); }
    </script>

    <!-- weather -->
	<script type="text/javascript">
	WIDGET = {FID: 'TToslpmkVO'}
	</script>
	<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>


    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

    
    
    <script async src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script src="//code.tidio.co/kqhlkxviiccyoa0czpfpu4ijuey9hfre.js"></script>
        <script> 
            $(document).ready(function () {
                setInterval(change_Tidio, 50);  
                function change_Tidio() { 
                    var tidio=$("#tidio-chat iframe");
                    if(tidio.css("display")=="block"&& $(window).width()>977 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" &&$(window).width()>977)>0? "-40px" : ($("div.toc-title").length&&$(window).width()>977)>0?"85px":"20px";   
                        document.getElementById("tidio-chat-iframe").style.right="-15px";   
                        document.getElementById("tidio-chat-iframe").style.height=parseInt(tidio.css("height"))>=520?"520px":tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    } 
                    else if(tidio.css("display")=="block"&&$(window).width()>601 &&$(window).width()<992 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && 601< $(window).width()<992)>0? "-40px":"20px" ;   
                        document.getElementById("tidio-chat-iframe").style.right="-15px"; 
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))<230){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && $(window).width()<601)>0? "-10px":"45px" ;   
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    if( tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))>=230){
                        document.getElementById("tidio-chat-iframe").style.zIndex="998";
                    }
                } 
            }); 
        </script>
    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/canvas-nest.js"></script>
    

    

    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/instantpage/instantpage.js" type="module"></script>
    
<script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script>
        <script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script>
        <script>
        $('a').each(function() {
          const $this = $(this);
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'your_domain' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });
        </script></body>

</html>

