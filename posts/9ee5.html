<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="HarmonyOS开发：基础入门, JackHCC">
    <meta name="description" content="HarmonyOS基础开发手册">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>HarmonyOS开发：基础入门 | JackHCC</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my.css">
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-hopscotch.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><link rel="alternate" href="/atom.xml" title="JackHCC" type="application/atom+xml">
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">JackHCC</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/me.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">JackHCC</div>
        <div class="logo-desc">
            
            Make the world betterrrr!!!
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/JackHCC/JackHCC.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/JackHCC/JackHCC.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/8.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">HarmonyOS开发：基础入门</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Harmony/">
                                <span class="chip bg-color">Harmony</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Harmony/" class="post-category">
                                Harmony
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-07-25
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-07-25
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    17.3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    64 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="导读"><a href="#导读" class="headerlink" title="导读"></a>导读</h2><p>为了方便开发者正确获取内容，本导读基于HarmonyOS<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/document-outline-0000001064589184#ZH-CN_TOPIC_0000001064589184__section149501044202918" target="_blank" rel="noopener">通用开发历程</a>对相关资源进行了分类，并对<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/document-outline-0000001064589184#ZH-CN_TOPIC_0000001064589184__section254451314363" target="_blank" rel="noopener">原子化服务</a>、<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/document-outline-0000001064589184#ZH-CN_TOPIC_0000001064589184__section101030123017" target="_blank" rel="noopener">设备</a>相关的差异化开发历程进行了说明。</p>
<p>开发者可以使用HUAWEI DevEco Studio（<a href="https://developer.harmonyos.com/cn/develop/deveco-studio#download" target="_blank" rel="noopener">点击链接获取工具</a>）开发HarmonyOS用户应用程序。HUAWEI DevEco Studio是面向华为终端全场景多设备的一站式集成开发环境（IDE）。</p>
<p>除此之外，本导读还对<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/document-outline-0000001064589184#ZH-CN_TOPIC_0000001064589184__section642572414140" target="_blank" rel="noopener">开发者教程</a>、<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/document-outline-0000001064589184#ZH-CN_TOPIC_0000001064589184__section127698813613" target="_blank" rel="noopener">视频课程</a>等资源进行了汇总，使开发者可以直达所需资源。</p>
<h3 id="通用开发历程"><a href="#通用开发历程" class="headerlink" title="通用开发历程"></a>通用开发历程</h3><p>各类设备（手机/平板、智能穿戴、智慧屏等）通用的用户应用程序开发历程如下表所示。</p>
<p>无法复制加载中的内容</p>
<h3 id="原子化服务开发历程"><a href="#原子化服务开发历程" class="headerlink" title="原子化服务开发历程"></a>原子化服务开发历程</h3><p>HarmonyOS除支持传统方式的需要安装的应用外，还支持提供特定功能的免安装的应用（即原子化服务），供用户在合适的场景、合适的设备上便捷使用。</p>
<p>原子化服务相对于传统方式的需要安装的应用更加轻量，同时提供更丰富的入口、更精准的分发。原子化服务的详细介绍请参见“<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/atomic-service-definition-0000001090840664" target="_blank" rel="noopener">原子化服务</a>”。</p>
<p>其基本开发历程如下表所示。</p>
<p>无法复制加载中的内容</p>
<h3 id="设备差异化开发历程"><a href="#设备差异化开发历程" class="headerlink" title="设备差异化开发历程"></a>设备差异化开发历程</h3><p>相对于<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/document-outline-0000001064589184#ZH-CN_TOPIC_0000001064589184__section149501044202918" target="_blank" rel="noopener">通用开发历程</a>，智能穿戴、智慧屏存在一些特殊应用开发场景，其补充指导如下表所示。</p>
<p>无法复制加载中的内容</p>
<h3 id="开发者教程"><a href="#开发者教程" class="headerlink" title="开发者教程"></a>开发者教程</h3><p>针对重点功能或场景的开发者教程如下表所示。</p>
<p>无法复制加载中的内容</p>
<h3 id="视频课程"><a href="#视频课程" class="headerlink" title="视频课程"></a>视频课程</h3><p>无法复制加载中的内容</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="系统定义"><a href="#系统定义" class="headerlink" title="系统定义"></a>系统定义</h3><h4 id="系统定位"><a href="#系统定位" class="headerlink" title="系统定位"></a>系统定位</h4><p>HarmonyOS是一款面向万物互联时代的、全新的分布式操作系统。在传统的单设备系统能力基础上，HarmonyOS提出了基于同一套系统能力、适配多种终端形态的分布式理念，能够支持手机、平板、智能穿戴、智慧屏、车机等多种终端设备，提供全场景（移动办公、运动健康、社交通信、媒体娱乐等）业务能力。</p>
<p>HarmonyOS有三大特征：</p>
<ul>
<li><p>搭载该操作系统的设备在系统层面融为一体、形成超级终端，让设备的硬件能力可以弹性扩展，实现设备之间<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__section3784192251716" target="_blank" rel="noopener">硬件互助，资源共享</a>。对消费者而言，HarmonyOS能够将生活场景中的各类终端进行能力整合，实现不同终端设备之间的快速连接、能力互助、资源共享，匹配合适的设备、提供流畅的全场景体验。</p>
</li>
<li><p>面向开发者，实现<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__section35241557442" target="_blank" rel="noopener">一次开发，多端部署</a>。对应用开发者而言，HarmonyOS采用了多种分布式技术，使应用开发与不同终端设备的形态差异无关，从而让开发者能够聚焦上层业务逻辑，更加便捷、高效地开发应用。</p>
</li>
<li><p>一套操作系统可以满足不同能力的设备需求，实现<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__section1169115112119" target="_blank" rel="noopener">统一OS，弹性部署</a>。对设备开发者而言，HarmonyOS采用了组件化的设计方案，可根据设备的资源能力和业务特征灵活裁剪，满足不同形态终端设备对操作系统的要求。</p>
</li>
</ul>
<p>HarmonyOS提供了支持多种开发语言的API，供开发者进行应用开发。支持的开发语言包括Java、XML（Extensible Markup Language）、C/C++ 、 JS（JavaScript）、CSS（Cascading Style Sheets）和HML（HarmonyOS Markup Language）。</p>
<h3 id="技术架构"><a href="#技术架构" class="headerlink" title="技术架构"></a>技术架构</h3><p>HarmonyOS整体遵从分层设计，从下向上依次为：内核层、系统服务层、框架层和应用层。系统功能按照“系统 &gt; 子系统 &gt; 功能/模块”逐级展开，在多设备部署场景下，支持根据实际需求裁剪某些非必要的子系统或功能/模块。HarmonyOS技术架构如下所示。</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=NTI0YzAxNTNiNjlhYTlmNWNmZDYxMTYxNDMzMGQ5N2VfZHpWdVoyb0o5dUVFSU9UOVBXTTBlUm9ySm95NjFWZHpfVG9rZW46Ym94Y25BcWlKUDFMN2JWVDJCWnhrM0F4aDNjXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h4 id="内核层"><a href="#内核层" class="headerlink" title="内核层"></a>内核层</h4><ul>
<li><p>内核子系统：HarmonyOS采用多内核设计，支持针对不同资源受限设备选用适合的OS内核。内核抽象层（KAL，Kernel Abstract Layer）通过屏蔽多内核差异，对上层提供基础的内核能力，包括进程/线程管理、内存管理、文件系统、网络管理和外设管理等。</p>
</li>
<li><p>驱动子系统：<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#ZH-CN_TOPIC_0000001114162884__li1544183516475" target="_blank" rel="noopener">硬件驱动框架（HDF）</a>是HarmonyOS硬件生态开放的基础，提供统一外设访问能力和驱动开发、管理框架。</p>
</li>
</ul>
<h4 id="系统服务层"><a href="#系统服务层" class="headerlink" title="系统服务层"></a>系统服务层</h4><p>系统服务层是HarmonyOS的核心能力集合，通过框架层对应用程序提供服务。该层包含以下几个部分：</p>
<ul>
<li><p>系统基本能力子系统集：为分布式应用在HarmonyOS多设备上的运行、调度、迁移等操作提供了基础能力，由分布式软总线、分布式数据管理、分布式任务调度、方舟多语言运行时、公共基础库、多模输入、图形、安全、AI等子系统组成。其中，方舟运行时提供了C/C++/JS多语言运行时和基础的系统类库，也为使用方舟编译器静态化的Java程序（即应用程序或框架层中使用Java语言开发的部分）提供运行时。</p>
</li>
<li><p>基础软件服务子系统集：为HarmonyOS提供公共的、通用的软件服务，由事件通知、电话、多媒体、DFX（Design For X） 、<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#ZH-CN_TOPIC_0000001114162884__li1113671654618" target="_blank" rel="noopener">MSDP</a>&amp;<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#ZH-CN_TOPIC_0000001114162884__li13399361415" target="_blank" rel="noopener">DV</a>等子系统组成。</p>
</li>
<li><p>增强软件服务子系统集：为HarmonyOS提供针对不同设备的、差异化的能力增强型软件服务，由智慧屏专有业务、穿戴专有业务、IoT专有业务等子系统组成。</p>
</li>
<li><p>硬件服务子系统集：为HarmonyOS提供硬件服务，由位置服务、生物特征识别、穿戴专有硬件服务、IoT专有硬件服务等子系统组成。</p>
</li>
</ul>
<p>根据不同设备形态的部署环境，基础软件服务子系统集、增强软件服务子系统集、硬件服务子系统集内部可以按子系统粒度裁剪，每个子系统内部又可以按功能粒度裁剪。</p>
<h4 id="框架层"><a href="#框架层" class="headerlink" title="框架层"></a>框架层</h4><p>框架层为HarmonyOS应用开发提供了Java/C/C++/JS等多语言的用户程序框架和<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#ZH-CN_TOPIC_0000001114162884__li1373094219463" target="_blank" rel="noopener">Ability</a>框架，两种UI框架（包括适用于Java语言的Java UI框架、适用于JS语言的JS UI框架），以及各种软硬件服务对外开放的多语言框架API。根据系统的组件化裁剪程度，HarmonyOS设备支持的API也会有所不同。</p>
<h4 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h4><p>应用层包括系统应用和第三方非系统应用。HarmonyOS的应用由一个或多个<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#ZH-CN_TOPIC_0000001114162884__li102311923104712" target="_blank" rel="noopener">FA（Feature Ability）</a>或<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#ZH-CN_TOPIC_0000001114162884__li11872193812460" target="_blank" rel="noopener">PA（Particle Ability）</a>组成。其中，FA有UI界面，提供与用户交互的能力；而PA无UI界面，提供后台运行任务的能力以及统一的数据访问抽象。FA在进行用户交互时所需的后台数据访问也需要由对应的PA提供支撑。基于FA/PA开发的应用，能够实现特定的业务功能，支持跨设备调度与分发，为用户提供一致、高效的应用体验</p>
<h3 id="技术特性"><a href="#技术特性" class="headerlink" title="技术特性"></a>技术特性</h3><h4 id="硬件互助，资源共享"><a href="#硬件互助，资源共享" class="headerlink" title="硬件互助，资源共享"></a>硬件互助，资源共享</h4><p>多种设备之间能够实现硬件互助、资源共享，依赖的关键技术包括<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__section19559317185" target="_blank" rel="noopener">分布式软总线</a>、<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__section175824210187" target="_blank" rel="noopener">分布式设备虚拟化</a>、<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__section1128391014200" target="_blank" rel="noopener">分布式数据管理</a>、<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__section417848172013" target="_blank" rel="noopener">分布式任务调度</a>等。</p>
<h5 id="分布式软总线"><a href="#分布式软总线" class="headerlink" title="分布式软总线"></a>分布式软总线</h5><p>分布式软总线是手机、平板、智能穿戴、智慧屏、车机等分布式设备的通信基座，为设备之间的互联互通提供了统一的分布式通信能力，为设备之间的无感发现和零等待传输创造了条件。开发者只需聚焦于业务逻辑的实现，无需关注组网方式与底层协议。分布式软总线示意图见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__fig161268496183" target="_blank" rel="noopener">图1</a>。</p>
<p>典型应用场景举例：</p>
<ul>
<li><p>智能家居场景：在烹饪时，手机可以通过碰一碰和烤箱连接，并将自动按照菜谱设置烹调参数，控制烤箱来制作菜肴。与此类似，料理机、油烟机、空气净化器、空调、灯、窗帘等都可以在手机端显示并通过手机控制。设备之间即连即用，无需繁琐的配置。</p>
</li>
<li><p>多屏联动课堂：老师通过智慧屏授课，与学生开展互动，营造课堂氛围；学生通过手机完成课程学习和随堂问答。统一、全连接的逻辑网络确保了传输通道的高带宽、低时延、高可靠。</p>
</li>
</ul>
<p><strong>图1</strong> 分布式软总线示意图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=MTUwYzg1N2ZiMDNhZWQ0ZjNiZTNmMGY1YjkwYWY5MjNfczhyMzd1VkwwNG8xWXJQajA3SVhDT2NRRzR2NzFwOUVfVG9rZW46Ym94Y25STThlbkRISWgyeGgzejhBZW9LQ1RiXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h5 id="分布式设备虚拟化"><a href="#分布式设备虚拟化" class="headerlink" title="分布式设备虚拟化"></a>分布式设备虚拟化</h5><p>分布式设备虚拟化平台可以实现不同设备的资源融合、设备管理、数据处理，多种设备共同形成一个<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#ZH-CN_TOPIC_0000001114162884__li1133517458578" target="_blank" rel="noopener">超级虚拟终端</a>。针对不同类型的任务，为用户匹配并选择能力合适的执行硬件，让业务连续地在不同设备间流转，充分发挥不同设备的能力优势，如显示能力、摄像能力、音频能力、交互能力以及传感器能力等。分布式设备虚拟化示意图见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__fig132695520204" target="_blank" rel="noopener">图2</a>。</p>
<p>典型应用场景举例：</p>
<ul>
<li><p>视频通话场景：在做家务时接听视频电话，可以将手机与智慧屏连接，并将智慧屏的屏幕、摄像头与音箱虚拟化为本地资源，替代手机自身的屏幕、摄像头、听筒与扬声器，实现一边做家务、一边通过智慧屏和音箱来视频通话。</p>
</li>
<li><p>游戏场景：在智慧屏上玩游戏时，可以将手机虚拟化为遥控器，借助手机的重力传感器、加速度传感器、触控能力，为玩家提供更便捷、更流畅的游戏体验。</p>
</li>
</ul>
<p><strong>图2</strong> 分布式设备虚拟化示意图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=ZThiMzY0NDdjYmJjMzg0ZjIwZTliMTJhMGNmM2I0ODJfYjVRSUhOblFSU1FSUlZkNVFyQ2lPZGlENTdtRXdkZGhfVG9rZW46Ym94Y253bkc5MDk4SE53cUVPeDBsZkZ1WUswXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h5 id="分布式数据管理"><a href="#分布式数据管理" class="headerlink" title="分布式数据管理"></a>分布式数据管理</h5><p>分布式数据管理基于分布式软总线的能力，实现应用程序数据和用户数据的分布式管理。用户数据不再与单一物理设备绑定，业务逻辑与数据存储分离，跨设备的数据处理如同本地数据处理一样方便快捷，让开发者能够轻松实现全场景、多设备下的数据存储、共享和访问，为打造一致、流畅的用户体验创造了基础条件。分布式数据管理示意图见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__fig3742124117202" target="_blank" rel="noopener">图3</a>。</p>
<p>典型应用场景举例：</p>
<ul>
<li><p>协同办公场景：将手机上的文档投屏到智慧屏，在智慧屏上对文档执行翻页、缩放、涂鸦等操作，文档的最新状态可以在手机上同步显示。</p>
</li>
<li><p>家庭出游场景：一家人出游时，妈妈用手机拍了很多照片。通过家庭照片共享，爸爸可以在自己的手机上浏览、收藏和保存这些照片，家中的爷爷奶奶也可以通过智慧屏浏览这些照片。</p>
</li>
</ul>
<p><strong>图3</strong> 分布式数据管理示意图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=OGE1NWE4YTYwN2ZjMmZjMTJjZDk5NGI0ZDhlMDNlOTlfVGFYQXFCY0pWRkVIZXhVYmd3emRCU3pmRU9teTR6M3BfVG9rZW46Ym94Y25kOEtielk1VFRUdUdpRUhySDZTYUxjXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h5 id="分布式任务调度"><a href="#分布式任务调度" class="headerlink" title="分布式任务调度"></a>分布式任务调度</h5><p>分布式任务调度基于分布式软总线、分布式数据管理、分布式Profile等技术特性，构建统一的分布式服务管理（发现、同步、注册、调用）机制，支持对跨设备的应用进行远程启动、远程调用、远程连接以及迁移等操作，能够根据不同设备的能力、位置、业务运行状态、资源使用情况，以及用户的习惯和意图，选择合适的设备运行分布式任务。</p>
<p><a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__fig112114152116" target="_blank" rel="noopener">图4</a>以应用迁移为例，简要地展示了分布式任务调度能力。</p>
<p>典型应用场景举例：</p>
<ul>
<li><p>导航场景：如果用户驾车出行，上车前，在手机上规划好导航路线；上车后，导航自动迁移到车机和车载音箱；下车后，导航自动迁移回手机。如果用户骑车出行，在手机上规划好导航路线，骑行时手表可以接续导航。</p>
</li>
<li><p>外卖场景：在手机上点外卖后，可以将订单信息迁移到手表上，随时查看外卖的配送状态。</p>
</li>
</ul>
<p><strong>图4</strong> 分布式任务调度示意图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=OWYxZjA5NzkxMThhNzdmZmI0ZWEwNTUwZGQ3M2MwYTBfVkVNZXZDSTd5ZG5sU3Qxa3ZCSG5nUEt4Vlg2QkJOaHVfVG9rZW46Ym94Y25yRjBndjJTeWx1MmJZOExCSWNnUEdkXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h4 id="一次开发，多端部署"><a href="#一次开发，多端部署" class="headerlink" title="一次开发，多端部署"></a>一次开发，多端部署</h4><p>HarmonyOS提供了用户程序框架、<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#ZH-CN_TOPIC_0000001114162884__li1373094219463" target="_blank" rel="noopener">Ability</a>框架以及UI框架，支持应用开发过程中多终端的业务逻辑和界面逻辑进行复用，能够实现应用的一次开发、多端部署，提升了跨设备应用的开发效率。一次开发、多端部署示意图见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-features-0000000000011907#ZH-CN_TOPIC_0000001063953283__fig087974703213" target="_blank" rel="noopener">图5</a>。</p>
<p>其中，UI框架支持Java和JS两种开发语言，并提供了丰富的多态控件，可以在手机、平板、智能穿戴、智慧屏、车机上显示不同的UI效果。采用业界主流设计方式，提供多种响应式布局方案，支持栅格化布局，满足不同屏幕的界面适配能力。</p>
<p><strong>图5</strong> 一次开发、多端部署示意图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=MjkxOWM5YWY5NjU5YzI5YmZkNDRiMDVmYjVlMDM1YWFfZDlxVHgwckg5UkVTWG1pMm15cFZ2dkx6NnZNQlJWbUJfVG9rZW46Ym94Y242TWJDb0ExcFVlY1lVcHRrVHRJVE9oXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h4 id="统一OS，弹性部署"><a href="#统一OS，弹性部署" class="headerlink" title="统一OS，弹性部署"></a>统一OS，弹性部署</h4><p>HarmonyOS通过组件化和小型化等设计方法，支持多种终端设备按需弹性部署，能够适配不同类别的硬件资源和功能需求。支撑通过编译链关系去自动生成组件化的依赖关系，形成组件树依赖图，支撑产品系统的便捷开发，降低硬件设备的开发门槛。</p>
<ul>
<li><p><strong>支持各组件的选择（组件可有可无）</strong>：根据硬件的形态和需求，可以选择所需的组件。</p>
</li>
<li><p><strong>支持组件内功能集的配置（组件可大可小）</strong>：根据硬件的资源情况和功能需求，可以选择配置组件中的功能集。例如，选择配置图形框架组件中的部分控件。</p>
</li>
<li><p><strong>支持组件间依赖的关联（平台可大可小）</strong>：根据编译链关系，可以自动生成组件化的依赖关系。例如，选择图形框架组件，将会自动选择依赖的图形引擎组件等。</p>
</li>
</ul>
<h3 id="系统安全"><a href="#系统安全" class="headerlink" title="系统安全"></a>系统安全</h3><p>在搭载HarmonyOS的分布式终端上，可以保证“<strong>正确的人，通过正确的设备，正确地使用数据</strong>”。</p>
<ul>
<li><p>通过“分布式多端协同身份认证”来保证“正确的人”。</p>
</li>
<li><p>通过“在分布式终端上构筑可信运行环境”来保证“正确的设备”。</p>
</li>
<li><p>通过“分布式数据在跨终端流动的过程中，对数据进行分类分级管理”来保证“正确地使用数据”。</p>
</li>
</ul>
<h4 id="正确的人"><a href="#正确的人" class="headerlink" title="正确的人"></a>正确的人</h4><p>在分布式终端场景下，“正确的人”指通过身份认证的数据访问者和业务操作者。“正确的人”是确保用户数据不被非法访问、用户隐私不泄露的前提条件。HarmonyOS通过以下三个方面来实现协同身份认证：</p>
<ul>
<li><p><strong>零信任模型</strong>：HarmonyOS基于零信任模型，实现对用户的认证和对数据的访问控制。当用户需要跨设备访问数据资源或者发起高安全等级的业务操作（例如，对安防设备的操作）时，HarmonyOS会对用户进行身份认证，确保其身份的可靠性。</p>
</li>
<li><p><strong>多因素融合认证</strong>：HarmonyOS通过用户身份管理，将不同设备上标识同一用户的认证凭据关联起来，用于标识一个用户，来提高认证的准确度。</p>
</li>
<li><p><strong>协同互助认证</strong>：HarmonyOS通过将硬件和认证能力解耦（即信息采集和认证可以在不同的设备上完成），来实现不同设备的资源池化以及能力的互助与共享，让高安全等级的设备协助低安全等级的设备完成用户身份认证。</p>
</li>
</ul>
<h4 id="正确的设备"><a href="#正确的设备" class="headerlink" title="正确的设备"></a>正确的设备</h4><p>在分布式终端场景下，只有保证用户使用的设备是安全可靠的，才能保证用户数据在虚拟终端上得到有效保护，避免用户隐私泄露。</p>
<ul>
<li><p><strong>安全启动</strong>确保源头每个虚拟设备运行的系统固件和应用程序是完整的、未经篡改的。通过安全启动，各个设备厂商的镜像包就不易被非法替换为恶意程序，从而保护用户的数据和隐私安全。</p>
</li>
<li><p><strong>可信执行环境</strong>提供了基于硬件的可信执行环境（TEE，Trusted Execution Environment）来保护用户的个人敏感数据的存储和处理，确保数据不泄露。由于分布式终端硬件的安全能力不同，对于用户的敏感个人数据，需要使用高安全等级的设备进行存储和处理。HarmonyOS使用基于数学可证明的形式化开发和验证的TEE微内核，获得了商用OS内核CC EAL5+的认证评级。</p>
</li>
<li><p><strong>设备证书认证</strong>支持为具备可信执行环境的设备预置设备证书，用于向其他虚拟终端证明自己的安全能力。对于有TEE环境的设备，通过预置PKI（Public Key Infrastructure）设备证书给设备身份提供证明，确保设备是合法制造生产的。设备证书在产线进行预置，设备证书的私钥写入并安全保存在设备的TEE环境中，且只在TEE内进行使用。在必须传输用户的敏感数据（例如密钥、加密的生物特征等信息）时，会在使用设备证书进行安全环境验证后，建立从一个设备的TEE到另一设备的TEE之间的安全通道，实现安全传输。如<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/harmonyos-security-0000000000011934#ZH-CN_TOPIC_0000001064631506__fig18701947894" target="_blank" rel="noopener">图1</a>所示。</p>
</li>
</ul>
<p><strong>图1</strong> 设备证书使用示意图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=MTA0MDg5YjkwMWRiYjY2YzRkNjQ3NTFjNjM0MDc1M2RfZW83QkhSUUVQQmlFeXJteTRlUzJGazE0V01PRENlM2dfVG9rZW46Ym94Y25HbndkbEVicG5jZGNTTjdKenFEdWRiXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h4 id="正确地使用数据"><a href="#正确地使用数据" class="headerlink" title="正确地使用数据"></a>正确地使用数据</h4><p>在分布式终端场景下，需要确保用户能够正确地使用数据<strong>。</strong>HarmonyOS围绕数据的生成、存储、使用、传输以及销毁过程进行全生命周期的保护，从而保证个人数据与隐私、以及系统的机密数据（如密钥）不泄漏。</p>
<ul>
<li><p><strong>数据生成</strong>：根据数据所在的国家或组织的法律法规与标准规范，对数据进行分类分级，并且根据分类设置相应的保护等级。每个保护等级的数据从生成开始，在其存储、使用、传输的整个生命周期都需要根据对应的安全策略提供不同强度的安全防护。虚拟超级终端的访问控制系统支持依据标签的访问控制策略，保证数据只能在可以提供足够安全防护的虚拟终端之间存储、使用和传输。</p>
</li>
<li><p><strong>数据存储：</strong>HarmonyOS通过区分数据的安全等级，存储到不同安全防护能力的分区，对数据进行安全保护，并提供密钥全生命周期的跨设备无缝流动和跨设备密钥访问控制能力，支撑分布式身份认证协同、分布式数据共享等业务。</p>
</li>
<li><p><strong>数据使用：</strong>HarmonyOS通过硬件为设备提供可信执行环境。用户的个人敏感数据仅在分布式虚拟终端的可信执行环境中进行使用，确保用户数据的安全和隐私不泄露。</p>
</li>
<li><p><strong>数据传输：</strong>为了保证数据在虚拟超级终端之间安全流转，需要各设备是正确可信的，建立了信任关系（多个设备通过华为帐号建立配对关系），并能够在验证信任关系后，建立安全的连接通道，按照数据流动的规则，安全地传输数据。当设备之间进行通信时，需要基于设备的身份凭据对设备进行身份认证，并在此基础上，建立安全的加密传输通道。</p>
</li>
<li><p><strong>数据销毁：</strong>销毁密钥即销毁数据。数据在虚拟终端的存储，都建立在密钥的基础上。当销毁数据时，只需要销毁对应的密钥即完成了数据的销毁</p>
</li>
</ul>
<h2 id="开发基础知识"><a href="#开发基础知识" class="headerlink" title="开发基础知识"></a>开发基础知识</h2><h3 id="应用基础知识"><a href="#应用基础知识" class="headerlink" title="应用基础知识"></a>应用基础知识</h3><h4 id="用户应用程序"><a href="#用户应用程序" class="headerlink" title="用户应用程序"></a>用户应用程序</h4><p>用户应用程序泛指运行在设备的操作系统之上，为用户提供特定服务的程序，简称“应用”。</p>
<p>在HarmonyOS上运行的应用，有两种形态：</p>
<ul>
<li><p>传统方式的需要安装的应用。</p>
</li>
<li><p>提供特定功能，免安装的应用（即<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/atomic-service-definition-0000001090840664" target="_blank" rel="noopener">原子化服务</a>）。</p>
</li>
</ul>
<p>在HarmonyOS文档中，如无特殊说明，“应用”所指代的对象包括上述两种形态。</p>
<h4 id="用户应用程序包结构"><a href="#用户应用程序包结构" class="headerlink" title="用户应用程序包结构"></a>用户应用程序包结构</h4><p>HarmonyOS的用户应用程序包以<strong>APP</strong> <strong>Pack</strong>（Application Package）形式发布，它是由一个或多个<strong>HAP</strong>（HarmonyOS Ability Package）以及描述每个HAP属性的pack.info组成。HAP是<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-fundamentals-0000000000041611#ZH-CN_TOPIC_0000001063248002__section121002188527" target="_blank" rel="noopener">Ability</a>的部署包，HarmonyOS应用代码围绕Ability组件展开。</p>
<p>一个HAP是由代码、资源、第三方库及应用配置文件组成的模块包，可分为entry和feature两种模块类型，如<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-fundamentals-0000000000041611#ZH-CN_TOPIC_0000001063248002__fig2196184212719" target="_blank" rel="noopener">图1</a>所示。</p>
<ul>
<li><p><strong>entry</strong>：应用的主模块。一个APP中，对于同一设备类型必须有且只有一个entry类型的HAP，可独立安装运行。</p>
</li>
<li><p><strong>feature</strong>：应用的动态特性模块。一个APP可以包含一个或多个feature类型的HAP，也可以不含。只有包含Ability的HAP才能够独立运行。</p>
</li>
</ul>
<p><strong>图1</strong> APP逻辑视图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=YjE3YWZhMWQyMmFiNTE3NjZjOWQ1MDY4MWYwYWMyZDdfZlp1UGg0RkN4NXpHbVJqNXUxWEVYNzJnWDNzNXlDdkRfVG9rZW46Ym94Y25pR2pIWXA5OHl1VlFWSU5YWmRVYVVlXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h4 id="Ability"><a href="#Ability" class="headerlink" title="Ability"></a>Ability</h4><p>Ability是应用所具备的能力的抽象，一个应用可以包含一个或多个Ability。Ability分为两种类型：FA（Feature Ability）和PA（Particle Ability）。FA/PA是应用的基本组成单元，能够实现特定的业务功能。FA有UI界面，而PA无UI界面。</p>
<h4 id="库文件"><a href="#库文件" class="headerlink" title="库文件"></a>库文件</h4><p>库文件是应用依赖的第三方代码（例如so、jar、bin、har等二进制文件），存放在libs目录。</p>
<h4 id="资源文件"><a href="#资源文件" class="headerlink" title="资源文件"></a>资源文件</h4><p>应用的资源文件（字符串、图片、音频等）存放于resources目录下，便于开发者使用和维护，详见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-categories-0000001052066099" target="_blank" rel="noopener">资源文件的分类</a>。</p>
<h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><p>配置文件 (config.json) 是应用的Ability信息，用于声明应用的Ability，以及应用所需权限等信息，详见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-config-file-overview-0000000000011951" target="_blank" rel="noopener">应用配置文件</a>。</p>
<h4 id="pack-info"><a href="#pack-info" class="headerlink" title="pack.info"></a>pack.info</h4><p>描述应用软件包中每个HAP的属性，由IDE编译生成，应用市场根据该文件进行拆包和HAP的分类存储。HAP的具体属性包括：</p>
<ul>
<li><p>delivery-with-install: 表示该HAP是否支持随应用安装。“true”表示支持随应用安装；“false”表示不支持随应用安装。</p>
</li>
<li><p>name：HAP文件名。</p>
</li>
<li><p>module-type：模块类型，entry或feature。</p>
</li>
<li><p>device-type：表示支持该HAP运行的设备类型。</p>
</li>
</ul>
<h4 id="HAR"><a href="#HAR" class="headerlink" title="HAR"></a>HAR</h4><p>HAR（HarmonyOS Ability Resources）可以提供构建应用所需的所有内容，包括源代码、资源文件和config.json文件。HAR不同于HAP，HAR不能独立安装运行在设备上，只能作为应用模块的依赖项被引用。</p>
<h3 id="应用配置文件"><a href="#应用配置文件" class="headerlink" title="应用配置文件"></a>应用配置文件</h3><p>应用的每个HAP的根目录下都存在一个“config.json”配置文件，文件内容主要涵盖以下三个方面：</p>
<ul>
<li><p>应用的全局配置信息，包含应用的包名、生产厂商、版本号等基本信息。</p>
</li>
<li><p>应用在具体设备上的配置信息，包含应用的备份恢复、网络安全等能力。</p>
</li>
<li><p>HAP包的配置信息，包含每个Ability必须定义的基本属性（如包名、类名、类型以及Ability提供的能力），以及应用访问系统或其他应用受保护部分所需的权限等。</p>
</li>
</ul>
<h4 id="配置文件的组成"><a href="#配置文件的组成" class="headerlink" title="配置文件的组成"></a>配置文件的组成</h4><p>配置文件“config.json”采用JSON文件格式，其中包含了一系列配置项，每个配置项由属性和值两部分构成：</p>
<ul>
<li><p><strong>属性</strong>属性出现顺序不分先后，且每个属性最多只允许出现一次。</p>
</li>
<li><p><strong>值</strong>每个属性的值为JSON的基本数据类型（数值、字符串、布尔值、数组、对象或者null类型）。如果属性值需要引用资源文件，可参见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-categories-0000001052066099" target="_blank" rel="noopener">资源文件</a>。</p>
</li>
</ul>
<p>DevEco Studio提供了两种编辑“config.json”文件的方式。在“config.json”的编辑窗口中，可在右上角切换代码编辑视图或可视化编辑视图。</p>
<p><strong>图1</strong> config.json文件的可视化编辑视图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=NGQ2MGY0N2M3ZTAzOWM2YWRjMzhkMTgwM2MzNTEzZjRfYWhlTjVoQ3VOOEFOaWpJMFBGUzYwVkVSelMyUXQ0dWhfVG9rZW46Ym94Y25pdWJOOGtoZEttWW90SWNIVW9IWHpnXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h4 id="配置文件的内部结构"><a href="#配置文件的内部结构" class="headerlink" title="配置文件的内部结构"></a>配置文件的内部结构</h4><p>“config.json”由“app”、“deviceConfig”和“module”三个部分组成，缺一不可。配置文件的内部结构说明参见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-config-file-elements-0000000000034463#ZH-CN_TOPIC_0000001064016070__table18140155505115" target="_blank" rel="noopener">表1</a>。</p>
<p>无法复制加载中的内容</p>
<h4 id="app对象的内部结构"><a href="#app对象的内部结构" class="headerlink" title="app对象的内部结构"></a>app对象的内部结构</h4><p>app对象包含应用的全局配置信息，内部结构说明参见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-config-file-elements-0000000000034463#ZH-CN_TOPIC_0000001064016070__table88551601573" target="_blank" rel="noopener">表2</a>。</p>
<p>无法复制加载中的内容</p>
<p>app示例：</p>
<pre><code>"app": {
    "bundleName": "com.huawei.hiworld.example", 
    "vendor": "huawei", 
    "version": {
        "code": 2, 
        "name": "2.0"
    },
    "apiVersion": {
        "compatible": 3, 
        "target": 3,
        "releaseType": "Beta1"
    }
}</code></pre><h4 id="deviceConfig对象的内部结构"><a href="#deviceConfig对象的内部结构" class="headerlink" title="deviceConfig对象的内部结构"></a>deviceConfig对象的内部结构</h4><p>deviceConfig包含在具体设备上的应用配置信息，可以包含default、phone、tablet、tv、car、wearable、liteWearable和smartVision等属性。default标签内的配置是适用于所有设备通用，其他设备类型如果有特殊的需求，则需要在该设备类型的标签下进行配置。内部结构说明参见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-config-file-elements-0000000000034463#ZH-CN_TOPIC_0000001064016070__table34298422421" target="_blank" rel="noopener">表3</a>。</p>
<p>无法复制加载中的内容</p>
<p>default、phone、tablet、tv、car、wearable、liteWearable和smartVision等对象的内部结构说明，可参见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-config-file-elements-0000000000034463#ZH-CN_TOPIC_0000001064016070__table34321642154215" target="_blank" rel="noopener">表4</a>。</p>
<p>无法复制加载中的内容</p>
<p>无法复制加载中的内容</p>
<p>无法复制加载中的内容</p>
<p>deviceConfig示例：</p>
<pre><code> "deviceConfig": {
    "default": {
        "process": "com.huawei.hiworld.example", 
        "supportBackup": false,
        "network": {
            "cleartextTraffic": true, 
            "securityConfig": {
                "domainSettings": {
                    "cleartextPermitted": true, 
                    "domains": [
                        {
                            "subDomains": true, 
                            "name": "example.ohos.com"
                        }
                    ]
                }
            }
        }
    }
}
module对象的内部结构</code></pre><p>module对象包含HAP包的配置信息，内部结构说明参见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-config-file-elements-0000000000034463#ZH-CN_TOPIC_0000001064016070__table29242051154512" target="_blank" rel="noopener">表7</a>。</p>
<p>无法复制加载中的内容</p>
<p>module示例：</p>
<pre><code>"module": {
    "mainAbility": "MainAbility",
    "package": "com.example.myapplication.entry", 
    "name": ".MyOHOSAbilityPackage", 
    "description": "$string:description_application", 
    "supportedModes": [
        "drive"
    ], 
    "deviceType": [
        "car"
    ], 
    "distro": {
        "deliveryWithInstall": true, 
        "moduleName": "ohos_entry", 
        "moduleType": "entry"
    }, 
    "abilities": [
        ...
    ], 
    "shortcuts": [
        ...
    ],
    "js": [
        ...
    ], 
    "reqPermissions": [
        ...
    ], 
    "defPermissions": [
        ...
    ],
    "colorMode": "light"
}</code></pre><p>无法复制加载中的内容</p>
<p>distro示例：</p>
<pre><code>"distro": {
    "deliveryWithInstall": true, 
    "moduleName": "ohos_entry", 
    "moduleType": "entry",
    "installationFree": true
} </code></pre><p>无法复制加载中的内容</p>
<p>metaData示例：</p>
<pre><code>"metaData": {
    "parameters" : [{
        "name" : "string",
        "type" : "Float",
        "description" : "$string:parameters_description"
    }],
    "results" : [{
        "name" : "string",
        "type" : "Float",
        "description" : "$string:results_description"
    }],
    "customizeData" : [{
        "name" : "string",
        "value" : "string",
        "extra" : "$string:customizeData_description"
    }]
}</code></pre><p>无法复制加载中的内容</p>
<p>abilities示例：</p>
<pre><code>"abilities": [
    {
        "name": ".MainAbility",
        "description": "himusic main ability",
        "icon": "$media:ic_launcher",
        "label": "HiMusic",
        "launchType": "standard",
        "orientation": "unspecified",
        "permissions": [
        ], 
        "visible": true,
        "skills": [
            {
                "actions": [
                    "action.system.home"
                ],
                "entities": [
                    "entity.system.home"
                ]
            }
        ],
        "configChanges": [
            "locale", 
            "layout", 
            "fontSize", 
            "orientation"
        ], 
        "type": "page"
    },
    {
        "name": ".PlayService",
        "description": "himusic play ability",
        "icon": "$media:ic_launcher",
        "label": "HiMusic",
        "launchType": "standard",
        "orientation": "unspecified",
        "visible": false,
        "skills": [
            {
                "actions": [
                    "action.play.music",
                    "action.stop.music"
                ],
                "entities": [
                    "entity.audio"
                ]
            }
        ],
        "type": "service",
        "backgroundModes": [
            "audioPlayback"
        ]
    },
    {
        "name": ".UserADataAbility",
        "type": "data",
        "uri": "dataability://com.huawei.hiworld.himusic.UserADataAbility",
        "visible": true
    }
]</code></pre><p>无法复制加载中的内容</p>
<p>skills示例：</p>
<pre><code>"skills": [
    {
        "actions": [
            "action.system.home"
        ], 
        "entities": [
            "entity.system.home"
        ],
        "uris": [
            {
                 "scheme": "http",
                 "host": "www.xxx.com",
                 "port": "8080",
                 "path": "query/student/name",
                 "type": "text/*"
             }
         ]
    }
]</code></pre><p>无法复制加载中的内容</p>
<p>js示例：</p>
<pre><code>"js": [
    {
        "name": "default", 
        "pages": [            
            "pages/index/index",
            "pages/detail/detail"
        ],         
        "window": {
            "designWidth": 750,
            "autoDesignWidth": false
        },
        "type": "form"
    }
]</code></pre><p>无法复制加载中的内容</p>
<p>shortcuts示例：</p>
<pre><code>"shortcuts": [
    {
        "shortcutId": "id",
        "label": "$string:shortcut",
        "intents": [
            {
                "targetBundle": "com.huawei.hiworld.himusic",
                "targetClass": "com.huawei.hiworld.himusic.entry.MainAbility"
            }
        ]
    }
]</code></pre><p>无法复制加载中的内容</p>
<p>forms示例：</p>
<pre><code>"forms": [
    {
        "name": "Form_Js",
        "description": "It's Js Form",
        "type": "JS",
        "jsComponentName": "card",
        "colorMode": "auto",
        "isDefault": true,
        "updateEnabled": true,
        "scheduledUpdateTime": "11:00",
        "updateDuration": 1,
        "defaultDimension": "2*2",
        "supportDimensions": [
            "2*2",
            "2*4",
            "4*4"
        ]
    },
    {
        "name": "Form_Java",
        "description": "It's Java Form",
        "type": "Java",
        "colorMode": "auto",
        "isDefault": false,
        "updateEnabled": true,
        "scheduledUpdateTime": "21:05",
        "updateDuration": 1,
        "defaultDimension": "1*2",
        "supportDimensions": [
            "1*2"
        ],
        "landscapeLayouts": [
            "$layout:ability_form"
        ],
        "portraitLayouts": [
            "$layout:ability_form"
        ],
        "formConfigAbility": "ability://com.example.myapplication.fa/.MainAbility",
        "metaData": {
            "customizeData": [
                {
                    "name": "originWidgetName",
                    "value": "com.huawei.weather.testWidget"
                }
            ]
        }
    }
]
HAP与HAR的配置文件的合并</code></pre><p>如果应用模块中调用了HAR，在编译构建HAP时，需要将HAP的“config.json”文件与一个或多个HAR的“config.json”文件，合并为一个“config.json”文件。在合并过程中，不同文件的同一个标签的取值可能发生冲突，此时，需要通过配置mergeRule来解决冲突。</p>
<h4 id="配置文件合并规则"><a href="#配置文件合并规则" class="headerlink" title="配置文件合并规则"></a>配置文件合并规则</h4><p>HAP与HAR的“config.json”文件合并时，需要将HAR的配置信息全部合并到HAP的配置文件。合并规则参见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-config-file-elements-0000000000034463#ZH-CN_TOPIC_0000001064016070__table64031349202317" target="_blank" rel="noopener">表15</a><strong>。</strong></p>
<p>HAP的优先级总是高于HAR。当HAP依赖于多个HAR时，先加载的HAR的优先级高于后加载的HAR，按照HAR的加载顺序依次合并到HAP文件。</p>
<p>无法复制加载中的内容</p>
<h4 id="mergeRule对象的使用"><a href="#mergeRule对象的使用" class="headerlink" title="mergeRule对象的使用"></a>mergeRule对象的使用</h4><p>mergeRule通常在HAP的“config.json”文件中使用，可以在“abilities”、“defPermissions”、 “reqPermissions”、“js”等属性中添加。不同属性的合并策略，详见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-config-file-elements-0000000000034463#ZH-CN_TOPIC_0000001064016070__table194691504318" target="_blank" rel="noopener">表16</a>。</p>
<p>注意</p>
<ul>
<li><p>HAR配置文件中不能包含“action.system.home”和“entity.system.home”配置项，否则会导致编译报错。</p>
</li>
<li><p>abilities对象中“name”字段的取值，必须为完整的类名，否则会导致合并出错。</p>
</li>
</ul>
<p>无法复制加载中的内容</p>
<p>无法复制加载中的内容</p>
<p><strong>mergeRule的使用示例：</strong></p>
<p>在下面的示例中，HAP与HAR中的Ability的“name”取值相同，需要对两者“config.json”文件中的Ability进行合并。由于两个文件中的部分字段（例如“launchType”）存在冲突，需要在HAP的“abilities”标签下添加“mergeRule”。</p>
<ol>
<li>合并前HAP的“config.json”文件，如下所示：其中，remove表示合并后需要移除的子标签，replace表示合并后需要替换的子标签（HAP替换HAR）。</li>
</ol>
<pre><code>"abilities": [
    {
        "mergeRule": {
            "remove": ["orientation"],
            "replace": ["launchType"]
        }
        "name": "com.harmony.myapplication.entry.MainAbility",
        "type": "page",
        "launchType": "standard",
        "visible": false
    }
],</code></pre><ol>
<li>合并前HAR的“config.json”文件，如下所示：</li>
</ol>
<pre><code>"abilities": [
    {
        "name": "com.harmony.myapplication.entry.MainAbility",
        "type": "page",
        "launchType": "singleton",
        "orientation": "portrait",
        "visible": false
    }
],</code></pre><ol>
<li>将上述两个“config.json”文件按照mergeRule进行合并，处理完成后mergeRule字段也会被移除。合并后的结果文件，如下所示：</li>
</ol>
<pre><code>"abilities": [
    {
        "name": "com.harmony.myapplication.entry.MainAbility",
        "type": "page",
        "launchType": "standard",
        "visible": false
    }
],</code></pre><h4 id="bundleName占位符的使用"><a href="#bundleName占位符的使用" class="headerlink" title="bundleName占位符的使用"></a>bundleName占位符的使用</h4><p>HAR的“config.json”文件中多处需要使用包名，例如自定义权限、自定义action等场景，但是包名只有当HAR编译到HAP时才能确定下来。在编译之前，HAR中的包名可以采用占位符来表示，采用{bundleName}形式。</p>
<p>支持bundleName占位符的标签有actions、entities、permissions、readPermission、writePermission、defPermissions.name、uri。</p>
<p><strong>使用示例：</strong></p>
<ol>
<li>HAR中自定义action时，使用{bundleName}来代替包名。如下所示：</li>
</ol>
<pre><code>"skills": [
    {
        "actions": [
            "{bundleName}.ACTION_PLAY"
        ],
        "entities": [
            "{bundleName}.ENTITY_PLAY"
        ],
    }
],</code></pre><ol>
<li>将HAP编译到bundleName为“com.huawei.hiworld”的HAP包后，原来的{bundleName}将被替换为HAP的实际包名。替换后的结果如下所示：</li>
</ol>
<pre><code>"app": {
    "bundleName": "com.huawei.hiworld",
    ……
},
"module": {
    "abilities": [
        {
            "skills": [
                {
                    "actions": [
                        "com.huawei.hiworld.ACTION_PLAY"
                    ],
                    "entities": [
                        "com.huawei.hiworld.ENTITY_PLAY"
                    ],
                }
            ],</code></pre><h4 id="配置文件示例"><a href="#配置文件示例" class="headerlink" title="配置文件示例"></a>配置文件示例</h4><p>以JSON文件为config.json的一个简单示例，该示例的应用声明为三个Ability。</p>
<pre><code>{
    "app": {
        "bundleName": "com.huawei.hiworld.himusic",
        "vendor": "huawei",
        "version": {
            "code": 2, 
            "name": "2.0"
        },
        "apiVersion": {
            "compatible": 3, 
            "target": 3,
            "releaseType": "Beta1"
        }
    },
    "deviceConfig": {
        "default": {
        }
    },
    "module": {
        "mainAbility": "MainAbility",
        "package": "com.huawei.hiworld.himusic.entry",
        "name": ".MainApplication",
        "supportedModes": [
            "drive"
        ],
        "distro": {
            "moduleType": "entry",
            "deliveryWithInstall": true,
            "moduleName": "hap-car"
        },
        "deviceType": [
            "car"
        ],
        "abilities": [
            {
                "name": ".MainAbility",
                "description": "himusic main ability",
                "icon": "$media:ic_launcher",
                "label": "HiMusic",
                "launchType": "standard",
                "orientation": "unspecified",
                "visible": true,
                "skills": [
                    {
                        "actions": [
                            "action.system.home"
                        ],
                        "entities": [
                            "entity.system.home"
                        ]
                    }
                ],
                "type": "page",
                "formsEnabled": false
            },
            {
                "name": ".PlayService",
                "description": "himusic play ability",
                "icon": "$media:ic_launcher",
                "label": "HiMusic",
                "launchType": "standard",
                "orientation": "unspecified",
                "visible": false,
                "skills": [
                    {
                        "actions": [
                            "action.play.music",
                            "action.stop.music"
                        ],
                        "entities": [
                            "entity.audio"
                        ]
                    }
                ],
                "type": "service",
                "backgroundModes": [
                    "audioPlayback"
                ]
            },
            {
                "name": ".UserADataAbility",
                "type": "data",
                "uri": "dataability://com.huawei.hiworld.himusic.UserADataAbility",
                "visible": true
            }
        ],
        "reqPermissions": [
            {
                "name": "ohos.permission.DISTRIBUTED_DATASYNC",
                "reason": "",
                "usedScene": {
                    "ability": [
                        "com.huawei.hiworld.himusic.entry.MainAbility",
                        "com.huawei.hiworld.himusic.entry.PlayService"
                    ],
                    "when": "inuse"
                }
            }
        ]
    }
}</code></pre><h3 id="资源文件-1"><a href="#资源文件-1" class="headerlink" title="资源文件"></a>资源文件</h3><h4 id="资源文件的分类"><a href="#资源文件的分类" class="headerlink" title="资源文件的分类"></a>资源文件的分类</h4><h5 id="resources目录"><a href="#resources目录" class="headerlink" title="resources目录"></a>resources目录</h5><p>应用的资源文件（字符串、图片、音频等）统一存放于resources目录下，便于开发者使用和维护。resources目录包括两大类目录，一类为base目录与限定词目录，另一类为rawfile目录，详见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-categories-0000001052066099#ZH-CN_TOPIC_0000001062847941__table1324121514614" target="_blank" rel="noopener">表1</a>。</p>
<p>资源目录示例：</p>
<blockquote>
<p>resources</p>
</blockquote>
<blockquote>
<p>|—base  // 默认存在的目录</p>
</blockquote>
<blockquote>
<p>|     |—element</p>
</blockquote>
<blockquote>
<p>|     |     |—string.json</p>
</blockquote>
<blockquote>
<p>|     |—media</p>
</blockquote>
<blockquote>
<p>|     |     |—icon.png</p>
</blockquote>
<blockquote>
<p>|—en_GB-vertical-car-mdpi // 限定词目录示例，需要开发者自行创建   </p>
</blockquote>
<blockquote>
<p>|     |—element</p>
</blockquote>
<blockquote>
<p>|     |     |—string.json</p>
</blockquote>
<blockquote>
<p>|     |—media</p>
</blockquote>
<blockquote>
<p>|     |     |—icon.png</p>
</blockquote>
<blockquote>
<p>|—rawfile  // 默认存在的目录</p>
</blockquote>
<p>无法复制加载中的内容</p>
<h5 id="限定词目录"><a href="#限定词目录" class="headerlink" title="限定词目录"></a>限定词目录</h5><p>限定词目录可以由一个或多个表征应用场景或设备特征的限定词组合而成，包括移动国家码和移动网络码、语言、文字、国家或地区、横竖屏、设备类型、颜色模式和屏幕密度等维度，限定词之间通过下划线（_）或者中划线（-）连接。开发者在创建限定词目录时，需要掌握限定词目录的命名要求以及与限定词目录与设备状态的匹配规则。</p>
<p><strong>限定词目录的命名要求</strong></p>
<ul>
<li><p>限定词的组合顺序：<em>移动国家码_移动网络码-语言_文字_国家或地区-横竖屏-设备类型-深色模式-屏幕密度</em>。开发者可以根据应用的使用场景和设备特征，选择其中的一类或几类限定词组成目录名称。</p>
</li>
<li><p>限定词的连接方式：语言、文字、国家或地区之间采用下划线（_）连接，移动国家码和移动网络码之间也采用下划线（_）连接，除此之外的其他限定词之间均采用中划线（-）连接。例如：<strong>zh_Hant_CN</strong>、<strong>zh_CN-car-ldpi</strong>。</p>
</li>
<li><p>限定词的取值范围：每类限定词的取值必须符合<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-categories-0000001052066099#ZH-CN_TOPIC_0000001062847941__table5331112572518" target="_blank" rel="noopener">表2</a>中的条件，否则，将无法匹配目录中的资源文件。</p>
</li>
</ul>
<p>无法复制加载中的内容</p>
<p><strong>限定词目录与设备状态的匹配规则</strong></p>
<ul>
<li><p>在为设备匹配对应的资源文件时，限定词目录匹配的优先级从高到低依次为：移动国家码和移动网络码 &gt; 区域（语言_文字_国家或地区）&gt; 横竖屏 &gt; 设备类型 &gt; 颜色模式 &gt; 屏幕密度。</p>
</li>
<li><p>如果限定词目录中包含<strong>移动国家码和移动网络码、语言、文字、横竖屏、设备类型、颜色模式</strong>限定词，则对应限定词的取值必须与当前的设备状态完全一致，该目录才能够参与设备的资源匹配。例如，限定词目录“zh_CN-car-ldpi”不能参与“en_US”设备的资源匹配。</p>
</li>
</ul>
<h5 id="资源组目录"><a href="#资源组目录" class="headerlink" title="资源组目录"></a>资源组目录</h5><p>base目录与限定词目录下面可以创建资源组目录（包括element、media、animation、layout、graphic、profile），用于存放特定类型的资源文件，详见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-categories-0000001052066099#ZH-CN_TOPIC_0000001062847941__table88482216295" target="_blank" rel="noopener">表3</a>。</p>
<p>无法复制加载中的内容</p>
<h5 id="创建资源文件"><a href="#创建资源文件" class="headerlink" title="创建资源文件"></a>创建资源文件</h5><p>在resources目录下，可按照限定词目录和资源组目录的说明创建子目录和目录内的文件。</p>
<p>同时，DevEco Studio也提供了创建资源目录和资源文件的界面。</p>
<ul>
<li><strong>创建资源目录及资源文件</strong>在resources目录右键菜单选择“New &gt; Harmony Resource File”，此时可同时创建目录和文件。</li>
</ul>
<p>文件默认创建在base目录的对应资源组下。如果选择了限定词，则会按照命名规范自动生成限定词+资源组目录，并将文件创建在目录中。</p>
<p>目录名自动生成，格式固定为“限定词.资源组”，例如创建一个限定词为横竖屏类别下的竖屏，资源组为绘制资源的目录，自动生成的目录名称为“vertical.graphic”。</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDkzNDQzOTRjMjI4ZDRiMGVjYjViMGJiYzJmNmFiOGRfaEdXUE1VNndxUkJFc1prTmtNb0dxd2pwSmROTER1b0lfVG9rZW46Ym94Y25vSHBYbmdsSThSb1pTcjdNQVQzbDdlXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<ul>
<li><strong>创建资源目录</strong>在resources目录右键菜单选择“New &gt; Harmony Resource Directory”，此时可创建资源目录。</li>
</ul>
<p>选择资源组类型，设置限定词，创建后自动生成目录名称。目录名称格式固定为“限定词.资源组”，例如创建一个限定词为横竖屏类别下的竖屏，资源组为绘制资源的目录，自动生成的目录名称为“vertical.graphic”。</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=MzAzOTlhYjY3ZGQ2NTc2OTc4NjM4NTU3MTQzYjc3ZTBfQmhUTWhRZElEaHFveHZtc1pzUU1NQVkwZmFocks3anZfVG9rZW46Ym94Y25RQU03RElWVFRnNnVuM3NHckZMRWhmXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<ul>
<li><strong>创建资源文件</strong>在资源目录的右键菜单选择“New &gt; XXX Resource File”，即可创建对应资源组目录的资源文件。</li>
</ul>
<p>例如，在element目录下可新建Element Resource File</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmFmOTRlODcyOGVhOTQzMGM4OTEyOGM1MzQ5ODEwMGRfMlpoSThzOFlEYUNEaFdkZ0NZcmdjblM1Q3c5VXkySXBfVG9rZW46Ym94Y243RmVnOVFBM0pOeGxGV2dYS1ZJNEFmXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h4 id="资源文件的使用"><a href="#资源文件的使用" class="headerlink" title="资源文件的使用"></a>资源文件的使用</h4><h5 id="资源文件的引用方法"><a href="#资源文件的引用方法" class="headerlink" title="资源文件的引用方法"></a>资源文件的引用方法</h5><p><strong>base目录与限定词目录中的资源文件</strong>：通过指定资源类型（type）和资源名称（name）来引用。</p>
<ul>
<li><p>Java文件引用资源文件的格式：</p>
<p>ResourceTable.</p>
<p><strong>type</strong></p>
<p>_</p>
<p><strong>name</strong></p>
<p>。特别地，如果引用的是系统资源，则采用：</p>
<p>ohos.global.systemres.ResourceTable.</p>
<p><strong>type</strong></p>
<p>_</p>
<p><strong>name</strong></p>
<p>。</p>
<ul>
<li>示例一：在Java文件中，引用<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-example-0000001051733014#ZH-CN_TOPIC_0000001063096195__section1921624113243" target="_blank" rel="noopener">string.json</a>文件中类型为“String”、名称为“app_name”的资源。</li>
</ul>
</li>
</ul>
<pre><code>ohos.global.resource.ResourceManager resManager = this.getResourceManager();
String result = resManager.getElement(ResourceTable.String_app_name).getString();</code></pre><ul>
<li>示例二：在Java文件中，引用<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-example-0000001051733014#ZH-CN_TOPIC_0000001063096195__section39525972310" target="_blank" rel="noopener">color.json</a>文件中类型为“Color”、名称为“red”的资源。</li>
</ul>
<pre><code>ohos.global.resource.ResourceManager resManager = this.getResourceManager();
int color = resManager.getElement(ResourceTable.Color_red).getColor();</code></pre><ul>
<li>XML文件引用资源文件的格式：<strong>$***</strong>type:name<strong>*。特别地，如果引用的是系统资源，则采用：</strong>$ohos:<strong><em>**type:name</em></strong>。在XML文件中，引用<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-example-0000001051733014#ZH-CN_TOPIC_0000001063096195__section1921624113243" target="_blank" rel="noopener">string.json</a>文件中类型为“String”、名称为“app_name”的资源，示例如下：</li>
</ul>
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;DirectionalLayout xmlns:ohos="http://schemas.huawei.com/res/ohos"
    ohos:width="match_parent"
    ohos:height="match_parent"
    ohos:orientation="vertical"&gt;
    &lt;Text ohos:text="$string:app_name"/&gt;
&lt;/DirectionalLayout&gt;</code></pre><p><strong>rawfile目录中的资源文件</strong>：通过指定文件路径和文件名称来引用。</p>
<p>在Java文件中，引用一个路径为“resources/rawfile/”、名称为“example.js”的资源文件，示例如下：</p>
<pre><code>ohos.global.resource.ResourceManager resManager = this.getResourceManager();
ohos.global.resource.RawFileEntry rawFileEntry = resManager.getRawFileEntry("resources/rawfile/example.js"); </code></pre><h5 id="系统资源文件"><a href="#系统资源文件" class="headerlink" title="系统资源文件"></a>系统资源文件</h5><p>目前支持的部分系统资源文件详见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-example-0000001051733014#ZH-CN_TOPIC_0000001063096195__table54943152412" target="_blank" rel="noopener">表1</a>。</p>
<p>无法复制加载中的内容</p>
<h5 id="颜色模式的定义"><a href="#颜色模式的定义" class="headerlink" title="颜色模式的定义"></a>颜色模式的定义</h5><p>应用可以在config.json的module字段下定义“colorMode”字段，“colorMode”字段用来定义应用自身的颜色模式，值可以是“dark”，“light”，“auto”（默认值）。示例：</p>
<pre><code>"colorMode": "light"</code></pre><p>当应用的颜色模式值是“dark”时，无论系统当前颜色模式是什么，应用始终会按照深色模式选取资源；同理，当应用的颜色模式值是“light”时，无论系统当前颜色模式是什么，应用始终会按照浅色模式选取资源；当应用的颜色模式值是“auto”时，应用会跟随系统的颜色模式值选取资源。应用可以在代码中通过如下方式获取应用当前的颜色模式：</p>
<pre><code>int colorMode = Configuration.colorMode;</code></pre><h5 id="为Element资源文件添加注释或特殊标识"><a href="#为Element资源文件添加注释或特殊标识" class="headerlink" title="为Element资源文件添加注释或特殊标识"></a>为Element资源文件添加注释或特殊标识</h5><p>Element目录下的不同种类元素的资源均采用JSON文件表示，资源的名称“name”和取值“value”是每一条资源的必备字段。</p>
<ul>
<li><p>如果需要为某一条资源备注信息，以便于资源的理解和使用，可以<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-example-0000001051733014#ZH-CN_TOPIC_0000001063096195__section835316337575" target="_blank" rel="noopener">通过comment字段添加注释</a>。</p>
</li>
<li><p>如果value字段中的部分文本不需要被翻译人员处理，也不会被显示在应用界面上，可以<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/basic-resource-file-example-0000001051733014#ZH-CN_TOPIC_0000001063096195__section18694191515571" target="_blank" rel="noopener">通过特殊结构来标识无需翻译的内容</a>。</p>
</li>
</ul>
<h5 id="通过comment字段添加注释"><a href="#通过comment字段添加注释" class="headerlink" title="通过comment字段添加注释"></a>通过comment字段添加注释</h5><p>通过comment字段，可以为JSON文件的资源添加注释。示例如下：</p>
<pre><code>{
    "string":[
        {
            "name":"message_arrive",
            "value":"We will arrive at %s",
            "comment":"Transfer Arrival Time. %s is time,like 5:00 am"
        }
    ]
}</code></pre><h5 id="通过特殊结构来标识无需翻译的内容"><a href="#通过特殊结构来标识无需翻译的内容" class="headerlink" title="通过特殊结构来标识无需翻译的内容"></a>通过特殊结构来标识无需翻译的内容</h5><p>在string、strarray、plural这三类资源中，可以通过特殊标识来处理无需被翻译的内容。例如，一个字符串资源的Value取值为“We will arrive at %s”，其中的变量“%s”在翻译过程中希望保持不变。有以下两种方式处理：</p>
<ul>
<li>方式一：在value字段中添加{}。示例如下：</li>
</ul>
<pre><code>{
    "string":[
        {
            "name":"message_arrive",
            "value":["We will arrive at",{
                "id":"time",
                "example":"5:00 am",
                "value":"%s"
            }
            ]
        }
    ]
}</code></pre><ul>
<li>方式二：添加<a href="xliff:g">xliff:g</a>标记对。示例如下：</li>
</ul>
<pre><code>{
    "string":[
        {
            "name":"message_arrive",
            "value":"We will arrive at &lt;xliff:g id='time' example='5:00 am'&gt;%s&lt;/xliff:g&gt;"
        }
    ]
}</code></pre><h5 id="boolean-json示例"><a href="#boolean-json示例" class="headerlink" title="boolean.json示例"></a>boolean.json示例</h5><pre><code>{
    "boolean":[
        {
            "name":"boolean_1",
            "value":true
        },
        {
            "name":"boolean_ref",
            "value":"$boolean:boolean_1"
        }
    ]
}</code></pre><h5 id="color-json示例"><a href="#color-json示例" class="headerlink" title="color.json示例"></a>color.json示例</h5><pre><code>{
    "color":[
        {
            "name":"red",
            "value":"#ff0000"
        },
        {
            "name":"red_ref",
            "value":"$color:red"
        }
    ]
}</code></pre><h5 id="float-json示例"><a href="#float-json示例" class="headerlink" title="float.json示例"></a>float.json示例</h5><pre><code>{
    "float":[
        {
            "name":"float_1",
            "value":"30.6"
        },
        {
            "name":"float_ref",
            "value":"$float:float_1"
        },
        {
            "name":"float_px",
            "value":"100px"
        }
    ]
}</code></pre><h5 id="intarray-json示例"><a href="#intarray-json示例" class="headerlink" title="intarray.json示例"></a>intarray.json示例</h5><pre><code>{
    "intarray":[
        {
            "name":"intarray_1",
            "value":[
                100,
                200,
                "$integer:integer_1"
            ]
        }
    ]
}</code></pre><h5 id="integer-json示例"><a href="#integer-json示例" class="headerlink" title="integer.json示例"></a>integer.json示例</h5><pre><code>{
    "integer":[
        {
            "name":"integer_1",
            "value":100
        },
        {
            "name":"integer_ref",
            "value":"$integer:integer_1"
        }
    ]
}</code></pre><h5 id="pattern-json示例"><a href="#pattern-json示例" class="headerlink" title="pattern.json示例"></a>pattern.json示例</h5><pre><code>{
    "pattern":[
        {
            "name":"base",
            "value":[
                {
                    "name":"width",
                    "value":"100vp"
                },
                {
                    "name":"height",
                    "value":"100vp"
                },
                {
                    "name":"size",
                    "value":"25px"
                }
            ]
        },
        {
           "name":"child",
           "parent":"base",
           "value":[
               {
                   "name":"noTitile",
                   "value":"Yes"
               }
           ]
        }
    ]
}</code></pre><h5 id="plural-json示例"><a href="#plural-json示例" class="headerlink" title="plural.json示例"></a>plural.json示例</h5><pre><code>{
    "plural":[
        {
            "name":"eat_apple",
            "value":[
                {
                    "quantity":"one",
                    "value":"%d apple"
                },
                {
                    "quantity":"other",
                    "value":"%d apples"
                }
            ]
        }
    ]
}</code></pre><h5 id="strarray-json示例"><a href="#strarray-json示例" class="headerlink" title="strarray.json示例"></a>strarray.json示例</h5><pre><code>{
    "strarray":[
       {
           "name":"size",
           "value":[
               {
                   "value":"small"
               },
               {
                   "value":"$string:hello"
               },
               {
                   "value":"large"
               },
               {
                   "value":"extra large"
               }
            ]
       }
    ]
}</code></pre><h5 id="string-json示例"><a href="#string-json示例" class="headerlink" title="string.json示例"></a>string.json示例</h5><pre><code>{
    "string":[
        {
            "name":"hello",
            "value":"hello base"
        },
        {
            "name":"app_name",
            "value":"my application"
        },
        {
            "name":"app_name_ref",
            "value":"$string:app_name"
        },
        {
            "name":"app_sys_ref",
            "value":"$ohos:string:request_location_reminder_title"
        }
    ]
}</code></pre><h4 id="国际化能力的支持"><a href="#国际化能力的支持" class="headerlink" title="国际化能力的支持"></a>国际化能力的支持</h4><h5 id="时间日期国际化"><a href="#时间日期国际化" class="headerlink" title="时间日期国际化"></a>时间日期国际化</h5><p>不同的区域具有不同的时间日期显示习惯。例如，英语（美国）区域short时间格式为“9:31 AM”；简体中文（中国）区域short时间格式为“上午9:31”；芬兰语（芬兰）区域short时间格式为“9.31”。因此为开发者提供了获取不同区域的时间日期规格的能力。</p>
<p>界面时间日期字串和时间类控件显示，应当遵循当地习惯的规则，当需要展示时间或日期时，建议获取当前地区的时间日期规格，并对显示的字串根据获取到的规格进行格式化后再使用。</p>
<p>示例1：</p>
<pre><code>Locale locale = new Locale("de", "CH");
String skeleton = "MMMMd";
String bestPattern = DateFormatUtil.getBestPattern(skeleton, locale); // 返回值为"d. MMMM"</code></pre><p>示例2：</p>
<pre><code>String languageTag = "zh";
String out = DateFormatUtil.format("EEEEdMMMMy", languageTag, "Asia/Shanghai", 0, 3600 * 1000); // 返回值为"1970年1月1日星期四"</code></pre><h5 id="电话号码国际化"><a href="#电话号码国际化" class="headerlink" title="电话号码国际化"></a>电话号码国际化</h5><p>不同的区域的电话号码有不同的格式化效果，当需要展示本地电话号码时，应遵循当地电话号码的格式化原则。因此为开发者提供了对不同地区电话号码格式化的能力，以便于在显示电话号码时正确的格式化。并提供了获取电话号码归属地的能力，开发者可以使用相关接口获取电话号码的归属地信息。</p>
<p>示例1：</p>
<pre><code>InputFormatter formatter = InputFormatter.getInstance("CN");
formatter.inputNumberAndRememberPosition('1'); // 返回值为"1"
formatter.inputNumber('5'); // 返回值为"15"
formatter.inputNumber('6'); // 返回值为"156"
formatter.inputNumberAndRememberPosition('1');// 返回值为"156 1"</code></pre><p>示例2：</p>
<pre><code>Locale.Builder builder = new Locale.Builder();
builder.setLanguage("zh");
builder.setRegion("CN");
builder.setScript("Hant");
Locale locale = builder.build();
String displayName = PhoneNumberAttribution.getAttribute("+8615611xxxxxx", "CN", locale); // x为任意数字，返回值为"北京市"
文本识别</code></pre><p>提供了对地址、时间日期与电话号码的文本识别能力，可以调用相关接口识别一段文本中包含的地址、时间日期与电话号码。</p>
<p>示例：</p>
<pre><code>// 当Locale.getDefault().getLanguage()为"en"时
String source = "it is 123 test St";
int[] re = TextRecognitionUtils.getAddress(source);
if (re[0] == 1) {
    result = source.substring(re[1], re[2] + 1);// 返回值为"123 main St"
}</code></pre><h5 id="度量衡格式化"><a href="#度量衡格式化" class="headerlink" title="度量衡格式化"></a>度量衡格式化</h5><p>提供了对度量衡国际化能力的支持，可支持度量衡体系和维度之间的转换，与不同国家度量衡体系的自动转换。在开发包含度量衡的功能时，可以调用此能力满足多语言和不同国家用户的需求。</p>
<p>示例1：</p>
<pre><code>Locale zhCN = Locale.CHINA;
MeasureFormatter mes = MeasureFormatter.getInstance(zhCN);
mes.format(MeasureOptions.Unit.AREA_UK_ACRE,
           10000,
           MeasureOptions.Usage.AREA_LAND_AGRICULT,
           MeasureOptions.FormatStyle.WIDE,
           MeasureOptions.Style.AUTO_STYLE_ON));// 返回值为"4,046.856公顷"</code></pre><p>示例2：</p>
<pre><code>Locale enUS = Locale.US;
MeasureFormatter mes = MeasureFormatter.getInstance(enUS);
mes.format(MeasureOptions.Unit.VOLUME_US_CUP,
           1000,
           MeasureOptions.Unit.VOLUME_SI_LITER,
           MeasureOptions.FormatStyle.WIDE));// 返回值为"236.588 liters"</code></pre><h5 id="敏感禁忌"><a href="#敏感禁忌" class="headerlink" title="敏感禁忌"></a>敏感禁忌</h5><p>提供对政治敏感地区、城市、及语言的获取能力，以及对地区名称更正的能力。</p>
<p>示例：</p>
<pre><code>Locale locale = Locale.getDefault();
ArrayList&lt;String&gt; result = LocaleHelperUtils.getBlockedRegions(context, locale);//返回值包含"EH"与"XK"(西撒哈拉与科索沃），这两个地区为有政治争议的地区需谨慎使用</code></pre><h3 id="应用数据管理"><a href="#应用数据管理" class="headerlink" title="应用数据管理"></a>应用数据管理</h3><p>HarmonyOS应用数据管理支持单设备的各种结构化数据的持久化，以及跨设备之间数据的同步、共享以及搜索功能。开发者通过应用数据管理，能够方便地完成应用程序数据在不同终端设备间的无缝衔接，满足用户跨设备使用数据的一致性体验。</p>
<h4 id="本地应用数据管理"><a href="#本地应用数据管理" class="headerlink" title="本地应用数据管理"></a>本地应用数据管理</h4><p>提供单设备上结构化数据的存储和访问能力。使用SQLite作为持久化存储引擎，提供了多种类型的本地数据库，分别是关系型数据库（Relational Database）和对象关系映射数据库（Object Relational Mapping Database），此外还提供一种轻量级偏好数据库（Light Weight Preference Database），用以满足开发人员使用不同数据模型对应用数据进行持久化和访问的需求。</p>
<p>有关于本地应用数据管理的详细信息，请参阅<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/database-relational-overview-0000000000030046" target="_blank" rel="noopener">关系型数据库</a>、<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/database-orm-overview-0000000000030070" target="_blank" rel="noopener">对象关系映射数据库</a>和<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/database-preference-overview-0000000000030086" target="_blank" rel="noopener">轻量级偏好数据库</a>。</p>
<h4 id="分布式数据服务"><a href="#分布式数据服务" class="headerlink" title="分布式数据服务"></a>分布式数据服务</h4><p>分布式数据库支持用户数据跨设备相互同步，为用户提供在多种终端设备上一致的数据访问体验。通过调用分布式数据接口，应用可以将数据保存到分布式数据库中。通过结合帐号、应用唯一标识和数据库三元组，分布式数据库对属于不同应用的数据进行隔离。</p>
<p>有关于分布式数据库的详细信息，请参阅<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/database-mdds-overview-0000000000030123" target="_blank" rel="noopener">分布式数据服务</a>。</p>
<h4 id="分布式文件服务"><a href="#分布式文件服务" class="headerlink" title="分布式文件服务"></a>分布式文件服务</h4><p>在多个终端设备间为单个设备上应用程序创建的文件提供多终端的分布式共享能力。每台设备上都存储一份全量的文件元数据，应用程序通过文件元数据中的路径，可以实现同一应用文件的跨设备访问。</p>
<p>有关于分布式文件的详细信息，请参阅<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/database-dfs-overview-0000000000030154" target="_blank" rel="noopener">分布式文件服务</a>。</p>
<h4 id="数据搜索服务"><a href="#数据搜索服务" class="headerlink" title="数据搜索服务"></a>数据搜索服务</h4><p>在单个设备上，为应用程序提供搜索引擎级的全文索引管理、建立索引和搜索功能。</p>
<p>有关于数据搜索的详细信息，请参阅<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/database-fusion-search-overview-0000001050191132" target="_blank" rel="noopener">融合搜索</a>。</p>
<h4 id="数据存储管理"><a href="#数据存储管理" class="headerlink" title="数据存储管理"></a>数据存储管理</h4><p>为应用开发者提供系统存储路径、存储设备列表，存储设备属性的查询和管理功能。</p>
<p>有关于数据存储的详细信息，请参阅<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/database-storage-overview-0000000000030212" target="_blank" rel="noopener">数据存储管理</a></p>
<h3 id="应用权限管理"><a href="#应用权限管理" class="headerlink" title="应用权限管理"></a>应用权限管理</h3><p>HarmonyOS中所有的应用均在应用沙盒内运行。默认情况下，应用只能访问有限的系统资源，系统负责管理应用对资源的访问权限。</p>
<p>应用权限管理是由接口提供方（Ability）、接口使用方（应用）、系统（包括云侧和端侧）以及用户等多方共同参与的整个流程，保证受限接口是在约定好的规则下被正常使用，避免接口被滥用而导致用户、应用和设备受损。</p>
<p>本节重点介绍应用权限管理的基本思想。有关权限使用的详细信息，请参阅<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/security-permissions-overview-0000000000029883" target="_blank" rel="noopener">权限</a>。</p>
<h4 id="权限声明"><a href="#权限声明" class="headerlink" title="权限声明"></a>权限声明</h4><ul>
<li><p>应用需要在config.json中使用“reqPermissions”属性对需要的权限逐个进行声明。</p>
</li>
<li><p>若使用到的三方库也涉及权限使用，也需统一在应用的config.json中逐个声明。</p>
</li>
<li><p>没有在config.json中声明的权限，应用就无法获得此权限的授权。</p>
</li>
</ul>
<h4 id="动态申请敏感权限"><a href="#动态申请敏感权限" class="headerlink" title="动态申请敏感权限"></a>动态申请敏感权限</h4><p>动态申请敏感权限基于用户可知可控的原则，需要应用在运行时主动调用系统动态申请权限的接口，系统弹框由用户授权，用户结合应用运行场景的上下文，识别出应用申请相应敏感权限的合理性，从而做出正确的选择。</p>
<p>即使用户向应用授予了请求的权限，应用在调用受此权限管控的接口前，也应该先检查自己有无此权限，而不能把之前授予的状态持久化，因为用户在动态授予后还可以通过设置取消应用的权限。</p>
<p>有关于应用动态申请敏感权限的详细信息，请参阅<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/security-permissions-guidelines-0000000000029886#ZH-CN_TOPIC_0000001072906209__section7431121314439" target="_blank" rel="noopener">动态申请权限</a>。</p>
<h4 id="自定义权限"><a href="#自定义权限" class="headerlink" title="自定义权限"></a>自定义权限</h4><p>HarmonyOS为了保证应用对外提供的接口不被恶意调用，需要对调用接口的调用者进行鉴权。</p>
<p>大多情况下，系统已定义的权限满足了应用的基本需要，若有特殊的访问控制需要，应用可在config.json中以”defPermissions”: []属性来定义新的权限，并通过“availableScope”和“grantMode”两个属性分别确定权限的开放范围和授权方式，使得权限定义更加灵活且易于理解。有关HarmonyOS权限开放范围和授权方式详细的描述，请参阅<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/security-permissions-guidelines-0000000000029886#ZH-CN_TOPIC_0000001072906209__table4183104093414" target="_blank" rel="noopener">权限授予方式字段说明</a>和<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/security-permissions-guidelines-0000000000029886#ZH-CN_TOPIC_0000001072906209__table17184134033416" target="_blank" rel="noopener">权限限制范围字段说明</a>。</p>
<p>为了避免应用自定义新权限出现重名的情况，建议应用对新权限的命名以包名的前两个字段开头，这样可以防止不同开发者的应用间出现自定义权限重名的情况。</p>
<h4 id="权限保护方法"><a href="#权限保护方法" class="headerlink" title="权限保护方法"></a>权限保护方法</h4><ul>
<li><p>保护Ability：通过在config.json里对应的Ability中配置”permissions”: [“<em>权限名</em>“]属性，即可实现保护整个Ability的目的，无指定权限的应用不能访问此Ability。</p>
</li>
<li><p>保护API：若Ability对外提供的数据或能力有多种，且开放范围或保护级别也不同，可以针对不同的数据或能力在接口代码实现中通过verifyPermission(String permissionName, int pid, int uid)来对uid标识的调用者进行鉴权。</p>
</li>
</ul>
<h4 id="权限使用原则"><a href="#权限使用原则" class="headerlink" title="权限使用原则"></a>权限使用原则</h4><ul>
<li><p>权限申请最小化。跟用户提供的功能无关的权限，不要申请；尽量采用其他无需权限的操作来实现相应功能（如：通过intent拉起系统UI界面由用户交互、应用自己生成uuid代替设备ID等）。</p>
</li>
<li><p>权限申请完整。应用所需权限（包括应用调用到的三方库依赖的权限）都要逐个在应用的config.json中按格式声明。</p>
</li>
<li><p>满足用户可知。应用申请的敏感权限的目的需要真实准确告知用户。</p>
</li>
<li><p>权限就近申请。应用在用户触发相关业务功能时，就近提示用户授予实现此功能所需的权限。</p>
</li>
<li><p>权限不扩散。在用户未授权的情况下，不允许提供给其他应用使用。</p>
</li>
<li><p>应用自定义权限防止重名。建议以包名为前缀来命名权限，防止跟系统定义的权限重名</p>
</li>
</ul>
<h3 id="应用隐私保护"><a href="#应用隐私保护" class="headerlink" title="应用隐私保护"></a>应用隐私保护</h3><p>随着移动终端及其相关业务（如移动支付、终端云等）的普及，用户隐私保护的重要性愈发突出。应用开发者在产品设计阶段就需要考虑用户隐私的保护，提高应用的安全性。HarmonyOS应用开发需要遵从其隐私保护规则，在应用上架应用市场时，应用市场会根据规则进行校验，如不满足条件则无法上架。</p>
<p>个人数据是指与一个身份已被识别或者身份可被识别的自然人相关的任何信息，包括但不限于个人身份信息、身份验证信息、财务和付款信息、联系方式、用户搜索、浏览记录、使用习惯、位置信息、短信和通话相关数据、麦克风数据、摄像头数据以及其他设备或应用使用情况数据等，其中敏感个人数据是个人数据的一个重要子集，指的是涉及数据主体的最私密领域的信息或者一旦泄露可能会给数据主体造成重大不利影响的数据，如导致个人名誉、身心健康受到损害或歧视性待遇等；敏感个人数据在各国家/地区相关法律法规中的定义有所不同，建议根据当地的法律法规要求处理。</p>
<h4 id="数据收集及使用公开透明"><a href="#数据收集及使用公开透明" class="headerlink" title="数据收集及使用公开透明"></a>数据收集及使用公开透明</h4><p>应用采集个人数据时，应清晰、明确地告知用户，并确保告知用户的个人信息将被如何使用。</p>
<ul>
<li>应用申请操作系统<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/security-permissions-available-0000001051089272#ZH-CN_TOPIC_0000001073014298__section1727613371109" target="_blank" rel="noopener">敏感权限</a>时，需要明确告知用户权限申请的目的和用途，并获取用户的同意；敏感权限弹框参考示例如下。权限API使用方案请参考<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/security-permissions-overview-0000000000029883" target="_blank" rel="noopener">权限</a>章节。详细的设计原则请参考<a href="https://developer.harmonyos.com/cn/docs/design/des-guides/introduction-0000001077467612" target="_blank" rel="noopener">隐私设计</a>。<strong>图1</strong> 敏感权限获取弹框示例</li>
</ul>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDQ3N2FkNjFmZjRjZmNjNzljYjZmMDEzMjZkOTVhYjVfTFFqRDYzUE1Xb09Xd0xXaTJEUFcweXlGUGZvMGo4c1VfVG9rZW46Ym94Y254OFJsa1hPYjhxb0MxRzdRdzBKVjJlXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<ul>
<li><p>开发者应制定并遵从适当的隐私政策，在收集、使用留存和第三方分享用户数据时需要符合所有适用法律、政策和规定。如在收集个人数据前，需充分告知用户处理个人数据的种类、目的、处理方式、保留期限等，满足数据主体权利等要求。</p>
</li>
<li><p>应用向第三方披露任何个人信息须在隐私政策中说明披露内容、目的和披露对象。根据以上要求，我们设计了示例以供参考。隐私通知/声明的参考示例如下：</p>
</li>
</ul>
<p><strong>图2</strong> 应用隐私通知与隐私声明示例图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDAwNjBhNGRjNDdjYTAzZWY3ZDVmNTkxYzE0YmY1YjRfTmR1MFIxSXlhNXhuUGlVZjVTRzhLVEoxazllaEZycEJfVG9rZW46Ym94Y25nY3pFeHJnOG54cVFEdU4xTXZTdFVlXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<p>个人数据应当基于具体、明确、合法的目的收集，不应与此目的不相符的方式作进一步处理。对于收集目的变更和用户撤销同意后再次使用的场景都需要用户重新同意。隐私声明变更与隐私声明撤销同意如图所示。<strong>图3</strong> 隐私声明变更示例图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTU5Zjg1YTI4NjJlNWI5ZTdhZjRhZGQxYTFmY2NiOTdfdkVDTUgwRHhpYnV4Nk1VM0xPM3hzUWliTmNpaXFBNkJfVG9rZW46Ym94Y25tUXRmamY1a2dLTTdwcEJaRDZHUUZmXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<p><strong>图4</strong> 隐私声明撤销同意示例图</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=M2EwMmM1YTdmMWVhZjYxMGE3NjRkNjkxY2RmYjFkZjNfSUo0Vnh2clk1OTdFcUpQMGk1Mk1razVLbTh6ZzVwT0FfVG9rZW46Ym94Y25KUlRxcXNrS0RESnRvbmo5clh0UG1mXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<ul>
<li>应用需要提供用户查看隐私声明的入口。例如在应用的“关于”界面提供查看隐私声明的入口，如示例图所示：<strong>图5</strong> 隐私声明的查看界面示例图</li>
</ul>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=OTYzYzhiMWRiN2FmMmUxNmJkNGM4ZjBhMTRkMDY5ODJfYkdsakt1dTFiMkprdmJ0VlZBM1lnY3czdURhTjhlRUJfVG9rZW46Ym94Y25lZEtyOTdTYUFqSEZoMFNKMWRrUXRlXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<ul>
<li><p>应用的隐私声明应覆盖本应用所有收集的个人数据。</p>
</li>
<li><p>在后台持续读取位置信息场景时，请申请ohos.permission.LOCATION_IN_BACKGROUND权限，详见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/security-permissions-available-0000001051089272#ZH-CN_TOPIC_0000001073014298__section1727613371109" target="_blank" rel="noopener">敏感权限</a>；</p>
</li>
<li><p>应用存在调用第三方的<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ability-ability-overview-0000000000029852" target="_blank" rel="noopener">元能力（Particle Ability）</a>或<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ability-ability-overview-0000000000029852" target="_blank" rel="noopener">元服务（Feature Ability）</a>场景时，需要在应用的隐私声明中明确第三方责任，如涉及个人数据收集则需要告知用户第三方的名称及收集的个人数据类型、目的和方式，申请的敏感权限、申请目的等。</p>
</li>
</ul>
<h4 id="数据收集及使用最小化"><a href="#数据收集及使用最小化" class="headerlink" title="数据收集及使用最小化"></a>数据收集及使用最小化</h4><p>应用个人数据收集应与数据处理目的相关，且是适当、必要的。开发者应尽可能对个人数据进行匿名化或假名化处理，降低数据主体的风险。仅可收集和处理与特定目的相关且必需的个人数据，不能对数据做出与特定目的不相关的处理。</p>
<ul>
<li><p>敏感权限申请的时候要满足权限最小化的要求，在进行权限申请时，只申请获取必需的信息或资源所需要的权限。如应用不需要相机权限就能够实现其功能时，则不应该向用户申请相机权限。</p>
</li>
<li><p>应用针对数据的收集要满足最小化要求，不收集与应用提供服务无关联的数据。如通信社交类应用，不应收集用户的网页浏览记录。</p>
</li>
<li><p>数据使用的功能要求能够使用户受益，收集的数据不能用于与用户正常使用无关的功能。如应用不得将“生物特征”、“健康数据”等敏感个人数据用于服务改进、投放广告或营销等非业务核心功能。</p>
</li>
<li><p>系统禁止应用在后台访问相机和麦克风的数据；</p>
</li>
<li><p>应用使用第三方支付交易过程中，如非适用法律要求或为提供第三方支付服务所必需，不得记录用户交易类鉴权信息，或向第三方批露与用户特定交易无关的用户个人信息。</p>
</li>
<li><p>应用不得仅出于广告投放或数据分析的目的而请求位置权限。</p>
</li>
<li><p>禁止在日志中打印敏感个人数据，如需要打印个人数据时，应对个人数据进行匿名化或假名化处理；</p>
</li>
<li><p>避免使用IMEI和序列号等永久性的标识符，尽量使用可以重置的标识符，如系统提供了<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/device-identifier-networkid-0000001084507694" target="_blank" rel="noopener">NetworkID</a>和<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/device-identifier-dvid-0000001131409565" target="_blank" rel="noopener">DVID</a>作为分布式场景下的设备标识符，广告业务场景下则建议使用<a href="https://developer.huawei.com/consumer/cn/doc/development/HMSCore-Guides/oaid-0000001050783198" target="_blank" rel="noopener">OAID</a>，基于应用的分析则建议使用<a href="https://developer.huawei.com/consumer/cn/doc/development/HMSCore-Guides/odid-0000001051063255" target="_blank" rel="noopener">ODID</a>和<a href="https://developer.huawei.com/consumer/cn/doc/development/HMSCore-Guides/aaid-0000001051142988" target="_blank" rel="noopener">AAID</a>，其他需要唯一标识符的场景可以使用<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/device-identifier-uuid-0000001084827280" target="_blank" rel="noopener">UUID</a>接口生成；</p>
</li>
<li><p>不再需要使用的数据需要及时清除，降低数据泄露的风险。如分布式业务场景下设备断开分布式网络，临时缓存的数据需要及时删除。</p>
</li>
</ul>
<h4 id="数据处理选择和控制"><a href="#数据处理选择和控制" class="headerlink" title="数据处理选择和控制"></a>数据处理选择和控制</h4><p>对个人数据处理必须要征得用户的同意或遵守适用的法律法规，用户对其个人数据要有充分的控制权。</p>
<ul>
<li><p>系统对于用户的敏感数据和系统关键资源的获取设置了对应的权限，应用访问这些数据时需要申请对应的权限。相关权限列表请参考<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/security-permissions-available-0000001051089272" target="_blank" rel="noopener">应用权限列表</a>章节。</p>
</li>
<li><p>应用申请使用敏感权限：应用弹窗提醒，向用户呈现应用需要获取的权限和权限使用目的、应用需要收集的数据和使用目的等，通过用户点击“同意”或“始终允许”的方式完成用户授权，让用户对应用权限的授予和个人数据的使用做到透明、可知、可控。</p>
</li>
<li><p>用户可以修改、取消授予应用的权限：当用户不同意某一权限或者数据收集时，应当允许用户使用与这部分权限和数据收集不相关的功能。如通信社交类应用，用户可以拒绝授予相机权限，不应该影响与相机无关的功能操作，如语音通话。</p>
</li>
<li><p>在进入应用的主界面之前不建议直接弹窗申请敏感权限，仅在用户使用功能时才请求对应的权限。如通信社交类应用，在没有启用位置相关的功能时，不建议在启动应用时就申请位置权限。</p>
</li>
<li><p>应用若使用个人数据用于个性化广告和精准营销，需提供独立的关闭选项。</p>
</li>
<li><p>需要向用户提供对个人数据的控制能力；如在云服务上存储了个人数据，需要提供删除数据的方法。</p>
</li>
<li><p>应用同时支持单设备和跨设备场景时，用户能够单独关闭跨设备应用场景。</p>
</li>
</ul>
<h4 id="数据安全"><a href="#数据安全" class="headerlink" title="数据安全"></a>数据安全</h4><p>从技术上保证数据处理活动的安全性，包括个人数据的加密存储、安全传输等安全机制，应默认开启或采取安全保护措施。</p>
<ul>
<li><strong>数据存储</strong></li>
</ul>
<ol>
<li>应用产生的密钥以及用户的敏感个人数据需要存储在应用的私有目录下。</li>
<li>应用可以调用系统提供的本地数据库RdbStore的加密接口对敏感个人数据进行加密存储。接口详见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/database-relational-overview-0000000000030046" target="_blank" rel="noopener">关系型数据库</a>章节。</li>
<li>应用产生的分布式数据可以调用系统的分布式数据库进行存储，对于敏感个人数据需要采用分布式数据库提供的加密接口进行加密，接口详见<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/database-mdds-overview-0000000000030123" target="_blank" rel="noopener">分布式数据服务</a>章节。</li>
</ol>
<ul>
<li><strong>安全传输</strong>需要分别针对本地传输和远程传输采取不同的安全保护措施。</li>
</ul>
<p>本地传输：</p>
<ol>
<li>应用通过intent跨应用传输数据时避免包含敏感个人数据，防止隐式调用导致intent劫持，导致个人数据泄露。</li>
<li>应用内组件调用应采用安全方式，避免通过隐式方式进行调用组件，防止组件劫持。</li>
<li>避免使用socket方式进行本地通信，如需使用，localhost端口号随机生成，并对端口连接对象进行身份认证和鉴权。</li>
<li>本地IPC通信安全：作为服务提供方需要校验服务使用方的身份和访问权限，防止服务使用方进行身份仿冒或者权限绕过。</li>
</ol>
<p>远程传输：</p>
<ol>
<li>使用https代替http进行通信，并对https证书进行严格校验。</li>
<li>避免进行远程端口进行通信，如需使用，需要对端口连接对象进行身份认证和鉴权。</li>
<li>应用进行跨设备通信时，需要校验被访问设备和应用的身份信息，防止被访问方的设备和应用进行身份仿冒。</li>
<li>应用进行跨设备通信时，作为服务提供方需要校验服务使用方的身份和权限，防止服务使用方进行身份仿冒或者权限绕过。</li>
</ol>
<h4 id="本地化处理"><a href="#本地化处理" class="headerlink" title="本地化处理"></a>本地化处理</h4><p>应用开发的数据优先在本地进行处理，对于本地无法处理的数据上传云服务要满足最小化的原则，不能默认选择上传云服务。</p>
<h4 id="未成年人数据保护要求"><a href="#未成年人数据保护要求" class="headerlink" title="未成年人数据保护要求"></a>未成年人数据保护要求</h4><p>如果应用是给未成年人设计的，或者应用通过收集的用户年龄数据识别出用户是未成年人，开发者应该结合目标市场国家的相关法律，专门分析未成年人个人数据保护的问题。收集未成年人数据前需要征得监护人的同意。</p>
<p>专为未成年人设计的应用不建议请求获取位置权限。</p>
<h4 id="元服务（Feature-Ability）"><a href="#元服务（Feature-Ability）" class="headerlink" title="元服务（Feature Ability）"></a>元服务（Feature Ability）</h4><p>对于Visible=true的元服务，需要满足如下要求：</p>
<ul>
<li><p>元服务启动时，需要在明显位置展示元服务的功能名称及开发者名称/logo。</p>
</li>
<li><p>元服务如涉及个人数据的收集，应提供独立的隐私声明，并在收集个人数据前向用户告知隐私声明。</p>
</li>
<li><p>元服务应按照法律法规要求收集个人数据，基于用户同意收集的个人数据，用户有权撤销同意。</p>
</li>
<li><p>元服务需要提供隐私声明的查看入口。</p>
</li>
<li><p>元服务隐私声明发生变更时，需要用户重新同意。</p>
</li>
<li><p>禁止在元服务免安装过程中捆绑安装与本服务不相关的功能，如扫描二维码的元服务不应该支持录音功能</p>
</li>
</ul>
<h3 id="三方应用调用管控机制"><a href="#三方应用调用管控机制" class="headerlink" title="三方应用调用管控机制"></a>三方应用调用管控机制</h3><h4 id="为什么要进行调用管控"><a href="#为什么要进行调用管控" class="headerlink" title="为什么要进行调用管控"></a>为什么要进行调用管控</h4><p>后台进程启动过多，会消耗系统的内存、CPU等资源，造成用户设备耗电快、卡顿等现象。因此，为了保证用户体验，系统会对三方用户应用程序之间的<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#ZH-CN_TOPIC_0000001050749051__section779354121411" target="_blank" rel="noopener">PA</a>调用进行管控，减少不必要的关联拉起。</p>
<h4 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h4><ul>
<li><p>前台：用户应用程序有可见的FA正在显示，则认为用户应用程序在前台。</p>
</li>
<li><p>用户应用程序内调用：同一用户应用程序内的FA、PA之间的访问。</p>
</li>
</ul>
<h4 id="调用管控总体思路"><a href="#调用管控总体思路" class="headerlink" title="调用管控总体思路"></a>调用管控总体思路</h4><ol>
<li>用户应用程序内调用不管控。</li>
<li>三方用户应用程序间调用严格管控：禁止三方用户应用程序在后台调用其他三方应用的PA；严格管控三方用户应用程序在前台调用其他用户应用程序的PA。</li>
</ol>
<h4 id="管控规则"><a href="#管控规则" class="headerlink" title="管控规则"></a>管控规则</h4><ul>
<li><p>用户应用程序内调用不管控。</p>
</li>
<li><p>三方用户应用程序间调用三方应用程序A调用三方应用程序B的PA，具体限制如下：</p>
<ul>
<li>禁止A在后台调用B的PA。</li>
</ul>
</li>
<li><p>当B有进程存活时，允许A在前台调用B的PA；当B无进程存活时，禁止A的调用</p>
</li>
</ul>
<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><h3 id="开发准备"><a href="#开发准备" class="headerlink" title="开发准备"></a>开发准备</h3><h4 id="任务说明"><a href="#任务说明" class="headerlink" title="任务说明"></a>任务说明</h4><p>本文档适用于HarmonyOS应用开发的初学者。通过构建一个简单的具有页面跳转功能的应用（如下图<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/previewer-0000001054328973#ZH-CN_TOPIC_0000001056725592__section16523172216252" target="_blank" rel="noopener">预览器</a>运行效果所示），熟悉HarmonyOS应用开发流程。</p>
<p>为确保运行效果，请使用最新版本的<strong>DevEco Studio</strong>完成本任务，点击<a href="https://developer.harmonyos.com/cn/develop/deveco-studio#download" target="_blank" rel="noopener">此处</a>获取下载链接。</p>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjRlYzZjODNhMDJlOWU5OTZhODlkYWMxMDgzMTA3NmRfbHY0bWUxTG9tQlJqWXRDMERYUW5DM1BiZ0FybzVJM3JfVG9rZW46Ym94Y25MUTlyRUxRWmdIbkJXenJGMzRBcFBlXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h4 id="开发准备-1"><a href="#开发准备-1" class="headerlink" title="开发准备"></a>开发准备</h4><ol>
<li>开始前请参考<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/software_install-0000001053582415" target="_blank" rel="noopener">下载与安装软件</a>、<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/environment_config-0000001052902427" target="_blank" rel="noopener">配置开发环境</a>，完成<strong>DevEco Studio</strong>的安装和开发环境的配置。</li>
<li>开发环境配置完成后，请参考<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/hello_world-0000001054516888" target="_blank" rel="noopener">创建和运行Hello World</a>创建一个新工程，设备类型以“Phone”为例，使用Java语言开发，模板选择“Empty Feature Ability(Java)”。</li>
<li>工程创建完成后，使用<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/previewer-0000001054328973#ZH-CN_TOPIC_0000001056725592__section16523172216252" target="_blank" rel="noopener">预览器</a>或Phone<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/run_simulator-0000001053303709" target="_blank" rel="noopener">模拟器</a>运行该工程。</li>
</ol>
<h3 id="编写第一个页面"><a href="#编写第一个页面" class="headerlink" title="编写第一个页面"></a>编写第一个页面</h3><p>在Java UI框架中，提供了<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ui-java-component-layout-overview-0000000000500400" target="_blank" rel="noopener">两种编写布局的方式</a>：<strong>在XML中声明UI布局</strong>和<strong>在代码中创建布局</strong>。这两种方式创建出的布局没有本质差别，为了熟悉两种方式，我们将通过XML的方式编写第一个页面，通过代码的方式<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/start-second-page-0000000000029619" target="_blank" rel="noopener">编写第二个页面</a>。</p>
<ol>
<li>在“Project”窗口，点击“entry &gt; src &gt; main &gt; resources &gt; base &gt; layout”，打开“ability_main.xml”文件。</li>
</ol>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=OWU2N2FkMTczZDJlNDUwNmMxMjBmYjA2MGM3OGJhNmRfNmd1RFRpdHNvN2V3U2ZJN0p4bDF0VnNnV0NwMnhXRWZfVG9rZW46Ym94Y25CcmVBTGRXZ2o5elJUTldPY3FMb1BiXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<ol>
<li>第一个页面内有一个文本和一个按钮，使用<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ui-java-layout-dependentlayout-0000001050729536" target="_blank" rel="noopener">DependentLayout</a>布局，通过<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ui-java-component-text-0000001050729534" target="_blank" rel="noopener">Text</a>和<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ui-java-component-button-0000001051009585" target="_blank" rel="noopener">Button</a>组件来实现，其中<a href="https://developer.harmonyos.com/cn/docs/design/des-guides/basic-0000001055539104" target="_blank" rel="noopener">vp和fp</a>分别表示虚拟像素和字体像素。“ability_main.xml”的示例代码如下：</li>
</ol>
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;DependentLayout
    xmlns:ohos="http://schemas.huawei.com/res/ohos"
    ohos:width="match_parent"
    ohos:height="match_parent"&gt;
    &lt;Text
        ohos:id="$+id:text"
        ohos:width="match_content"
        ohos:height="match_content"
        ohos:text="Hello World"
        ohos:text_color="#000000"
        ohos:text_size="32fp"
        ohos:center_in_parent="true"/&gt;
    &lt;Button
        ohos:id="$+id:button"
        ohos:width="match_content"
        ohos:height="match_content"
        ohos:text="Next"
        ohos:text_size="19fp"
        ohos:text_color="#FFFFFF"
        ohos:top_padding="8vp"
        ohos:bottom_padding="8vp"
        ohos:right_padding="70vp"
        ohos:left_padding="70vp"
        ohos:center_in_parent="true"
        ohos:below="$id:text"
        ohos:margin="10vp"/&gt;
&lt;/DependentLayout&gt;</code></pre><ol>
<li>按钮的背景是蓝色胶囊样式，可以通过graphic目录下的XML文件来设置。右键点击“graphic”文件夹，选择“New &gt; File”，命名为“background_button.xml”，单击回车键。</li>
</ol>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=MzZiN2VlNzk0MTViZDdhZWVkNTRlY2E0OWE0ODFiNWNfcmh6aE8yYnE4NzZsa05zSzJGcm5KSnIzN3p2Wkx5NDhfVG9rZW46Ym94Y25pb0RaV3MxU3h4VzdHMFdWaGlHQXJjXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<p>“background_button.xml”的示例代码如下：</p>
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape
    xmlns:ohos="http://schemas.huawei.com/res/ohos"
    ohos:shape="rectangle"&gt;
    &lt;corners
        ohos:radius="100"/&gt;
    &lt;solid
        ohos:color="#007DFF"/&gt;
&lt;/shape&gt;</code></pre><p>在layout目录下的“ability_main.xml”文件中，使用<strong>background_element=”$graphic:background_button”</strong>的方式引用“background_button.xml”文件：</p>
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;DependentLayout
    ...
    &lt;Button
        ohos:id="$+id:button"
        ohos:width="match_content"
        ohos:height="match_content"
        ohos:text="Next"
        ohos:text_size="19fp"
        ohos:text_color="#FFFFFF"
        ohos:top_padding="8vp"
        ohos:bottom_padding="8vp"
        ohos:right_padding="70vp"
        ohos:left_padding="70vp"
        ohos:center_in_parent="true"
        ohos:below="$id:text"
        ohos:margin="10vp"
        ohos:background_element="$graphic:background_button"/&gt;
&lt;/DependentLayout&gt;</code></pre><ol>
<li>在XML文件中添加组件后，需要在Java代码中加载XML布局。在“Project”窗口，选择“entry &gt; src &gt; main &gt; java &gt; com.example.myapplication &gt; slice” ，打开“MainAbilitySlice.java”文件，使用setUIContent方法加载“ability_main.xml”布局。</li>
</ol>
<p>说明</p>
<p>HarmonyOS提供了<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ability-page-concept-0000000000033573" target="_blank" rel="noopener">Ability和AbilitySlice</a>两个基础类，一个有界面的Ability可以由一个或多个AbilitySlice构成，AbilitySlice主要用于承载单个页面的具体逻辑实现和界面UI，是应用显示、运行和跳转的最小单元。</p>
<p>本文档以同一个Ability内的两个AbilitySlice之间的跳转为例，如果开发者希望实现两个Ability之间的跳转，请参考<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ability-page-switching-0000000000037999#ZH-CN_TOPIC_0000001050748853__section1862412142519" target="_blank" rel="noopener">不同Page间导航</a>。</p>
<p>“MainAbilitySlice.java”的示例代码如下：</p>
<pre><code>package com.example.myapplication.slice;

import com.example.myapplication.ResourceTable;
import ohos.aafwk.ability.AbilitySlice;
import ohos.aafwk.content.Intent;

public class MainAbilitySlice extends AbilitySlice {
    @Override
    public void onStart(Intent intent) {
        super.onStart(intent);
        super.setUIContent(ResourceTable.Layout_ability_main); // 加载XML布局
    }
}</code></pre><ol>
<li>使用<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/previewer-0000001054328973#ZH-CN_TOPIC_0000001056725592__section16523172216252" target="_blank" rel="noopener">预览器</a>或<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/run_simulator-0000001053303709" target="_blank" rel="noopener">模拟器</a>运行项目，效果如下图所示。</li>
</ol>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=YTI3M2YwYTEyYzc3MTNmMTllN2NhMGI2YmMyOWEyODZfVmViUGVzdkdpcWhNN1JaMVZFS0wwRkxwZk9sRktzaFdfVG9rZW46Ym94Y25wdEZQQnNaVjd6dGJLbzlRTXNaSVljXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<h3 id="创建另一个页面"><a href="#创建另一个页面" class="headerlink" title="创建另一个页面"></a>创建另一个页面</h3><p>在上一节中，我们用XML的方式编写了一个包含文本和按钮的页面。为了帮助开发者熟悉在代码中创建布局的方式，接下来我们使用代码的方式编写第二个页面。</p>
<ol>
<li>在“Project”窗口，打开“entry &gt; src &gt; main &gt; java &gt; com.example.myapplication”，右键点击“slice”文件夹，选择“New &gt; Java Class”，命名为“SecondAbilitySlice”，单击回车键。</li>
<li>第二个页面上有一个文本。在上一步创建的“SecondAbilitySlice”文件中，添加一个Text，示例代码如下：</li>
</ol>
<pre><code>package com.example.myapplication.slice;

import ohos.aafwk.ability.AbilitySlice;
import ohos.aafwk.content.Intent;
import ohos.agp.colors.RgbColor;
import ohos.agp.components.DependentLayout;
import ohos.agp.components.Text;
import ohos.agp.components.element.ShapeElement;
import ohos.agp.utils.Color;
import ohos.agp.components.DependentLayout.LayoutConfig;

public class SecondAbilitySlice extends AbilitySlice {
    @Override
    public void onStart(Intent intent) {
        super.onStart(intent);

        // 声明布局
        DependentLayout myLayout = new DependentLayout(this);

        // 设置布局宽高
        myLayout.setWidth(LayoutConfig.MATCH_PARENT);
        myLayout.setHeight(LayoutConfig.MATCH_PARENT);

        // 设置布局背景为白色
        ShapeElement background = new ShapeElement();
        background.setRgbColor(new RgbColor(255, 255, 255));
        myLayout.setBackground(background);

        // 创建一个文本
        Text text = new Text(this);
        text.setText("Hi there");
        text.setWidth(LayoutConfig.MATCH_PARENT);
        text.setTextSize(100);
        text.setTextColor(Color.BLACK);

        // 设置文本的布局
        DependentLayout.LayoutConfig textConfig = new DependentLayout.LayoutConfig(LayoutConfig.MATCH_CONTENT, LayoutConfig.MATCH_CONTENT);
        textConfig.addRule(LayoutConfig.CENTER_IN_PARENT);
        text.setLayoutConfig(textConfig);
        myLayout.addComponent(text);
        super.setUIContent(myLayout);
    }
}</code></pre><h3 id="实现页面跳转"><a href="#实现页面跳转" class="headerlink" title="实现页面跳转"></a>实现页面跳转</h3><ol>
<li>打开第一个页面的“MainAbilitySlice.java”文件，添加按钮的响应逻辑，实现点击按钮跳转到下一页，示例代码如下：</li>
</ol>
<pre><code>package com.example.myapplication.slice;

import com.example.myapplication.ResourceTable;

import ohos.aafwk.ability.AbilitySlice;
import ohos.aafwk.content.Intent;
import ohos.agp.components.Button;

public class MainAbilitySlice extends AbilitySlice {
    @Override
    public void onStart(Intent intent) {
        super.onStart(intent);
        super.setUIContent(ResourceTable.Layout_ability_main);
        Button button = (Button) findComponentById(ResourceTable.Id_button);

        // 点击按钮跳转至第二个页面
        button.setClickedListener(listener -&gt; present(new SecondAbilitySlice(), new Intent()));
    }
}</code></pre><ol>
<li>再次运行项目，效果如下图所示。</li>
</ol>
<p><img src="/images/loading.gif" data-original="https://starcross.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGFmMjVjYzBmYTExNDk1ZmUyYWI4ZjNlOWJkMjE3MTRfTlUyVm5tVlFtcWF0MGdhODhqaTBQdURNYlFoZDdBVFFfVG9rZW46Ym94Y244UURPY25qcjNoMG9LRWpXRXozR05ZXzE2MjcxNDcxOTU6MTYyNzE1MDc5NV9WNA" alt="img"></p>
<p>恭喜你，至此已成功完成HarmonyOS快速入门。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io" rel="external nofollow noreferrer">杰克成</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jackhcc.github.io/posts/9ee5.html">https://jackhcc.github.io/posts/9ee5.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Harmony/">
                                    <span class="chip bg-color">Harmony</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/aliqr.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/reward/wxqr.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '3821a0bbb773038a51fc',
        clientSecret: '4b30b507d67ec5497ec0e77f43f80cb3e0d7dd3a',
        repo: 'JackHCC.github.io',
        owner: 'JackHCC',
        admin: "JackHCC",
        id: '2021-07-25T01-18-15',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/e634.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/13.jpg" class="responsive-img" alt="HarmonyOS开发：Java应用">
                        
                        <span class="card-title">HarmonyOS开发：Java应用</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            HarmonyOS Java应用开发手册
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-07-25
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Harmony/" class="post-category">
                                    Harmony
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Harmony/">
                        <span class="chip bg-color">Harmony</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/38d.html">
                    <div class="card-image">
                        
                        
                        <img src="/images/loading.gif" data-original="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/medias/featureimages/21.jpg" class="responsive-img" alt="HarmonyOS设计：设备详解">
                        
                        <span class="card-title">HarmonyOS设计：设备详解</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            HarmonyOS设备详解文档
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-07-25
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Harmony/" class="post-category">
                                    Harmony
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Harmony/">
                        <span class="chip bg-color">Harmony</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="https://jackhcc.github.io" target="_blank">杰克成</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">655.9k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "2";
                    var startDate = "27";
                    var startHour = "6";
                    var startMinute = "30";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/JackHCC" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:jackcc0701@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/profile.php?id=100046343443643" class="tooltipped" target="_blank" data-tooltip="关注我的Facebook: https://www.facebook.com/profile.php?id=100046343443643" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>



    <a href="https://twitter.com/JackChe66021834" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/JackChe66021834" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2508074836" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2508074836" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/6885584679" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/6885584679" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/8f8482f01f0d6a04e844efe32e0f0710" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/js/matery.js"></script>

    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script type="text/javascript" src="/js/fireworks.js"></script>

    <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>'); }
    </script>

    <!-- weather -->
	<script type="text/javascript">
	WIDGET = {FID: 'TToslpmkVO'}
	</script>
	<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>


    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

    
    
    <script async src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script src="//code.tidio.co/kqhlkxviiccyoa0czpfpu4ijuey9hfre.js"></script>
        <script> 
            $(document).ready(function () {
                setInterval(change_Tidio, 50);  
                function change_Tidio() { 
                    var tidio=$("#tidio-chat iframe");
                    if(tidio.css("display")=="block"&& $(window).width()>977 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" &&$(window).width()>977)>0? "-40px" : ($("div.toc-title").length&&$(window).width()>977)>0?"85px":"20px";   
                        document.getElementById("tidio-chat-iframe").style.right="-15px";   
                        document.getElementById("tidio-chat-iframe").style.height=parseInt(tidio.css("height"))>=520?"520px":tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    } 
                    else if(tidio.css("display")=="block"&&$(window).width()>601 &&$(window).width()<992 ){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && 601< $(window).width()<992)>0? "-40px":"20px" ;   
                        document.getElementById("tidio-chat-iframe").style.right="-15px"; 
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    else if(tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))<230){
                        document.getElementById("tidio-chat-iframe").style.bottom= ($("div#backTop.top-scroll").css("display")=="none" && $(window).width()<601)>0? "-10px":"45px" ;   
                        document.getElementById("tidio-chat-iframe").style.zIndex="997";
                    }
                    if( tidio.css("display")=="block"&&$(window).width()<601 && parseInt(tidio.css("height"))>=230){
                        document.getElementById("tidio-chat-iframe").style.zIndex="998";
                    }
                } 
            }); 
        </script>
    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/canvas-nest.js"></script>
    

    

    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="https://cdn.jsdelivr.net/gh/JackHCC/JackHCC.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

        <script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script>
        <script>
        $('a').each(function() {
          const $this = $(this);
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'your_domain' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });
        </script><script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>

</html>

